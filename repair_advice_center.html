<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß ‰øÆÁêÜÂ∞ÇÈñÄ„Ç¢„Éâ„Éê„Ç§„Çπ„Çª„É≥„Çø„Éº - „Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜAIÁõ∏Ë´á</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 50%, #dc3545 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #dc3545;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        /* „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        .tab-navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            min-width: 180px;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
            background: linear-gradient(45deg, #20c997, #17a2b8);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #dc3545, #ff6b6b);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        .tab-btn.active:hover {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .search-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .search-title {
            color: #dc3545;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .search-form {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #dc3545;
            border-radius: 10px;
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.3);
        }

        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #dc3545, #ff6b6b);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }

        .search-btn:active {
            transform: translateY(0);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #dc3545;
            font-size: 1.2rem;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #dc3545;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .keyword-highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
            color: #856404;
        }
        
        .problem-item, .cost-item, .tool-item {
            margin: 5px 0;
            padding: 3px 0;
        }
        
        .cost-summary {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .results-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .search-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .search-summary h3 {
            margin: 0 0 15px 0;
            font-size: 1.5rem;
        }

        .search-summary p {
            margin: 8px 0;
            font-size: 1.1rem;
        }

        .result-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .result-rank {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 20px;
            min-width: 60px;
        }

        .rank-number {
            background: #ff6b6b;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        .relevance-icon {
            font-size: 1.5rem;
        }

        .result-title-section {
            flex: 1;
        }

        .result-title {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1.4rem;
        }

        .result-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .result-meta span {
            background: #f8f9fa;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .result-content {
            margin-bottom: 20px;
        }

        .result-content h4 {
            color: #2c3e50;
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }

        .result-content > div {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .cost-summary {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .cost-list, .product-list, .link-list {
            margin: 0;
            padding-left: 20px;
        }

        .cost-list li, .product-list li {
            margin: 5px 0;
            color: #495057;
        }

        .link-list li {
            margin: 5px 0;
        }

        .link-list a {
            color: #007bff;
            text-decoration: none;
        }

        .link-list a:hover {
            text-decoration: underline;
        }

        .matched-keywords p {
            margin: 5px 0;
            font-size: 0.9rem;
        }

        .result-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Âçò‰∏ÄÁµêÊûú„ÅÆÂ†¥Âêà„ÅÆÁâπÂà•„Å™„Çπ„Çø„Ç§„É´ */
        .search-info.single-result {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .result-item.single-result {
            border-left-color: #2ecc71;
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.2);
            background: linear-gradient(135deg, #ffffff 0%, #f8fffe 100%);
        }

        .result-item.single-result .rank-number {
            background: #2ecc71;
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
        }

        .result-item.single-result .relevance-icon {
            font-size: 2rem;
        }

        /* Ë©≥Á¥∞Ë°®Á§∫Áî®„ÅÆ„Çπ„Çø„Ç§„É´ */
        .structured-content {
            margin: 20px 0;
        }

        .structured-content > div {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #007bff;
        }

        .problem-description {
            border-left-color: #28a745;
            background: #f8fff9;
        }

        .causes {
            border-left-color: #dc3545;
            background: #fff8f8;
        }

        .solutions {
            border-left-color: #28a745;
            background: #f8fff9;
        }

        .tools-needed {
            border-left-color: #ffc107;
            background: #fffdf5;
        }

        .repair-steps {
            margin: 20px 0;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 10px;
            border-left: 4px solid #2196f3;
        }

        .steps-list {
            counter-reset: step-counter;
            padding-left: 0;
        }

        .steps-list li {
            counter-increment: step-counter;
            margin: 10px 0;
            padding: 10px 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            padding-left: 50px;
        }

        .steps-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: #2196f3;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .detailed-costs {
            margin-top: 15px;
        }

        .cost-breakdown {
            display: grid;
            gap: 10px;
        }

        .cost-item {
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .cost-header {
            margin-bottom: 8px;
        }

        .cost-range, .cost-single {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.1rem;
        }

        .cost-description {
            color: #495057;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .cost-reason {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 5px;
            border-left: 3px solid #28a745;
            font-size: 0.9rem;
            color: #495057;
        }

        .cost-reason strong {
            color: #28a745;
        }

        .detailed-products {
            margin-top: 15px;
        }

        .product-details {
            display: grid;
            gap: 15px;
        }

        .product-item {
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #17a2b8;
        }

        .product-item strong {
            color: #2c3e50;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 8px;
        }

        .product-item p {
            color: #6c757d;
            margin: 0;
        }

        .repair-costs {
            margin: 20px 0;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 10px;
            border-left: 4px solid #28a745;
        }

        .repair-costs h4 {
            color: #155724;
            margin-bottom: 10px;
        }

        .cost-item {
            background: white;
            border-left: 4px solid #28a745;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-weight: 500;
        }

        .warnings {
            margin: 20px 0;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
        }

        .warning-list {
            display: grid;
            gap: 10px;
        }

        .warning-item {
            display: flex;
            align-items: flex-start;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .warning-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .warning-text {
            color: #856404;
            flex: 1;
        }

        .additional-resources {
            margin-top: 15px;
        }

        .resource-list {
            padding-left: 20px;
        }

        .resource-list li {
            margin: 8px 0;
            color: #495057;
        }

        .expandable-content {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #dee2e6;
        }

        .expand-btn {
            width: 100%;
            margin-bottom: 15px;
        }

        .full-content {
            margin-top: 15px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .content-text {
            line-height: 1.6;
            color: #495057;
            white-space: pre-wrap;
        }

        /* „É¶„Éº„Ç∂„Éº„Éï„É¨„É≥„Éâ„É™„Éº„Å™Ë°®Á§∫ÊîπÂñÑ */

        .quick-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
        }

        .quick-cost, .quick-products {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .cost-highlight {
            font-size: 1.3rem;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
            text-align: center;
            padding: 10px;
            background: #fff5f5;
            border-radius: 8px;
            border: 2px solid #e74c3c;
        }
        
        .cost-item {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .no-costs {
            color: #6c757d;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        /* ‰øÆÁêÜÊâãÈ†Ü„ÅÆ„Çπ„Çø„Ç§„É´ */
        .step-item {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 5px;
            font-weight: 500;
            line-height: 1.6;
        }

        .no-steps {
            color: #6c757d;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        /* Ê≥®ÊÑè‰∫ãÈ†Ö„ÅÆ„Çπ„Çø„Ç§„É´ */
        .warning-item {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 5px;
            font-weight: 500;
            line-height: 1.6;
        }

        .no-warnings {
            color: #6c757d;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        .product-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .product-tag {
            background: #007bff;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .tool-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tool-tag {
            background: #ffc107;
            color: #212529;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .detailed-sections {
            margin: 20px 0;
        }

        .collapsible-section {
            margin-bottom: 15px;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            overflow: hidden;
        }

        .section-header {
            width: 100%;
            padding: 15px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .section-header:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
        }

        .section-header h4 {
            margin: 0;
            color: #2c3e50;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .section-header.active .toggle-icon {
            transform: rotate(180deg);
        }

        .section-content {
            padding: 20px;
            background: white;
            border-top: 1px solid #dee2e6;
        }

        .warning-section .section-header {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            color: #856404;
        }

        .warning-section .section-header:hover {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        }

        .external-link {
            display: block;
            padding: 10px 15px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            color: #007bff;
            text-decoration: none;
            margin: 8px 0;
            transition: all 0.3s ease;
        }

        .external-link:hover {
            background: #e3f2fd;
            border-color: #007bff;
            transform: translateX(5px);
        }

        /* ÂÆâÂÖ®„Å™„É™„É≥„ÇØ„ÅÆ„Çπ„Çø„Ç§„É´ */
        a[rel="noopener noreferrer"] {
            position: relative;
        }

        a[rel="noopener noreferrer"]::after {
            content: "üîí";
            font-size: 0.8rem;
            margin-left: 5px;
            opacity: 0.7;
        }

        .link-list {
            display: grid;
            gap: 10px;
        }

        /* ÁîªÂÉè„ÅÆ„Çà„ÅÜ„Å™ÂàÜ„Åã„Çä„ÇÑ„Åô„ÅÑ„É¨„Ç§„Ç¢„Ç¶„Éà */
        .problem-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border-left: 5px solid #dc3545;
        }

        .problem-icon {
            font-size: 2.5rem;
            margin-right: 20px;
        }

        .problem-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .troubleshooting-sections {
            margin: 30px 0;
        }

        .section-item {
            display: flex;
            margin-bottom: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 2px solid #007bff;
            border-style: solid;
        }

        .section-number {
            background: #007bff;
            color: white;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            flex-shrink: 0;
            border-radius: 8px 0 0 8px;
        }

        .section-content {
            flex: 1;
            padding: 25px;
        }

        .section-content h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .section-content p {
            margin: 0 0 15px 0;
            line-height: 1.6;
            color: #495057;
        }

        .safety-section {
            border-color: #ffc107;
        }

        /* ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã„Çª„ÇØ„Ç∑„Éß„É≥Áî®„Çπ„Çø„Ç§„É´ */
        .alternative-products-section {
            border-color: #28a745;
        }

        .alternative-products-section .section-number {
            background: #28a745;
        }

        /* Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„ÉºÁî®„Çπ„Çø„Ç§„É´ */
        .support-center-section {
            border-color: #dc3545;
        }

        .support-center-section .section-number {
            background: #dc3545;
        }

        .support-center-info {
            margin-top: 15px;
        }

        .contact-box, .service-box, .consultation-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .contact-box {
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaea 100%);
            border-color: #f5c6cb;
        }

        .service-box {
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
            border-color: #b8daff;
        }

        .consultation-box {
            background: linear-gradient(135deg, #fffbf0 0%, #fff3cd 100%);
            border-color: #ffeaa7;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
        }

        .contact-icon {
            font-size: 18px;
            margin-right: 10px;
            width: 24px;
            text-align: center;
        }

        .contact-label {
            font-weight: 600;
            color: #495057;
            margin-right: 8px;
            min-width: 80px;
        }

        .contact-value {
            color: #212529;
        }

        .contact-value a {
            color: #007bff;
            text-decoration: none;
        }

        .contact-value a:hover {
            text-decoration: underline;
        }

        .contact-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 8px 12px;
            margin: 15px 0 10px 0;
            font-size: 14px;
            color: #856404;
        }

        .company-info {
            font-size: 12px;
            color: #6c757d;
            text-align: right;
            margin-top: 10px;
            font-style: italic;
        }

        .service-list, .consultation-list {
            margin: 10px 0;
            padding-left: 20px;
        }

        .service-list li, .consultation-list li {
            margin-bottom: 8px;
            color: #495057;
        }

        .consultation-note {
            margin-top: 10px;
            font-weight: 600;
            color: #495057;
        }

        .alternative-products {
            margin-top: 15px;
        }

        .product-category {
            margin-bottom: 30px;
        }

        .product-category h5 {
            color: #28a745;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #28a745;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .product-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .product-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2);
            border-color: #28a745;
        }

        .product-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1rem;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .product-price {
            color: #dc3545;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .product-description {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .product-link {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .product-link:hover {
            background: #218838;
            color: white;
            text-decoration: none;
            transform: translateY(-1px);
        }

        /* ÂïÜÂìÅÊ§úÁ¥¢Ê©üËÉΩÁî®„Çπ„Çø„Ç§„É´ */
        .product-search-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #dee2e6;
        }

        .search-header h5 {
            color: #28a745;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .search-header p {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .search-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-controls .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-controls .search-input:focus {
            border-color: #28a745;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }

        .search-controls .search-btn {
            padding: 12px 24px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .search-controls .search-btn:hover {
            background: #218838;
        }

        .search-categories {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 8px 16px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            border-color: #28a745;
            color: #28a745;
        }

        .category-btn.active {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        /* Ê§úÁ¥¢ÁµêÊûú„ÅÆË°®Á§∫Âà∂Âæ° */
        .product-category.hidden {
            display: none;
        }

        .product-item.hidden {
            display: none;
        }

        .product-item.highlight {
            border-color: #28a745;
            background: #f8fff9;
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2);
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ */
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .product-item {
                padding: 12px;
            }

            .search-controls {
                flex-direction: column;
            }

            .search-categories {
                justify-content: center;
            }
        }

        .safety-section .section-number {
            background: #ffc107;
            color: #212529;
        }

        .safety-warnings {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
        }

        .safety-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .safety-item:last-child {
            margin-bottom: 0;
        }

        .safety-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .safety-text {
            color: #856404;
            font-weight: 500;
        }

        .cause-list, .solution-steps, .maintenance-list {
            padding-left: 0;
            list-style: none;
        }

        .cause-list li, .maintenance-list li {
            margin: 8px 0;
            padding: 10px 15px;
            background: #f8f9fa;
            border: 2px solid #dc3545;
            border-style: solid;
            border-radius: 5px;
        }

        .solution-steps li {
            margin: 12px 0;
            padding: 15px 20px;
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-style: solid;
            border-radius: 5px;
            font-weight: 500;
        }

        .tools-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .tool-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #ffc107;
            border-style: solid;
        }

        .tool-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .tool-name {
            font-weight: 500;
            color: #495057;
        }

        .expert-section {
            border-color: #6f42c1;
        }

        .expert-section .section-number {
            background: #6f42c1;
        }

        .substitute-section {
            border-color: #17a2b8;
        }

        .substitute-section .section-number {
            background: #17a2b8;
        }

        .purchase-section {
            border-color: #fd7e14;
        }

        .purchase-section .section-number {
            background: #fd7e14;
        }

        .expert-advice {
            background: #f8f9ff;
            border: 1px solid #e3e6ff;
            border-radius: 10px;
            padding: 20px;
        }

        .expert-advice ul {
            margin: 10px 0 0 20px;
        }

        .expert-advice li {
            margin: 8px 0;
            color: #495057;
        }

        /* „Çµ„Éù„Éº„Éà„Çª„É≥„Çø„ÉºË©≥Á¥∞ÊÉÖÂ†±„ÅÆ„Çπ„Çø„Ç§„É´ */
        .support-center-detailed {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
            border: 2px solid #6f42c1;
            border-radius: 15px;
        }

        .support-center-detailed h5 {
            margin: 0 0 15px 0;
            color: #6f42c1;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
        }

        .support-intro {
            margin: 0 0 20px 0;
            color: #495057;
            text-align: center;
            font-weight: 500;
        }

        .contact-details {
            margin-bottom: 25px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 10px 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .contact-icon {
            font-size: 1.2rem;
            margin-right: 10px;
            width: 25px;
            text-align: center;
        }

        .contact-label {
            font-weight: bold;
            color: #6f42c1;
            min-width: 80px;
            margin-right: 10px;
        }

        .contact-value {
            color: #495057;
            flex: 1;
        }

        .contact-value a {
            color: #007bff;
            text-decoration: none;
        }

        .contact-value a:hover {
            text-decoration: underline;
        }

        .contact-note {
            margin: 10px 0 15px 0;
            padding: 8px 12px;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            color: #856404;
            font-size: 0.9rem;
            font-style: italic;
        }

        .company-info {
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
            font-weight: 500;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        .service-list, .consultation-info {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e3f2fd;
        }

        .service-list h6, .consultation-info h6 {
            margin: 0 0 15px 0;
            color: #6f42c1;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .service-items, .consultation-items {
            padding-left: 20px;
            margin: 0;
        }

        .service-items li, .consultation-items li {
            margin: 8px 0;
            color: #495057;
            font-weight: 500;
        }

        .consultation-note {
            margin: 10px 0 0 0;
            color: #6c757d;
            font-style: italic;
        }

        /* ‰ª£Áî®ÂìÅ„Éª‰ª£ÊõøÂìÅ„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
        .substitute-products {
            margin: 20px 0;
        }

        .substitute-intro {
            margin: 0 0 20px 0;
            color: #495057;
            text-align: center;
            font-weight: 500;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .substitute-item {
            background: white;
            border: 2px solid #17a2b8;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .substitute-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .product-info h6 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1rem;
            font-weight: bold;
            line-height: 1.4;
        }

        .product-link {
            display: inline-block;
            color: #007bff;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 5px 10px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .product-link:hover {
            background: #e3f2fd;
            color: #0056b3;
            text-decoration: none;
        }

        .product-type {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .type-badge {
            background: #17a2b8;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* ÈÉ®ÂìÅË≥ºÂÖ•ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
        .purchase-info {
            margin: 20px 0;
        }

        .purchase-intro {
            margin: 0 0 20px 0;
            color: #495057;
            text-align: center;
            font-weight: 500;
        }

        .part-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .part-item {
            background: white;
            border: 2px solid #fd7e14;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .part-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .part-info h6 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1rem;
            font-weight: bold;
            line-height: 1.4;
        }

        .part-link {
            display: inline-block;
            color: #fd7e14;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 5px 10px;
            background: #fff5f0;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .part-link:hover {
            background: #fd7e14;
            color: white;
            text-decoration: none;
        }

        .part-search {
            display: inline-block;
            padding: 5px 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }

        .search-text {
            color: #6c757d;
            font-size: 0.9rem;
            font-style: italic;
        }

        .part-type {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .type-badge.purchase {
            background: #fd7e14;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .support-center {
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 20px;
            border: 2px solid #2196f3;
        }

        .support-center h3 {
            margin: 0 0 20px 0;
            color: #1565c0;
            font-size: 1.4rem;
            text-align: center;
        }

        .support-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .contact-info {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .contact-info p {
            margin: 5px 0;
            color: #495057;
        }

        /* „Éà„Ç§„É¨ÂïèÈ°å„ÅÆÊ¶ÇË¶ÅË°®Á§∫ */
        .problem-overview {
            margin: 20px 0;
        }

        .toilet-overview {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border: 2px solid #28a745;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .toilet-overview h5 {
            margin: 0 0 20px 0;
            color: #155724;
            font-size: 1.3rem;
            font-weight: bold;
            text-align: center;
        }

        .overview-content p {
            margin: 15px 0 10px 0;
            font-weight: bold;
            color: #2c3e50;
        }

        .symptom-list, .cause-overview {
            padding-left: 20px;
            margin: 10px 0 20px 0;
        }

        .symptom-list li, .cause-overview li {
            margin: 8px 0;
            padding: 8px 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            color: #495057;
            font-weight: 500;
        }

        .symptom-list li {
            border-left-color: #dc3545;
        }

        .cause-overview li {
            border-left-color: #ffc107;
        }

        /* „Éà„Ç§„É¨‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„ÇπÂ∞ÇÁî®„Çπ„Çø„Ç§„É´ */
        .toilet-repair-advice {
            margin: 20px 0;
        }

        .repair-step {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 2px solid #007bff;
            border-style: solid;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .repair-step h5 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.1rem;
            font-weight: bold;
            flex: 1;
        }

        .cost-badge {
            background: #e74c3c;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 15px;
            flex-shrink: 0;
        }

        .cost-description {
            margin: 0 0 15px 0;
            color: #6c757d;
            font-size: 0.9rem;
            font-style: italic;
        }

        .step-details {
            padding-left: 0;
            list-style: none;
            margin: 0;
        }

        .step-details li {
            margin: 10px 0;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #28a745;
            border-style: solid;
            color: #495057;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .step-details li:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .step-details li::before {
            content: "‚úì";
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
        }


        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media (max-width: 768px) {
            .quick-info {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .result-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .result-rank {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .result-meta {
                justify-content: center;
                flex-wrap: wrap;
            }

            .section-item {
                flex-direction: column;
            }

            .section-number {
                width: 100%;
                height: 50px;
                border-radius: 0;
            }

            .support-info {
                grid-template-columns: 1fr;
            }

            .tools-list {
                grid-template-columns: 1fr;
            }

            .step-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .cost-badge {
                margin-left: 0;
                margin-top: 8px;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .part-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-item {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #dc3545;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .result-title {
            color: #dc3545;
            font-size: 1.4rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .result-category {
            background: #dc3545;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 15px;
        }

        .result-content {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .result-details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        /* Ë≤ªÁî®ÁõÆÂÆâË°®Á§∫Áî®„ÅÆ„Çπ„Çø„Ç§„É´ */
        .cost-info {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);
        }

        .cost-info .result-title {
            color: #856404;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cost-info .result-content {
            color: #856404;
            font-weight: 500;
            line-height: 1.8;
        }

        .cost-info .result-content strong {
            color: #dc3545;
            font-weight: bold;
        }

        .cost-item {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            border-left: 4px solid #ffc107;
        }

        .cost-item:first-child {
            margin-top: 0;
        }

        .cost-item:last-child {
            margin-bottom: 0;
        }

        .cost-info, .product-info, .url-info {
            margin-bottom: 10px;
        }

        .cost-info strong, .product-info strong, .url-info strong {
            color: #dc3545;
        }

        .url-link {
            color: #dc3545;
            text-decoration: none;
            margin-right: 10px;
        }

        .url-link:hover {
            text-decoration: underline;
        }

        /* no-results „Çπ„Çø„Ç§„É´„ÅØÂâäÈô§ */

        /* „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÈñ¢ÈÄ£„ÅÆ„Çπ„Çø„Ç§„É´„ÅØÂâäÈô§ */

        .suggestions {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .suggestions h4 {
            color: #dc3545;
            margin-bottom: 15px;
        }

        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .suggestion-tag {
            background: #dc3545;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-tag:hover {
            background: #ff6b6b;
            transform: translateY(-1px);
        }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #666;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .footer a {
            color: #dc3545;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .search-form {
                flex-direction: column;
            }

            .search-input, .search-btn {
                width: 100%;
            }

            .suggestion-tags {
                justify-content: center;
            }
        }

        /* Êï¥ÁêÜ„Åï„Çå„Åü„Çª„ÇØ„Ç∑„Éß„É≥Áî®„Çπ„Çø„Ç§„É´ */
        .organized-sections {
            margin: 20px 0;
        }

        .section-item {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #007bff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-content {
            color: #495057;
            line-height: 1.6;
        }

        .section-content ul, .section-content ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .section-content li {
            margin: 8px 0;
        }

        .section-content p {
            margin: 10px 0;
        }

        /* „Çª„ÇØ„Ç∑„Éß„É≥Âà•„ÅÆËâ≤ÂàÜ„Åë */
        .section-item:nth-child(1) { border-left-color: #28a745; } /* ÂïèÈ°å„ÅÆÁ®ÆÈ°û */
        .section-item:nth-child(2) { border-left-color: #dc3545; } /* ‰øÆÁêÜË≤ªÁî® */
        .section-item:nth-child(3) { border-left-color: #ffc107; } /* Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ */
        .section-item:nth-child(4) { border-left-color: #17a2b8; } /* ‰øÆÁêÜÊâãÈ†Ü */
        .section-item:nth-child(5) { border-left-color: #6f42c1; } /* Ê≥®ÊÑè‰∫ãÈ†Ö */

        /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="header fade-in">
            <h1>üîß ‰øÆÁêÜÂ∞ÇÈñÄ„Ç¢„Éâ„Éê„Ç§„Çπ„Çª„É≥„Çø„Éº</h1>
            <p>ÂÖ∑‰ΩìÁöÑ„Å™‰øÆÁêÜË≤ªÁõ∏Â†¥„ÄÅ‰ª£ÊõøÂìÅ„Çí„ÅîÁ¥π‰ªã</p>
            <p>„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº„ÅÆ‰øÆÁêÜ„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ„Å´Èñ¢„Åô„ÇãÂ∞ÇÈñÄÁöÑ„Å™„Ç¢„Éâ„Éê„Ç§„Çπ„ÇíÊèê‰æõ„Åó„Åæ„Åô</p>
            
            <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ - ÈùûË°®Á§∫ -->
            <!--
            <div class="tab-navigation">
                <button class="tab-btn active" onclick="openAppPy()">
                    üöÄ „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Ëµ∑Âãï
                </button>
                <button class="tab-btn" onclick="openFrontend()">
                    üåê „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâË°®Á§∫
                </button>
                <button class="tab-btn" onclick="openBackend()">
                    ‚öôÔ∏è „Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÁÆ°ÁêÜ
                </button>
            </div>
            -->
        </div>

        <!-- Ê§úÁ¥¢„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="search-section fade-in">
            <h2 class="search-title">üîç ‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„ÇπÊ§úÁ¥¢</h2>
            <form class="search-form" id="searchForm">
                <input type="text" class="search-input" id="searchInput" 
                       placeholder="‰æã: „Éê„ÉÉ„ÉÜ„É™„Éº„ÄÅÈõ®Êºè„Çä„ÄÅ„Ç®„Ç¢„Ç≥„É≥„ÄÅ„Éà„Ç§„É¨„ÄÅ„Ç¨„Çπ„Ç≥„É≥„É≠..." 
                       required>
                <button type="submit" class="search-btn">üîç Ê§úÁ¥¢</button>
            </form>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>‚è≥ ÂõûÁ≠îÊôÇÈñì„Å´Â∞ë„ÄÖ„ÅäÊôÇÈñì„Çí„Åè„Å†„Åï„ÅÑ„ÄÇÂ∞ÇÈñÄÁöÑ„Å™ÊÉÖÂ†±„ÇíÂèéÈõÜ„ÉªÊï¥ÁêÜ„Åó„Å¶„Åä„Çä„Åæ„Åô„ÄÇ</p>
            </div>
        </div>

        <!-- Ê§úÁ¥¢ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="results-section" id="resultsSection">
            <h2 class="search-title">üìã Ê§úÁ¥¢ÁµêÊûú</h2>
            <div id="resultsContainer"></div>
        </div>

        <!-- „Éï„ÉÉ„Çø„Éº -->
        <div class="footer fade-in">
            <p>¬© 2024 „Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜAIÁõ∏Ë´á„Ç∑„Çπ„ÉÜ„É†</p>
            <p>„Çà„ÇäË©≥Á¥∞„Å™Áõ∏Ë´á„ÅØ <a href="http://localhost:8501/" target="_blank">AI„ÉÅ„É£„ÉÉ„ÉàÁõ∏Ë´á</a> „Åæ„Åü„ÅØ <a href="http://localhost:8501/" target="_blank">ÂØæË©±ÂºèÁóáÁä∂Ë®∫Êñ≠</a> „Çí„ÅîÂà©Áî®„Åè„Å†„Åï„ÅÑ</p>
        </div>
    </div>

    <script>
        // „Éá„Éê„ÉÉ„Ç∞Ê©üËÉΩ„ÅÆËøΩÂä†
        console.log('üîß Ê§úÁ¥¢Ê©üËÉΩ„Éá„Éê„ÉÉ„Ç∞ÈñãÂßã');
        console.log('üìã DOMË¶ÅÁ¥†„ÉÅ„Çß„ÉÉ„ÇØ:');
        console.log('  - searchForm:', document.getElementById('searchForm'));
        console.log('  - searchInput:', document.getElementById('searchInput'));
        console.log('  - loading:', document.getElementById('loading'));
        console.log('  - resultsSection:', document.getElementById('resultsSection'));
        
        // Ê§úÁ¥¢„Éï„Ç©„Éº„É†„ÅÆÂá¶ÁêÜÔºàÊîπÂñÑÁâàÔºâ
        document.getElementById('searchForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const searchInput = document.getElementById('searchInput');
            const query = searchInput.value.trim();
            
            console.log('üîç Ê§úÁ¥¢„Éï„Ç©„Éº„É†ÈÄÅ‰ø°:', query);
            
            if (!query) {
                alert('Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            showLoading();
            
            try {
                console.log('‚è≥ Ê§úÁ¥¢Âá¶ÁêÜÈñãÂßã...');
                console.log('üîç Ê§úÁ¥¢„ÇØ„Ç®„É™:', query);
                
                // ÂÆüÈöõ„ÅÆÊ§úÁ¥¢Âá¶ÁêÜ
                const results = await searchRepairAdvice(query);
                console.log('üìã Ê§úÁ¥¢ÁµêÊûúÂèñÂæó:', results);
                console.log('üìä ÁµêÊûú„ÅÆË©≥Á¥∞:', JSON.stringify(results, null, 2));
                console.log('üìä ÁµêÊûú„ÅÆÂûã:', typeof results);
                console.log('üìä ÁµêÊûú„ÅÆÈï∑„Åï:', results ? results.length : 'undefined');
                
                if (results && results.length > 0) {
                    console.log('‚úÖ ÁµêÊûú„ÇíË°®Á§∫„Åó„Åæ„Åô');
                    displayResults(results, query);
                } else {
                    console.log('‚ö†Ô∏è Ê§úÁ¥¢ÁµêÊûú„ÅåÁ©∫„Åß„Åô');
                    displayError('Ê§úÁ¥¢ÁµêÊûú„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÂà•„ÅÆ„Ç≠„Éº„ÉØ„Éº„Éâ„Åß„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');
                }
            } catch (error) {
                console.error('‚ùå Ê§úÁ¥¢„Ç®„É©„Éº:', error);
                console.error('‚ùå „Ç®„É©„ÉºË©≥Á¥∞:', error.stack);
                displayError(`Ê§úÁ¥¢‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ${error.message}`);
            } finally {
                hideLoading();
            }
        });

        // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫ÔºàÊîπÂñÑÁâàÔºâ
        function showLoading() {
            console.log('‚è≥ „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫ÈñãÂßã');
            document.getElementById('loading').classList.add('show');
            document.getElementById('resultsSection').classList.remove('show');
        }

        // „É≠„Éº„Éá„Ç£„É≥„Ç∞ÈùûË°®Á§∫ÔºàÊîπÂñÑÁâàÔºâ
        function hideLoading() {
            console.log('‚úÖ „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫ÁµÇ‰∫Ü');
            document.getElementById('loading').classList.remove('show');
        }

        // „Çµ„Éº„Éê„ÉºÁä∂ÊÖã„ÉÅ„Çß„ÉÉ„ÇØ
        async function checkServerStatus() {
            try {
                const response = await fetch('/api/health', {
                    method: 'GET',
                    timeout: 3000
                });
                return response.ok;
            } catch (error) {
                console.log('„Çµ„Éº„Éê„ÉºÊé•Á∂ö„Ç®„É©„Éº:', error);
                return false;
            }
        }

        // Ê§úÁ¥¢Âá¶ÁêÜÔºàÊîπÂñÑÁâà - „ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Å®RAG„Ç∑„Çπ„ÉÜ„É†ÂØæÂøúÔºâ
        async function searchRepairAdvice(query) {
            try {
                console.log('üîç Ê§úÁ¥¢ÈñãÂßã:', query);
                
                // „Çµ„Éº„Éê„ÉºÁä∂ÊÖã„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                const serverOnline = await checkServerStatus();
                console.log('üåê „Çµ„Éº„Éê„ÉºÁä∂ÊÖã:', serverOnline);
                if (!serverOnline) {
                    console.log('‚ö†Ô∏è „Çµ„Éº„Éê„Éº„Åå„Ç™„Éï„É©„Ç§„É≥„Åß„Åô„ÄÇ„É¢„ÉÉ„ÇØ„Éá„Éº„Çø„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ');
                    return getMockResults(query);
                }

                console.log('üåê RAG„Ç∑„Çπ„ÉÜ„É†Ê§úÁ¥¢‰∏≠...');
                const ragResponse = await fetch('/api/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ query: query })
                });
                
                console.log('üì° RAG„É¨„Çπ„Éù„É≥„ÇπÁä∂ÊÖã:', ragResponse.status);
                let ragResults = [];
                if (ragResponse.ok) {
                    const ragData = await ragResponse.json();
                    console.log('üìä RAG„Éá„Éº„Çø:', ragData);
                    if (ragData.results) {
                        ragResults = ragData.results;
                        console.log('‚úÖ RAGÊ§úÁ¥¢ÂÆå‰∫Ü:', ragResults.length, '‰ª∂');
                    } else {
                        console.log('‚ö†Ô∏è RAGÊ§úÁ¥¢ÁµêÊûú„ÅåÁ©∫„Åæ„Åü„ÅØÂ§±Êïó');
                    }
                } else {
                    console.log('‚ùå RAGÊ§úÁ¥¢„Ç®„É©„Éº:', ragResponse.status);
                }
                
                console.log('üìÑ „ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´Ê§úÁ¥¢‰∏≠...');
                const textResponse = await fetch('/api/search_text_files', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ query: query })
                });
                
                console.log('üì° „ÉÜ„Ç≠„Çπ„Éà„É¨„Çπ„Éù„É≥„ÇπÁä∂ÊÖã:', textResponse.status);
                let textResults = [];
                if (textResponse.ok) {
                    const textData = await textResponse.json();
                    console.log('üìä „ÉÜ„Ç≠„Çπ„Éà„Éá„Éº„Çø:', textData);
                    if (textData.results) {
                        textResults = textData.results;
                        console.log('‚úÖ „ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´Ê§úÁ¥¢ÂÆå‰∫Ü:', textResults.length, '‰ª∂');
                    } else {
                        console.log('‚ö†Ô∏è „ÉÜ„Ç≠„Çπ„ÉàÊ§úÁ¥¢ÁµêÊûú„ÅåÁ©∫„Åæ„Åü„ÅØÂ§±Êïó');
                    }
                } else {
                    console.log('‚ùå „ÉÜ„Ç≠„Çπ„ÉàÊ§úÁ¥¢„Ç®„É©„Éº:', textResponse.status);
                }
                
                // ÁµêÊûú„ÇíÁµ±Âêà
                const allResults = [...ragResults, ...textResults];
                console.log('‚úÖ Áµ±ÂêàÊ§úÁ¥¢ÂÆå‰∫Ü:', allResults.length, '‰ª∂');
                console.log('üìä Áµ±ÂêàÁµêÊûúË©≥Á¥∞:', JSON.stringify(allResults, null, 2));
                
                if (allResults.length > 0) {
                    console.log('‚úÖ Ê§úÁ¥¢ÁµêÊûú„ÇíËøî„Åó„Åæ„Åô:', allResults.length, '‰ª∂');
                    return allResults;
                } else {
                    console.log('‚ö†Ô∏è Ê§úÁ¥¢ÁµêÊûú„Å™„Åó„ÄÅ„É¢„ÉÉ„ÇØ„Éá„Éº„Çø„Çí‰ΩøÁî®');
                    const mockResults = getMockResults(query);
                    console.log('üìä „É¢„ÉÉ„ÇØÁµêÊûú:', mockResults.length, '‰ª∂');
                    return mockResults;
                }
                
            } catch (error) {
                console.error('‚ùå Ê§úÁ¥¢„Ç®„É©„Éº:', error);
                console.log('üîß „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: „É¢„ÉÉ„ÇØ„Éá„Éº„Çø„Çí‰ΩøÁî®„Åó„Åæ„Åô');
                return getMockResults(query);
            }
        }

        // „Ç≠„Éº„ÉØ„Éº„Éâ„Éè„Ç§„É©„Ç§„ÉàÊ©üËÉΩ
        function highlightKeywords(text, query) {
            if (!text || !query) return text;
            
            const keywords = query.split(' ').filter(word => word.length > 1);
            let highlightedText = text;
            
            keywords.forEach(keyword => {
                const regex = new RegExp(`(${keyword})`, 'gi');
                highlightedText = highlightedText.replace(regex, '<mark class="keyword-highlight">$1</mark>');
            });
            
            return highlightedText;
        }

        // Ë≤ªÁî®ÁõÆÂÆâÊÉÖÂ†±„ÅÆ„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatCostInformation(content) {
            if (!content) return '';
            
            // Ë≤ªÁî®ÊÉÖÂ†±„ÇíË°å„Åî„Å®„Å´ÂàÜÂâ≤
            const lines = content.split('\n').filter(line => line.trim());
            let formattedHtml = '';
            
            lines.forEach(line => {
                if (line.includes('ÂÜÜ')) {
                    // Ë≤ªÁî®ÊÉÖÂ†±„ÅÆË°å„ÇíÁâπÂà•„Å´„Éï„Ç©„Éº„Éû„ÉÉ„Éà
                    const costItem = line.replace(/\*\*/g, '').trim();
                    formattedHtml += `<div class="cost-item">${costItem}</div>`;
                } else if (line.trim()) {
                    // „Åù„ÅÆ‰ªñ„ÅÆÊÉÖÂ†±
                    formattedHtml += `<div class="cost-description">${line.trim()}</div>`;
                }
            });
            
            return formattedHtml;
        }

        // ÂïèÈ°å„ÅÆÁ®ÆÈ°û„ÇíÂèñÂæóÔºàÊîπÂñÑÁâà - „Ç®„Ç¢„Ç≥„É≥ÂØæÂøúÔºâ
        function getProblemTypes(result, query) {
            const problems = [];
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„ÇâÂïèÈ°å„ÇíÊäΩÂá∫
            if (result.structured_content && result.structured_content.problem_description) {
                problems.push(result.structured_content.problem_description);
            }
            
            // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÂïèÈ°å„ÇíÊäΩÂá∫Ôºà„Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®Ôºâ
            if (result.content) {
                const content = result.content.toLowerCase();
                
                // „Ç®„Ç¢„Ç≥„É≥ÁâπÊúâ„ÅÆÂïèÈ°å„Éë„Çø„Éº„É≥
                if (content.includes('ÂÜ∑È¢®„ÅåÂá∫„Å™„ÅÑ') || content.includes('ÂÜ∑„Åà„Å™„ÅÑ')) {
                    problems.push('ÂÜ∑È¢®„ÅåÂá∫„Å™„ÅÑ„ÉªÂÜ∑„Åà„Å™„ÅÑ');
                }
                if (content.includes('ÈõªÊ∫ê„ÅåÂÖ•„Çâ„Å™„ÅÑ') || content.includes('ÈõªÊ∫ê')) {
                    problems.push('ÈõªÊ∫ê„ÅåÂÖ•„Çâ„Å™„ÅÑ„ÉªÈõªÊ∫êÁï∞Â∏∏');
                }
                if (content.includes('Áï∞Èü≥') || content.includes('Èü≥„Åå„Åô„Çã')) {
                    problems.push('Áï∞Èü≥„ÉªÈ®íÈü≥');
                }
                if (content.includes('Ê∞¥Êºè„Çå') || content.includes('Ê∞¥„ÅåÊºè„Çå„Çã')) {
                    problems.push('Ê∞¥Êºè„Çå„ÉªÊ∂≤‰ΩìÊºè„Çå');
                }
                if (content.includes('„É™„É¢„Ç≥„É≥') || content.includes('„É™„É¢„Ç≥„É≥„ÅåÂäπ„Åã„Å™„ÅÑ')) {
                    problems.push('„É™„É¢„Ç≥„É≥„ÅåÂäπ„Åã„Å™„ÅÑ„ÉªÊìç‰Ωú‰∏çËâØ');
                }
                
                // ‰∏ÄËà¨ÁöÑ„Å™ÂïèÈ°å„Éë„Çø„Éº„É≥
                if (content.includes('ÊïÖÈöú') || content.includes('‰∏çÂÖ∑Âêà') || content.includes('ÂïèÈ°å')) {
                    problems.push('Ê©üÂô®„ÅÆÊïÖÈöú„Éª‰∏çÂÖ∑Âêà');
                }
                if (content.includes('ÈõªÊ∞ó') || content.includes('ÈõªÊ∫ê')) {
                    problems.push('ÈõªÊ∞óÁ≥ªÁµ±„ÅÆÂïèÈ°å');
                }
            }
            
            // „Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞Ôºà„Ç®„Ç¢„Ç≥„É≥Âº∑Âåñ - „Ç´„ÉÜ„Ç¥„É™„ÉºÂÄôË£ú„Å®‰∏ªË¶Å„Ç≠„Éº„ÉØ„Éº„ÉâÂØæÂøúÔºâ
            if (query) {
                const queryLower = query.toLowerCase();
                
                // „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„ÅÆ„Ç´„ÉÜ„Ç¥„É™„ÉºÂÄôË£ú
                if (queryLower.includes('„Ç®„Ç¢„Ç≥„É≥') || queryLower.includes('aircon')) {
                    problems.push('„Ç®„Ç¢„Ç≥„É≥„ÉªÂÜ∑Êàø„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('ÂÜ∑ÊöñÊàø') || queryLower.includes('ÂÜ∑ÊöñÊàø„Ç∑„Çπ„ÉÜ„É†')) {
                    problems.push('ÂÜ∑ÊöñÊàø„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('ËªäËºâ„ÇØ„Éº„É©„Éº') || queryLower.includes('„ÇØ„Éº„É©„Éº')) {
                    problems.push('ËªäËºâ„ÇØ„Éº„É©„Éº');
                }
                if (queryLower.includes('ÂÆ§ÂÜÖÁ©∫Ë™ø') || queryLower.includes('Á©∫Ë™ø')) {
                    problems.push('ÂÆ§ÂÜÖÁ©∫Ë™ø');
                }
                if (queryLower.includes('„ÇØ„É©„Ç§„É°„Éº„Éà') || queryLower.includes('„ÇØ„É©„Ç§„É°„Éº„Éà„Ç≥„É≥„Éà„É≠„Éº„É´')) {
                    problems.push('„ÇØ„É©„Ç§„É°„Éº„Éà„Ç≥„É≥„Éà„É≠„Éº„É´');
                }
                
                // „Éà„Ç§„É¨Èñ¢ÈÄ£„ÅÆ„Ç´„ÉÜ„Ç¥„É™„ÉºÂÄôË£ú
                if (queryLower.includes('„Éà„Ç§„É¨') || queryLower.includes('toilet')) {
                    problems.push('„Éà„Ç§„É¨„Éª‰æøÂô®„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('„Ç´„Çª„ÉÉ„Éà') || queryLower.includes('„Ç´„Çª„ÉÉ„Éà„Éà„Ç§„É¨')) {
                    problems.push('„Ç´„Çª„ÉÉ„Éà„Éà„Ç§„É¨');
                }
                if (queryLower.includes('Ê∞¥Êºè„Çå') || queryLower.includes('Ê∞¥„ÅåÊºè„Çå„Çã')) {
                    problems.push('Ê∞¥Êºè„Çå„ÉªÁµ¶Ê∞¥„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('Ë©∞„Åæ„Çä') || queryLower.includes('ÊéíÊ∞¥„ÅåÊµÅ„Çå„Å™„ÅÑ')) {
                    problems.push('ÊéíÊ∞¥„ÉªË©∞„Åæ„Çä');
                }
                if (queryLower.includes('„Éï„É©„ÉÉ„Éó') || queryLower.includes('„Éê„É´„Éñ')) {
                    problems.push('„Éï„É©„ÉÉ„Éó„Éª„Éê„É´„Éñ„Ç∑„Çπ„ÉÜ„É†');
                }
                
                // „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„ÅÆ‰∏ªË¶Å„Ç≠„Éº„ÉØ„Éº„Éâ
                if (queryLower.includes('ÂÜ∑Êàø') || queryLower.includes('ÂÜ∑È¢®') || queryLower.includes('ÂÜ∑„Åà„Å™„ÅÑ')) {
                    problems.push('ÂÜ∑Êàø„ÉªÂÜ∑È¢®„ÅåÂá∫„Å™„ÅÑ');
                }
                if (queryLower.includes('ÊöñÊàø') || queryLower.includes('ÊöñÈ¢®')) {
                    problems.push('ÊöñÊàø„ÉªÊöñÈ¢®„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº')) {
                    problems.push('„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„ÉºÈñ¢ÈÄ£„ÅÆÂïèÈ°å');
                }
                if (queryLower.includes('„Ç¨„ÇπÊºè„Çå') || queryLower.includes('„Ç¨„Çπ')) {
                    problems.push('„Ç¨„ÇπÊºè„Çå„ÉªÂÜ∑Â™íÊºè„Çå');
                }
                if (queryLower.includes('„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„Éº') || queryLower.includes('„Éï„Ç£„É´„Çø„Éº')) {
                    problems.push('„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„Éº„ÉªÊ∏ÖÊéÉ');
                }
                if (queryLower.includes('È¢®Èáè') || queryLower.includes('È¢®')) {
                    problems.push('È¢®Èáè„ÉªÈÄÅÈ¢®„ÅÆÂïèÈ°å');
                }
                if (queryLower.includes('Ê∏©Â∫¶Ë™øÊï¥') || queryLower.includes('Ê∏©Â∫¶')) {
                    problems.push('Ê∏©Â∫¶Ë™øÊï¥„ÉªÊ∏©Â∫¶Âà∂Âæ°');
                }
                if (queryLower.includes('ÂÜ∑Â™í')) {
                    problems.push('ÂÜ∑Â™í„ÉªÂÜ∑Â™í„Ç¨„Çπ');
                }
                if (queryLower.includes('ÊïÖÈöú') || queryLower.includes('‰∏çÂÖ∑Âêà')) {
                    problems.push('„Ç®„Ç¢„Ç≥„É≥ÊïÖÈöú„Éª‰∏çÂÖ∑Âêà');
                }
                
                // ‰∏ÄËà¨ÁöÑ„Å™ÂïèÈ°å„Éë„Çø„Éº„É≥
                if (queryLower.includes('ÈõªÊ∫ê') || queryLower.includes('ÈõªÊ∫ê„ÅåÂÖ•„Çâ„Å™„ÅÑ')) {
                    problems.push('ÈõªÊ∫êÁï∞Â∏∏„ÉªÈõªÊ∫ê„ÅåÂÖ•„Çâ„Å™„ÅÑ');
                }
                if (queryLower.includes('Áï∞Èü≥') || queryLower.includes('Èü≥')) {
                    problems.push('Áï∞Èü≥„ÉªÈ®íÈü≥');
                }
                if (queryLower.includes('Ê∞¥Êºè„Çå') || queryLower.includes('Ê∞¥Êºè„Çå')) {
                    problems.push('Ê∞¥Êºè„Çå„ÉªÊ∂≤‰ΩìÊºè„Çå');
                }
                if (queryLower.includes('„É™„É¢„Ç≥„É≥') || queryLower.includes('„É™„É¢„Ç≥„É≥„ÅåÂäπ„Åã„Å™„ÅÑ')) {
                    problems.push('„É™„É¢„Ç≥„É≥Êìç‰Ωú‰∏çËâØ');
                }
                if (queryLower.includes('„Éê„ÉÉ„ÉÜ„É™„Éº') || queryLower.includes('ÈõªÊ±†')) {
                    problems.push('„Éê„ÉÉ„ÉÜ„É™„ÉºÈñ¢ÈÄ£„ÅÆÂïèÈ°å');
                }
                if (queryLower.includes('„Çø„Ç§„É§') || queryLower.includes('„Éõ„Ç§„Éº„É´')) {
                    problems.push('„Çø„Ç§„É§„Éª„Éõ„Ç§„Éº„É´Èñ¢ÈÄ£');
                }
                if (queryLower.includes('ff„Éí„Éº„Çø„Éº') || queryLower.includes('„Éí„Éº„Çø„Éº')) {
                    problems.push('FF„Éí„Éº„Çø„Éº„ÉªÊöñÊàø„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('Ê∞¥ÈÅì') || queryLower.includes('„Éù„É≥„Éó')) {
                    problems.push('Ê∞¥ÈÅì„Éª„Éù„É≥„Éó„Ç∑„Çπ„ÉÜ„É†');
                }
                if (queryLower.includes('Èõ®Êºè„Çä') || queryLower.includes('Ê∞¥Êºè„Çå')) {
                    problems.push('Èõ®Êºè„Çä„ÉªÊ∞¥Êºè„ÇåÂïèÈ°å');
                }
            }
            
            if (problems.length === 0) {
                problems.push('‰∏ÄËà¨ÁöÑ„Å™‰øÆÁêÜ„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ');
            }
            
            return problems.map(problem => `<div class="problem-item">‚Ä¢ ${highlightKeywords(problem, query)}</div>`).join('');
        }

        // „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„Ç≠„Éº„ÉØ„Éº„Éâ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        function isAirconRelatedQuery(query) {
            const airconKeywords = [
                '„Ç®„Ç¢„Ç≥„É≥', 'ÂÜ∑Êàø', 'ÊöñÊàø', 'Á©∫Ë™ø', 'ÂÜ∑„Åà„Å™„ÅÑ', 'Êöñ„Åæ„Çâ„Å™„ÅÑ',
                '„Éï„Ç£„É´„Çø„Éº', '„É™„É¢„Ç≥„É≥', 'Ê∏©Â∫¶', 'ÂÜ∑Â™í', '„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº',
                'AC', 'aircon', '„ÇØ„Éº„É©„Éº', '„Éí„Éº„Çø„Éº', 'ÂÆ§Â§ñÊ©ü', 'ÂÆ§ÂÜÖÊ©ü'
            ];
            
            const queryLower = query.toLowerCase();
            return airconKeywords.some(keyword => queryLower.includes(keyword));
        }

        // „Éà„Ç§„É¨Èñ¢ÈÄ£„Ç≠„Éº„ÉØ„Éº„Éâ„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        function isToiletRelatedQuery(query) {
            const toiletKeywords = [
                '„Éà„Ç§„É¨', '‰æøÂô®', '„Ç´„Çª„ÉÉ„Éà', 'toilet', 'Ê∞¥Êºè„Çå', 'Ë©∞„Åæ„Çä',
                'ÊéíÊ∞¥', '„Éù„É≥„Éó', '„Éï„É©„ÉÉ„Éó', '„Éê„É´„Éñ', '„Ç∑„Éº„É´'
            ];
            
            const queryLower = query.toLowerCase();
            return toiletKeywords.some(keyword => queryLower.includes(keyword));
        }

        // „Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®„ÅÆ‰øÆÁêÜÊâãÈ†Ü„ÇíÂèñÂæó
        function getAirconRepairSteps() {
            return `
                <div class="step-item">
                    <strong>„Éà„É©„Éñ„É´ÁÆáÊâÄ„ÅÆÁâπÂÆö:</strong> ÂÜ∑È¢®„ÅÆÊúâÁÑ°„ÄÅ„Éï„Ç°„É≥„ÅÆÂãï‰ΩúÁ¢∫Ë™ç„ÄÅÈõªÊ∫ê„ÅÆON/OFF„ÄÅ„É™„É¢„Ç≥„É≥„ÅÆÊìç‰ΩúÂèØÂê¶
                </div>
                <div class="step-item">
                    <strong>ÈõªÂúßÊ∏¨ÂÆö„Éª„Éí„É•„Éº„Ç∫Á¢∫Ë™ç:</strong> 12VÈõªÂúß„ÅÆÁ¢∫Ë™ç„ÄÅ„Éí„É•„Éº„Ç∫„ÅÆÁä∂ÊÖã„ÉÅ„Çß„ÉÉ„ÇØ
                </div>
                <div class="step-item">
                    <strong>ÂøúÊÄ•Âá¶ÁΩÆ:</strong> „Éê„ÉÉ„ÉÜ„É™„ÉºÂÖÖÈõªÂæåÂÜçËµ∑Âãï„ÄÅ„Éí„É•„Éº„Ç∫‰∫§Êèõ„ÄÅ„Éâ„É¨„É≥„Éõ„Éº„ÇπÊ∏ÖÊéÉ
                </div>
                <div class="step-item">
                    <strong>Êú¨Ê†º‰øÆÁêÜ:</strong> ÂÜ∑Â™í„Ç¨„ÇπË£úÂÖÖ„ÉªÁúüÁ©∫Âºï„Åç„ÄÅ„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº„ÉªÂü∫Êùø„Éª„Éï„Ç°„É≥„É¢„Éº„Çø„Éº„ÅÆ‰∫§Êèõ
                </div>
                <div class="step-item">
                    <strong>Ê∏ÖÊéÉ‰ΩúÊ•≠:</strong> „Éâ„É¨„É≥„Éõ„Éº„Çπ„ÉªÂÆ§Â§ñ„É¶„Éã„ÉÉ„Éà„ÅÆÊ∏ÖÊéÉ„ÄÅ„Éï„Ç£„É´„Çø„Éº‰∫§Êèõ
                </div>
                <div class="step-item">
                    <strong>ÈõªÂ≠êÈÉ®ÂìÅ‰∫§Êèõ:</strong> „É™„É¢„Ç≥„É≥„ÉªÂèóÂÖâÈÉ®„ÉªÂü∫Êùø„ÅÆ‰∫§Êèõ„ÄÅÈõªÊ∫êÂõûË∑Ø„Éª„Éí„É•„Éº„Ç∫„Éª„É™„É¨„Éº„ÅÆ‰øÆÁêÜ
                </div>
                <div class="step-item">
                    <strong>Âãï‰Ωú„ÉÜ„Çπ„Éà:</strong> ÂÜ∑ÊàøÊ©üËÉΩ„ÅÆÁ¢∫Ë™ç„ÄÅÁï∞Èü≥„ÉÅ„Çß„ÉÉ„ÇØ„ÄÅÊ∞¥Êºè„ÇåÁ¢∫Ë™ç
                </div>
                <div class="step-item">
                    <strong>‰∫àÈò≤Á≠ñ:</strong> ÂÆöÊúüÁöÑ„Å™„Éí„É•„Éº„Ç∫„ÉªÈõªÂúß„ÉÅ„Çß„ÉÉ„ÇØ„ÄÅÂÜ∑Â™íÊºè„ÇåÁÇπÊ§ú
                </div>
            `;
        }

        // „Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÂèñÂæó
        function getAirconWarnings() {
            return `
                <div class="warning-item">
                    <strong>Ëªä‰∏°ÈõªÂúß„ÅÆÂÆâÂÖ®Á¢∫Ë™ç:</strong> 12VÈõªÂúß„ÅÆÁ¢∫Ë™ç„ÄÅ„Éê„ÉÉ„ÉÜ„É™„ÉºÁä∂ÊÖã„ÅÆÁÇπÊ§ú
                </div>
                <div class="warning-item">
                    <strong>ÂÜ∑Â™í„Éï„É≠„É≥È°ûÁÆ°ÁêÜ:</strong> Ê≥ïÂæãÈ†ÜÂÆà„ÄÅÈÅ©Âàá„Å™ÂõûÂèé„ÉªÂªÉÊ£ÑÂá¶ÁêÜ
                </div>
                <div class="warning-item">
                    <strong>È´òÊâÄ„ÉªËªäÂ§ñ‰ΩúÊ•≠ÊôÇ„ÅÆÂÆâÂÖ®Á¢∫‰øù:</strong> ÂÆ§Â§ñ„É¶„Éã„ÉÉ„Éà‰ΩúÊ•≠ÊôÇ„ÅÆÂÆâÂÖ®ÂØæÁ≠ñ
                </div>
                <div class="warning-item">
                    <strong>Â∞ÇÈñÄÊ•≠ËÄÖ‰ª•Â§ñ„Åß„ÅÆÂàÜËß£„ÉªÊîπÈÄ†Á¶ÅÊ≠¢:</strong> ÂÜ∑Â™íÁ≥ªÁµ±„ÅÆ‰ΩúÊ•≠„ÅØÂ∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å
                </div>
                <div class="warning-item">
                    <strong>ÈõªÊ∞óÁ≥ªÁµ±„ÉªÈ´òÊ∏©ÈÉ®„Å∏„ÅÆÊ≥®ÊÑè:</strong> ÊÑüÈõª„ÉªÁÅ´ÂÇ∑„ÅÆÂç±Èô∫ÊÄß
                </div>
                <div class="warning-item">
                    <strong>ÊèõÊ∞óÁ¢∫‰øù:</strong> ÂØÜÈñâÁ©∫Èñì„Åß„ÅÆ‰ΩúÊ•≠ÊôÇ„ÅØÂçÅÂàÜ„Å™ÊèõÊ∞ó„ÇíÁ¢∫‰øù
                </div>
                <div class="warning-item">
                    <strong>Â∑•ÂÖ∑„ÅÆÂèñ„ÇäÊâ±„ÅÑ:</strong> ÈõªÊ∞óÂ∑•ÂÖ∑„ÅÆÂÆâÂÖ®„Å™‰ΩøÁî®
                </div>
                <div class="warning-item">
                    <strong>ÈÉ®ÂìÅÁ¢∫Ë™ç:</strong> Á¥îÊ≠£ÈÉ®ÂìÅ„Åæ„Åü„ÅØÈÅ©ÂêàÈÉ®ÂìÅ„Çí‰ΩøÁî®
                </div>
            `;
        }

        // ÂÄãÂà•„ÅÆresult„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÂèñÂæó
        function getRepairStepsFromResult(result, query) {
            console.log('üîß getRepairStepsFromResult „Éá„Éê„ÉÉ„Ç∞:', {
                result: result,
                repair_steps: result.repair_steps,
                content: result.content ? result.content.substring(0, 100) + '...' : '„Å™„Åó',
                title: result.title,
                category: result.category,
                source: result.source
            });
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÊäΩÂá∫
            if (result.repair_steps && Array.isArray(result.repair_steps) && result.repair_steps.length > 0) {
                console.log('‚úÖ ÈÖçÂàóÂΩ¢Âºè„ÅÆ‰øÆÁêÜÊâãÈ†Ü„ÇíÁô∫Ë¶ã:', result.repair_steps.length, '‰ª∂');
                return result.repair_steps.map(step => `<div class="step-item">${step.trim()}</div>`).join('');
            } else if (result.repair_steps && typeof result.repair_steps === 'string' && result.repair_steps.trim()) {
                console.log('‚úÖ ÊñáÂ≠óÂàóÂΩ¢Âºè„ÅÆ‰øÆÁêÜÊâãÈ†Ü„ÇíÁô∫Ë¶ã');
                const stepLines = result.repair_steps.split('\n');
                return stepLines.map(line => line.trim()).filter(line => line).map(line => `<div class="step-item">${line}</div>`).join('');
            }
            
            // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            if (result.content && result.content.includes('‰øÆÁêÜÊâãÈ†Ü')) {
                console.log('‚úÖ „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÊäΩÂá∫‰∏≠...');
                const content = result.content;
                
                // Ë§áÊï∞„ÅÆ„Éë„Çø„Éº„É≥„Åß‰øÆÁêÜÊâãÈ†Ü„ÇíÊ§úÁ¥¢
                const patterns = [
                    /## ‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s,
                    /‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s,
                    /Ë©≥Á¥∞‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s
                ];
                
                for (const pattern of patterns) {
                    const stepSectionMatch = content.match(pattern);
                    if (stepSectionMatch) {
                        console.log('‚úÖ ‰øÆÁêÜÊâãÈ†Ü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁô∫Ë¶ã');
                        const stepSection = stepSectionMatch[1];
                        const stepLines = stepSection.split('\n');
                        return stepLines.map(line => line.trim()).filter(line => line && !line.startsWith('---')).map(line => `<div class="step-item">${line}</div>`).join('');
                    }
                }
            }
            
            console.log('‚ùå ‰øÆÁêÜÊâãÈ†Ü„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü');
            console.log('üîç Ë©≥Á¥∞„Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†±:');
            console.log('  - repair_stepsÂ≠òÂú®:', !!result.repair_steps);
            console.log('  - repair_stepsÂûã:', typeof result.repair_steps);
            console.log('  - contentÂ≠òÂú®:', !!result.content);
            console.log('  - content„Å´‰øÆÁêÜÊâãÈ†ÜÂê´„ÇÄ:', result.content ? result.content.includes('‰øÆÁêÜÊâãÈ†Ü') : false);
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„ÅÆ„ÇØ„Ç®„É™„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÊâãÈ†Ü„ÇíË°®Á§∫
            if (query && (query.includes('„Ç®„Ç¢„Ç≥„É≥') || query.includes('ÂÜ∑Êàø') || query.includes('ÊöñÊàø'))) {
                console.log('üîÑ „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊâãÈ†Ü„ÇíË°®Á§∫');
                return `
                    <div class="step-item">1. <strong>ÂïèÈ°åÁÆáÊâÄ„ÅÆÁâπÂÆö</strong> - ÂÜ∑È¢®„ÅÆÊúâÁÑ°„ÄÅ„Éï„Ç°„É≥„ÅÆÂãï‰ΩúÁ¢∫Ë™ç„ÄÅÈõªÊ∫ê„ÅÆON/OFF„ÄÅ„É™„É¢„Ç≥„É≥„ÅÆÊìç‰ΩúÂèØÂê¶</div>
                    <div class="step-item">2. <strong>ÂÆâÂÖ®Á¢∫Ë™ç„Å®Ê∫ñÂÇô</strong> - ‰ΩúÊ•≠Ââç„Å´ÂøÖ„Åö„Éñ„É¨„Éº„Ç´„Éº„ÇíËêΩ„Å®„Åô„ÄÅÈ´òÊâÄ‰ΩúÊ•≠„Åß„ÅØÂøÖ„ÅöÂÆâÂÖ®Â∏Ø„Çí‰ΩøÁî®„Åô„Çã</div>
                    <div class="step-item">3. <strong>ÈÉ®ÂìÅ„ÅÆ‰∫§Êèõ„Éª‰øÆÁêÜ</strong> - ÂÜ∑Â™í„Ç¨„ÇπË£úÂÖÖ„ÉªÁúüÁ©∫Âºï„Åç„ÄÅ„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº„ÉªÂü∫Êùø„Éª„Éï„Ç°„É≥„É¢„Éº„Çø„Éº„ÅÆ‰∫§Êèõ</div>
                    <div class="step-item">4. <strong>Âãï‰ΩúÁ¢∫Ë™ç</strong> - ÈõªÊ∫ê„ÇíÂÖ•„Çå„Å¶Ë©¶ÈÅãËª¢„Åó„ÄÅÂãï‰ΩúÁ¢∫Ë™ç„ÇíË°å„ÅÜ</div>
                    <div class="step-item">5. <strong>ÊúÄÁµÇ„ÉÅ„Çß„ÉÉ„ÇØ</strong> - „Ç¨„ÇπÊºè„ÇåÊ§úÁü•„ÇíÂøÖ„ÅöË°å„ÅÜ„ÄÅ„Éâ„É¨„É≥„Éõ„Éº„Çπ„ÅÆÂÇæÊñú„ÇíÈÅ©Âàá„Å´Âèñ„Çã</div>
                `;
            }
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: „Éà„Ç§„É¨Èñ¢ÈÄ£„ÅÆ„ÇØ„Ç®„É™„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÊâãÈ†Ü„ÇíË°®Á§∫
            if (query && isToiletRelatedQuery(query)) {
                console.log('üîÑ „Éà„Ç§„É¨Èñ¢ÈÄ£„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊâãÈ†Ü„ÇíË°®Á§∫');
                return `
                    <div class="step-item">1. <strong>ÂïèÈ°åÁÆáÊâÄ„ÅÆÁâπÂÆö</strong> - Ê∞¥Êºè„ÇåÔºö„Çø„É≥„ÇØ„ÉªÈÖçÁÆ°„Éª„Éê„É´„ÉñÊé•Á∂öÈÉ®„Åã„Çâ„ÅÆÊ∞¥Êºè„Çå„ÇíÁ¢∫Ë™ç„ÄÅË©∞„Åæ„ÇäÔºöÊéíÊ∞¥„ÅåÊµÅ„Çå„Å™„ÅÑ„ÄÅÁï∞Áâ©Ê∑∑ÂÖ•„ÅÆÊúâÁÑ°„ÇíÁÇπÊ§ú</div>
                    <div class="step-item">2. <strong>ÂÆâÂÖ®Á¢∫Ë™ç„Å®Ê∫ñÂÇô</strong> - ‰ΩúÊ•≠Ââç„Å´ÂøÖ„ÅöÁµ¶Ê∞¥„Éù„É≥„Éó„ÅÆÈõªÊ∫ê„ÇíOFF„Å´„Åô„Çã„ÄÅÊ±öÊ∞¥„Çø„É≥„ÇØ„ÅØ„Ç¥„É†ÊâãË¢ã„Éª„Éû„Çπ„ÇØ„ÇíÁùÄÁî®„Åó„Å¶Âèñ„ÇäÂ§ñ„Åô</div>
                    <div class="step-item">3. <strong>ÈÉ®ÂìÅ„ÅÆ‰∫§Êèõ„Éª‰øÆÁêÜ</strong> - Ê∞¥Êºè„Çå‰øÆÁêÜÔºöO„É™„É≥„Ç∞„Éª„Ç∑„Éº„É´„Çí‰∫§Êèõ„Åó„ÄÅÊé•Á∂öÈÉ®„Å´„Ç∑„É™„Ç≥„É≥„Ç∞„É™„Çπ„ÇíÂ°óÂ∏É„ÄÅË©∞„Åæ„ÇäÈô§ÂéªÔºö„É©„Éê„Éº„Ç´„ÉÉ„Éó„ÄÅÂ∞ÇÁî®„ÇØ„É™„Éº„Éä„Éº„ÅßË©∞„Åæ„Çä„ÇíËß£Ê∂à</div>
                    <div class="step-item">4. <strong>Âãï‰ΩúÁ¢∫Ë™ç</strong> - Áµ¶Ê∞¥„Éù„É≥„Éó„ÇíON„Å´„Åó„Å¶Ê∞¥„ÅÆÊµÅ„Çå„ÇíÁ¢∫Ë™ç„ÄÅ„É¨„Éê„ÉºÊìç‰Ωú„Åß„Éï„É©„ÉÉ„Éó„Åå„Çπ„É†„Éº„Ç∫„Å´ÈñãÈñâ„Åô„Çã„ÅãÁ¢∫Ë™ç</div>
                    <div class="step-item">5. <strong>ÊúÄÁµÇ„ÉÅ„Çß„ÉÉ„ÇØ</strong> - „Çø„É≥„ÇØ„ÅÆÂõ∫ÂÆöÁä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åó„ÄÅËµ∞Ë°å‰∏≠„Å´Êè∫„Çå„ÅßÂ§ñ„Çå„Å™„ÅÑ„ÅãÁÇπÊ§ú„ÄÅ‰æøÂ∫ßÂë®Âõ≤„ÉªÈÖçÁÆ°Êé•Á∂öÈÉ®„ÅÆÊ∞¥Êºè„Çå„Åå„Å™„ÅÑ„ÅãÁ¢∫Ë™ç</div>
                `;
            }
            
            return '<div class="no-steps">‰øÆÁêÜÊâãÈ†Ü„ÅÆÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        }

        // ÂÄãÂà•„ÅÆresult„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÂèñÂæó
        function getWarningsFromResult(result, query) {
            console.log('‚ö†Ô∏è getWarningsFromResult „Éá„Éê„ÉÉ„Ç∞:', {
                result: result,
                warnings: result.warnings,
                content: result.content ? result.content.substring(0, 100) + '...' : '„Å™„Åó',
                title: result.title,
                category: result.category,
                source: result.source
            });
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊäΩÂá∫
            if (result.warnings && Array.isArray(result.warnings) && result.warnings.length > 0) {
                console.log('‚úÖ ÈÖçÂàóÂΩ¢Âºè„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÁô∫Ë¶ã:', result.warnings.length, '‰ª∂');
                return result.warnings.map(warning => `<div class="warning-item">${warning.trim()}</div>`).join('');
            } else if (result.warnings && typeof result.warnings === 'string' && result.warnings.trim()) {
                console.log('‚úÖ ÊñáÂ≠óÂàóÂΩ¢Âºè„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÁô∫Ë¶ã');
                const warningLines = result.warnings.split('\n');
                return warningLines.map(line => line.trim()).filter(line => line).map(line => `<div class="warning-item">${line}</div>`).join('');
            }
            
            // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            if (result.content && result.content.includes('Ê≥®ÊÑè‰∫ãÈ†Ö')) {
                console.log('‚úÖ „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊäΩÂá∫‰∏≠...');
                const content = result.content;
                
                // Ë§áÊï∞„ÅÆ„Éë„Çø„Éº„É≥„ÅßÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊ§úÁ¥¢
                const patterns = [
                    /## Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                    /‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                    /Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                    /ÂÆâÂÖ®‰∏ä„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s
                ];
                
                for (const pattern of patterns) {
                    const warningSectionMatch = content.match(pattern);
                    if (warningSectionMatch) {
                        console.log('‚úÖ Ê≥®ÊÑè‰∫ãÈ†Ö„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁô∫Ë¶ã');
                        const warningSection = warningSectionMatch[1];
                        const warningLines = warningSection.split('\n');
                        return warningLines.map(line => line.trim()).filter(line => line && !line.startsWith('---')).map(line => `<div class="warning-item">${line}</div>`).join('');
                    }
                }
            }
            
            console.log('‚ùå Ê≥®ÊÑè‰∫ãÈ†Ö„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü');
            console.log('üîç Ë©≥Á¥∞„Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†±:');
            console.log('  - warningsÂ≠òÂú®:', !!result.warnings);
            console.log('  - warningsÂûã:', typeof result.warnings);
            console.log('  - contentÂ≠òÂú®:', !!result.content);
            console.log('  - content„Å´Ê≥®ÊÑè‰∫ãÈ†ÖÂê´„ÇÄ:', result.content ? result.content.includes('Ê≥®ÊÑè‰∫ãÈ†Ö') : false);
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„ÅÆ„ÇØ„Ç®„É™„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíË°®Á§∫
            if (query && (query.includes('„Ç®„Ç¢„Ç≥„É≥') || query.includes('ÂÜ∑Êàø') || query.includes('ÊöñÊàø'))) {
                console.log('üîÑ „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíË°®Á§∫');
                return `
                    <div class="warning-item">‚ö†Ô∏è <strong>ÂÆâÂÖ®Á¨¨‰∏Ä„Åß‰ΩúÊ•≠„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ</strong></div>
                    <div class="warning-item">- Â∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á</div>
                    <div class="warning-item">- Â∑•ÂÖ∑„ÅÆÂèñ„ÇäÊâ±„ÅÑ„Å´„ÅØÂçÅÂàÜÊ≥®ÊÑè</div>
                    <div class="warning-item">- Ëªä‰∏°ÈõªÂúß„ÅÆÂÆâÂÖ®Á¢∫Ë™ç</div>
                    <div class="warning-item">- ÂÜ∑Â™í„Éï„É≠„É≥È°ûÁÆ°ÁêÜÔºàÊ≥ïÂæãÈ†ÜÂÆàÔºâ</div>
                    <div class="warning-item">- È´òÊâÄ„ÉªËªäÂ§ñ‰ΩúÊ•≠ÊôÇ„ÅÆÂÆâÂÖ®Á¢∫‰øù</div>
                    <div class="warning-item">- Â∞ÇÈñÄÊ•≠ËÄÖ‰ª•Â§ñ„Åß„ÅÆÂàÜËß£„ÉªÊîπÈÄ†Á¶ÅÊ≠¢</div>
                    <div class="warning-item">- ÈõªÊ∞óÁ≥ªÁµ±„ÉªÈ´òÊ∏©ÈÉ®„Å∏„ÅÆÊ≥®ÊÑè</div>
                `;
            }
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: „Éà„Ç§„É¨Èñ¢ÈÄ£„ÅÆ„ÇØ„Ç®„É™„ÅÆÂ†¥Âêà„ÅØ„Éá„Éï„Ç©„É´„ÉàÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíË°®Á§∫
            if (query && isToiletRelatedQuery(query)) {
                console.log('üîÑ „Éà„Ç§„É¨Èñ¢ÈÄ£„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíË°®Á§∫');
                return `
                    <div class="warning-item">‚ö†Ô∏è <strong>ÂÆâÂÖ®Á¨¨‰∏Ä„Åß‰ΩúÊ•≠„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ</strong></div>
                    <div class="warning-item">- Â∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á</div>
                    <div class="warning-item">- ÂøÖ„ÅöÈõªÊ∫êOFF„ÉªÊ∞¥Ê†ìÈñâÈéñ„ÅÆÁä∂ÊÖã„Åß‰ΩúÊ•≠</div>
                    <div class="warning-item">- ÊéíÊ∞¥„ÉªÊ∏ÖÊéÉÊôÇ„ÅØÂøÖ„Åö„Ç¥„É†ÊâãË¢ã„Éª„Éû„Çπ„ÇØ„ÇíÁùÄÁî®</div>
                    <div class="warning-item">- Ê±öÊ∞¥„Çø„É≥„ÇØ„ÅØÂøÖ„ÅöÂ∞ÇÁî®„ÅÆÂá¶ÁêÜÂ†¥„ÅßÂªÉÊ£ÑÔºà‰∏ÄËà¨‰∏ãÊ∞¥ÈÅìÁ¶ÅÊ≠¢„ÅÆÂ†¥Âêà„ÅÇ„ÇäÔºâ</div>
                    <div class="warning-item">- Âº∑„ÅÑËñ¨Ââ§„ÇÑ„Ç∑„É≥„Éä„Éº„Åß„ÅÆÊ∏ÖÊéÉ„ÅØÊ®πËÑÇÈÉ®ÂìÅ„ÇíÂä£Âåñ„Åï„Åõ„Çã„Åü„ÇÅ‰ΩøÁî®Á¶ÅÊ≠¢</div>
                    <div class="warning-item">- „Éï„É©„ÉÉ„Éó„Éª„Ç∑„Éº„É´ÈÉ®ÂàÜ„Å´„ÅØÂøÖ„Åö„Ç∑„É™„Ç≥„É≥„Ç∞„É™„Çπ„Çí‰ΩøÁî®„Åó„ÄÅÁü≥Ê≤πÁ≥ªÊΩ§ÊªëÂâ§„ÅØÂé≥Á¶Å</div>
                    <div class="warning-item">- ÊºèÈõª„ÇÑÊ∞¥Êºè„Çå„ÅåÂ§ß„Åç„ÅÑÂ†¥Âêà„ÅØÁõ¥„Å°„Å´‰ΩøÁî®„Çí‰∏≠Ê≠¢„Åó„ÄÅÂ∞ÇÈñÄÊ•≠ËÄÖ„Å∏Áõ∏Ë´á</div>
                `;
            }
            
            return '<div class="no-warnings">Ê≥®ÊÑè‰∫ãÈ†Ö„ÅÆÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        }

        // ‰øÆÁêÜÊâãÈ†Ü„ÇíÂèñÂæóÔºàÊîπËâØÁâàÔºâ
        function getRepairSteps(results, query) {
            const steps = [];
            
            // „Éá„Éê„ÉÉ„Ç∞Áî®„É≠„Ç∞
            console.log('üîß getRepairSteps „Éá„Éê„ÉÉ„Ç∞:', {
                results: results,
                results_length: Array.isArray(results) ? results.length : 'not array'
            });
            
            // resultsÈÖçÂàó„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÊäΩÂá∫
            if (Array.isArray(results)) {
                results.forEach(result => {
                    console.log('üîç Âá¶ÁêÜ‰∏≠„ÅÆÁµêÊûú:', {
                        title: result.title,
                        category: result.category,
                        repair_steps: result.repair_steps,
                        content: result.content ? result.content.substring(0, 100) + '...' : '„Å™„Åó'
                    });
                    
                    // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÊäΩÂá∫
                    if (result.repair_steps && Array.isArray(result.repair_steps)) {
                        console.log('‚úÖ ÈÖçÂàóÂΩ¢Âºè„ÅÆ‰øÆÁêÜÊâãÈ†Ü„ÇíÁô∫Ë¶ã:', result.repair_steps.length, '‰ª∂');
                        result.repair_steps.forEach(step => {
                            if (step.trim()) {
                                steps.push(`<div class="step-item">${step.trim()}</div>`);
                            }
                        });
                    } else if (result.repair_steps && typeof result.repair_steps === 'string') {
                        console.log('‚úÖ ÊñáÂ≠óÂàóÂΩ¢Âºè„ÅÆ‰øÆÁêÜÊâãÈ†Ü„ÇíÁô∫Ë¶ã');
                        const stepLines = result.repair_steps.split('\n');
                        stepLines.forEach(line => {
                            if (line.trim()) {
                                steps.push(`<div class="step-item">${line.trim()}</div>`);
                            }
                        });
                    }
                    
                    // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫ÔºàÊîπËâØÁâàÔºâ
                    if (result.content && result.content.includes('‰øÆÁêÜÊâãÈ†Ü')) {
                        console.log('‚úÖ „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ‰øÆÁêÜÊâãÈ†Ü„ÇíÊäΩÂá∫‰∏≠...');
                        const content = result.content;
                        
                        // Ë§áÊï∞„ÅÆ„Éë„Çø„Éº„É≥„Åß‰øÆÁêÜÊâãÈ†Ü„ÇíÊ§úÁ¥¢
                        const patterns = [
                            /## ‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s,
                            /‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s,
                            /Ë©≥Á¥∞‰øÆÁêÜÊâãÈ†Ü\s*\n(.*?)(?=\n##|\n‚ö†Ô∏è|\n\*\*|$)/s
                        ];
                        
                        for (const pattern of patterns) {
                            const stepSectionMatch = content.match(pattern);
                            if (stepSectionMatch) {
                                console.log('‚úÖ ‰øÆÁêÜÊâãÈ†Ü„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁô∫Ë¶ã');
                                const stepSection = stepSectionMatch[1];
                                const stepLines = stepSection.split('\n');
                                stepLines.forEach(line => {
                                    if (line.trim() && !line.startsWith('---')) {
                                        steps.push(`<div class="step-item">${line.trim()}</div>`);
                                    }
                                });
                                break;
                            }
                        }
                    }
                });
            }
            
            // ÈáçË§á„ÇíÈô§Âéª
            const uniqueSteps = [...new Set(steps)];
            
            console.log('üîß ÊäΩÂá∫„Åï„Çå„Åü‰øÆÁêÜÊâãÈ†Ü:', uniqueSteps.length, '‰ª∂');
            if (uniqueSteps.length > 0) {
                console.log('üîß ‰øÆÁêÜÊâãÈ†Ü„ÅÆÂÜÖÂÆπ:', uniqueSteps);
            }
            
            return uniqueSteps.length > 0 ? uniqueSteps.join('') : '<div class="no-steps">‰øÆÁêÜÊâãÈ†Ü„ÅÆÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        }

        // Ê≥®ÊÑè‰∫ãÈ†Ö„ÇíÂèñÂæóÔºàÊîπËâØÁâàÔºâ
        function getWarnings(results, query) {
            const warnings = [];
            
            // „Éá„Éê„ÉÉ„Ç∞Áî®„É≠„Ç∞
            console.log('‚ö†Ô∏è getWarnings „Éá„Éê„ÉÉ„Ç∞:', {
                results: results,
                results_length: Array.isArray(results) ? results.length : 'not array'
            });
            
            // resultsÈÖçÂàó„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊäΩÂá∫
            if (Array.isArray(results)) {
                results.forEach(result => {
                    console.log('üîç Âá¶ÁêÜ‰∏≠„ÅÆÁµêÊûúÔºàÊ≥®ÊÑè‰∫ãÈ†ÖÔºâ:', {
                        title: result.title,
                        category: result.category,
                        warnings: result.warnings,
                        content: result.content ? result.content.substring(0, 100) + '...' : '„Å™„Åó'
                    });
                    
                    // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊäΩÂá∫
                    if (result.warnings && Array.isArray(result.warnings)) {
                        console.log('‚úÖ ÈÖçÂàóÂΩ¢Âºè„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÁô∫Ë¶ã:', result.warnings.length, '‰ª∂');
                        result.warnings.forEach(warning => {
                            if (warning.trim()) {
                                warnings.push(`<div class="warning-item">${warning.trim()}</div>`);
                            }
                        });
                    } else if (result.warnings && typeof result.warnings === 'string') {
                        console.log('‚úÖ ÊñáÂ≠óÂàóÂΩ¢Âºè„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÁô∫Ë¶ã');
                        const warningLines = result.warnings.split('\n');
                        warningLines.forEach(line => {
                            if (line.trim()) {
                                warnings.push(`<div class="warning-item">${line.trim()}</div>`);
                            }
                        });
                    }
                    
                    // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫ÔºàÊîπËâØÁâàÔºâ
                    if (result.content && result.content.includes('Ê≥®ÊÑè‰∫ãÈ†Ö')) {
                        console.log('‚úÖ „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊäΩÂá∫‰∏≠...');
                        const content = result.content;
                        
                        // Ë§áÊï∞„ÅÆ„Éë„Çø„Éº„É≥„ÅßÊ≥®ÊÑè‰∫ãÈ†Ö„ÇíÊ§úÁ¥¢
                        const patterns = [
                            /## Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                            /‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                            /Ê≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s,
                            /ÂÆâÂÖ®‰∏ä„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö\s*\n(.*?)(?=\n##|\n\*\*|$)/s
                        ];
                        
                        for (const pattern of patterns) {
                            const warningSectionMatch = content.match(pattern);
                            if (warningSectionMatch) {
                                console.log('‚úÖ Ê≥®ÊÑè‰∫ãÈ†Ö„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁô∫Ë¶ã');
                                const warningSection = warningSectionMatch[1];
                                const warningLines = warningSection.split('\n');
                                warningLines.forEach(line => {
                                    if (line.trim() && !line.startsWith('---')) {
                                        warnings.push(`<div class="warning-item">${line.trim()}</div>`);
                                    }
                                });
                                break;
                            }
                        }
                    }
                });
            }
            
            // ÈáçË§á„ÇíÈô§Âéª
            const uniqueWarnings = [...new Set(warnings)];
            
            console.log('‚ö†Ô∏è ÊäΩÂá∫„Åï„Çå„ÅüÊ≥®ÊÑè‰∫ãÈ†Ö:', uniqueWarnings.length, '‰ª∂');
            if (uniqueWarnings.length > 0) {
                console.log('‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö„ÅÆÂÜÖÂÆπ:', uniqueWarnings);
            }
            
            return uniqueWarnings.length > 0 ? uniqueWarnings.join('') : '<div class="no-warnings">Ê≥®ÊÑè‰∫ãÈ†Ö„ÅÆÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        }

        // ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ„ÇíÂèñÂæó
        function getRepairCosts(result, query) {
            const costs = [];
            
            // Ë©≥Á¥∞„Éá„Éê„ÉÉ„Ç∞Áî®„É≠„Ç∞
            console.log('üîç getRepairCosts Ë©≥Á¥∞„Éá„Éê„ÉÉ„Ç∞:');
            console.log('  - result:', result);
            console.log('  - result.repair_costs:', result.repair_costs);
            console.log('  - result.costs:', result.costs);
            console.log('  - result.category:', result.category);
            console.log('  - typeof result.costs:', typeof result.costs);
            console.log('  - Array.isArray(result.costs):', Array.isArray(result.costs));
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„Çâ‰øÆÁêÜË≤ªÁî®„ÇíÊäΩÂá∫
            if (result.repair_costs) {
                const costLines = result.repair_costs.split('\n');
                costLines.forEach(line => {
                    if (line.trim() && line.includes('ÂÜÜ')) {
                        costs.push(`<div class="cost-item">${line.trim()}</div>`);
                    }
                });
            }
            
            // ÂæìÊù•„ÅÆcosts„Éï„Ç£„Éº„É´„Éâ„Åã„Çâ„ÇÇÊäΩÂá∫ÔºàÈÖçÂàó„Å®ÊñáÂ≠óÂàó„ÅÆ‰∏°Êñπ„Å´ÂØæÂøúÔºâ
            if (result.costs) {
                console.log('üí∞ costs„Éï„Ç£„Éº„É´„Éâ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü:', result.costs);
                if (Array.isArray(result.costs)) {
                    console.log('üí∞ ÈÖçÂàó„Å®„Åó„Å¶Âá¶ÁêÜ„Åó„Åæ„Åô');
                    // ÈÖçÂàó„ÅÆÂ†¥Âêà
                    result.costs.forEach((cost, index) => {
                        console.log(`  [${index}] Ë≤ªÁî®È†ÖÁõÆ:`, cost);
                        if (cost && cost.includes('ÂÜÜ')) {
                            const costHtml = `<div class="cost-item">${cost}</div>`;
                            costs.push(costHtml);
                            console.log('  ‚úÖ Ë≤ªÁî®È†ÖÁõÆ„ÇíËøΩÂä†:', costHtml);
                        }
                    });
                } else {
                    console.log('üí∞ ÊñáÂ≠óÂàó„Å®„Åó„Å¶Âá¶ÁêÜ„Åó„Åæ„Åô');
                    // ÊñáÂ≠óÂàó„ÅÆÂ†¥Âêà
                    const costLines = result.costs.split('\n');
                    costLines.forEach((line, index) => {
                        console.log(`  [${index}] Ë°å:`, line);
                        if (line.trim() && line.includes('ÂÜÜ')) {
                            const costHtml = `<div class="cost-item">${line.trim()}</div>`;
                            costs.push(costHtml);
                            console.log('  ‚úÖ Ë≤ªÁî®È†ÖÁõÆ„ÇíËøΩÂä†:', costHtml);
                        }
                    });
                }
            } else {
                console.log('üí∞ costs„Éï„Ç£„Éº„É´„Éâ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
            }
            
            // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            if (result.content && result.content.includes('‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ')) {
                const content = result.content;
                const costSectionMatch = content.match(/## ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ\s*\n(.*?)(?=\n##|\n\*\*|$)/s);
                if (costSectionMatch) {
                    const costSection = costSectionMatch[1];
                    const costLines = costSection.split('\n');
                    costLines.forEach(line => {
                        if (line.trim() && line.includes('ÂÜÜ')) {
                            costs.push(`<div class="cost-item">${line.trim()}</div>`);
                        }
                    });
                }
            }
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„Çâ„ÇÇÊäΩÂá∫
            if (result.structured_content && result.structured_content.repair_costs) {
                result.structured_content.repair_costs.forEach(cost => {
                    costs.push(`<div class="cost-item">‚Ä¢ ${cost}</div>`);
                });
            }
            
            // ÈáçË§á„ÇíÈô§Âéª
            const uniqueCosts = [...new Set(costs)];
            
            console.log('üí∞ ÊäΩÂá∫„Åï„Çå„Åü‰øÆÁêÜË≤ªÁî®:', uniqueCosts.length, '‰ª∂');
            
            // Ë≤ªÁî®ÊÉÖÂ†±„ÅåÂÖ®„Åè„Å™„ÅÑÂ†¥Âêà„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
            if (uniqueCosts.length === 0) {
                console.log('üí∞ Ë≤ªÁî®ÊÉÖÂ†±„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÂá¶ÁêÜ„ÇíÂÆüË°å');
                console.log('üí∞ „Ç´„ÉÜ„Ç¥„É™:', result.category);
                
                // „Ç´„ÉÜ„Ç¥„É™„Å´Âü∫„Å•„Åè„Éá„Éï„Ç©„É´„ÉàË≤ªÁî®ÊÉÖÂ†±
                if (result.category === '„Éê„ÉÉ„ÉÜ„É™„Éº') {
                    console.log('üí∞ „Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆ„Éá„Éï„Ç©„É´„ÉàË≤ªÁî®„ÇíËøî„Åó„Åæ„Åô');
                    return `<div class="cost-item">„Éê„ÉÉ„ÉÜ„É™„Éº‰∫§Êèõ: 15,000-30,000ÂÜÜ</div>
                           <div class="cost-item">Á´ØÂ≠êÊ∏ÖÊéÉ: ÁÑ°ÊñôÔºàËá™ÂàÜ„Åß‰ΩúÊ•≠Ôºâ</div>
                           <div class="cost-item">ÂÖÖÈõªÂô®‰∫§Êèõ: 5,000-15,000ÂÜÜ</div>`;
                } else if (result.category === '„Éà„Ç§„É¨') {
                    console.log('üí∞ „Éà„Ç§„É¨„ÅÆ„Éá„Éï„Ç©„É´„ÉàË≤ªÁî®„ÇíËøî„Åó„Åæ„Åô');
                    return `<div class="cost-item">„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ‰∫§Êèõ: 8,000-15,000ÂÜÜ</div>
                           <div class="cost-item">„Éë„ÉÉ„Ç≠„É≥‰∫§Êèõ: 2,000-5,000ÂÜÜ</div>
                           <div class="cost-item">„Éê„É´„Éñ‰∫§Êèõ: 5,000-10,000ÂÜÜ</div>`;
                } else if (result.category === '„Ç®„Ç¢„Ç≥„É≥') {
                    console.log('üí∞ „Ç®„Ç¢„Ç≥„É≥„ÅÆ„Éá„Éï„Ç©„É´„ÉàË≤ªÁî®„ÇíËøî„Åó„Åæ„Åô');
                    return `<div class="cost-item">„Éï„Ç£„É´„Çø„Éº‰∫§Êèõ: 3,000-8,000ÂÜÜ</div>
                           <div class="cost-item">ÂÜ∑Â™í„Ç¨„ÇπË£úÂÖÖ: 10,000-20,000ÂÜÜ</div>
                           <div class="cost-item">„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº‰∫§Êèõ: 50,000-100,000ÂÜÜ</div>`;
                } else if (result.category === 'Èõ®Êºè„Çä') {
                    console.log('üí∞ Èõ®Êºè„Çä„ÅÆ„Éá„Éï„Ç©„É´„ÉàË≤ªÁî®„ÇíËøî„Åó„Åæ„Åô');
                    return `<div class="cost-item">„Ç∑„Éº„É™„É≥„Ç∞Êùê: 1,000-3,000ÂÜÜ</div>
                           <div class="cost-item">Èò≤Ê∞¥„ÉÜ„Éº„Éó: 2,000-5,000ÂÜÜ</div>
                           <div class="cost-item">Â∞ÇÈñÄÊ•≠ËÄÖ‰øÆÁêÜ: 20,000-50,000ÂÜÜ</div>`;
                } else {
                    console.log('üí∞ „Ç´„ÉÜ„Ç¥„É™„Åå‰∏çÊòé„Å™„Åü„ÇÅ„ÄÅ‰∏ÄËà¨ÁöÑ„Å™„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøî„Åó„Åæ„Åô');
                    return '<div class="no-costs">‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ„ÅÆÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÂ∞ÇÈñÄÊ•≠ËÄÖ„Å´„ÅîÁõ∏Ë´á„Åè„Å†„Åï„ÅÑ„ÄÇ</div>';
                }
            }
            
            return uniqueCosts.join('');
        }

        // ÂøÖË¶Å„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ„ÇíÂèñÂæóÔºàÊîπÂñÑÁâà - „Ç®„Ç¢„Ç≥„É≥ÂØæÂøúÔºâ
        function getToolsAndParts(result, query) {
            const tools = [];
            
            // ÊßãÈÄ†Âåñ„Åï„Çå„Åü„Éá„Éº„Çø„Åã„ÇâÂ∑•ÂÖ∑„ÇíÊäΩÂá∫
            if (result.structured_content && result.structured_content.tools_needed) {
                result.structured_content.tools_needed.forEach(tool => {
                    tools.push(`<div class="tool-item">‚Ä¢ ${tool}</div>`);
                });
            }
            
            // Êé®Â•®Ë£ΩÂìÅ„Åã„ÇâÂ∑•ÂÖ∑„ÇíÊäΩÂá∫
            if (result.recommended_products && result.recommended_products.items) {
                result.recommended_products.items.forEach(product => {
                    tools.push(`<div class="tool-item">‚Ä¢ ${product}</div>`);
                });
            }
            
            // „Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®„ÅÆÂ∑•ÂÖ∑„ÉªÈÉ®ÂìÅÊÉÖÂ†±ÊäΩÂá∫
            if (result.content && result.content.includes('„Ç®„Ç¢„Ç≥„É≥')) {
                const content = result.content;
                
                // „Ç®„Ç¢„Ç≥„É≥ÁâπÊúâ„ÅÆÂ∑•ÂÖ∑„ÉªÈÉ®ÂìÅ
                if (content.includes('ÈõªÂúßË®à')) {
                    tools.push('<div class="tool-item">‚Ä¢ ÈõªÂúßË®àÔºà12VÊ∏¨ÂÆöÁî®Ôºâ</div>');
                }
                if (content.includes('„Éâ„É©„Ç§„Éê„Éº')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Éâ„É©„Ç§„Éê„Éº„Çª„ÉÉ„Éà</div>');
                }
                if (content.includes('„Éí„É•„Éº„Ç∫')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Éí„É•„Éº„Ç∫È°ûÔºàÂêÑÁ®ÆÂÆπÈáèÔºâ</div>');
                }
                if (content.includes('ÂÜ∑Â™í„Ç¨„Çπ')) {
                    tools.push('<div class="tool-item">‚Ä¢ ÂÜ∑Â™í„Ç¨„ÇπÁº∂„Éª„ÉÅ„É£„Éº„Ç∏„ÉÑ„Éº„É´</div>');
                }
                if (content.includes('„Ç∑„Éº„É™„É≥„Ç∞Êùê')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Ç∑„Éº„É™„É≥„Ç∞Êùê„Éª„Éë„ÉÉ„Ç≠„É≥È°û</div>');
                }
                if (content.includes('Ê∏ÖÊéÉÁî®ÂÖ∑')) {
                    tools.push('<div class="tool-item">‚Ä¢ Ê∏ÖÊéÉÁî®ÂÖ∑Ôºà„Éñ„É©„Ç∑Á≠âÔºâ</div>');
                }
                
                // „Ç®„Ç¢„Ç≥„É≥ÁâπÊúâ„ÅÆÈÉ®ÂìÅ
                if (content.includes('„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„ÉºÈÉ®ÂìÅ</div>');
                }
                if (content.includes('„Éï„Ç°„É≥„É¢„Éº„Çø„Éº')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Éï„Ç°„É≥„É¢„Éº„Çø„ÉºÈÉ®ÂìÅ</div>');
                }
                if (content.includes('„É™„É¢„Ç≥„É≥')) {
                    tools.push('<div class="tool-item">‚Ä¢ „É™„É¢„Ç≥„É≥„ÉªÂèóÂÖâÈÉ®</div>');
                }
                if (content.includes('„Éâ„É¨„É≥„Éõ„Éº„Çπ')) {
                    tools.push('<div class="tool-item">‚Ä¢ „Éâ„É¨„É≥„Éõ„Éº„Çπ„Éª„Éâ„É¨„É≥„Éë„É≥</div>');
                }
                if (content.includes('Ê∏©Â∫¶„Çª„É≥„Çµ„Éº')) {
                    tools.push('<div class="tool-item">‚Ä¢ Ê∏©Â∫¶„Çª„É≥„Çµ„Éº</div>');
                }
                if (content.includes('Âà∂Âæ°Âü∫Êùø')) {
                    tools.push('<div class="tool-item">‚Ä¢ Âà∂Âæ°Âü∫Êùø„ÉªÈõªÂ≠êÈÉ®ÂìÅ</div>');
                }
            }
            
            // ‰∏ÄËà¨ÁöÑ„Å™„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åã„ÇâÂ∑•ÂÖ∑ÊÉÖÂ†±„ÇíÊäΩÂá∫
            if (result.content && !result.content.includes('„Ç®„Ç¢„Ç≥„É≥')) {
                const content = result.content;
                const toolKeywords = ['„É¨„É≥„ÉÅ', '„Éâ„É©„Ç§„Éê„Éº', '„Çπ„Éë„Éä', '„É°„Éº„Çø„Éº', '„ÉÜ„Çπ„Çø„Éº', 'Â∑•ÂÖ∑', 'ÈÉ®ÂìÅ'];
                toolKeywords.forEach(keyword => {
                    if (content.includes(keyword)) {
                        tools.push(`<div class="tool-item">‚Ä¢ ${keyword}Èñ¢ÈÄ£</div>`);
                    }
                });
            }
            
            if (tools.length === 0) {
                tools.push('<div class="tool-item">‚Ä¢ Âü∫Êú¨ÁöÑ„Å™Â∑•ÂÖ∑„Çª„ÉÉ„Éà</div>');
            }
            
            return tools.join('');
        }

        // „É¢„ÉÉ„ÇØ„Éá„Éº„ÇøÔºàAPI„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºâ
        function getMockResults(query) {
            console.log('üìã „É¢„ÉÉ„ÇØ„Éá„Éº„ÇøÁîüÊàê‰∏≠:', query);
            
            const mockResults = [
                {
                    title: "„Éê„ÉÉ„ÉÜ„É™„Éº‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„Çπ",
                    category: "„Éê„ÉÉ„ÉÜ„É™„Éº",
                    filename: "„Éê„ÉÉ„ÉÜ„É™„Éº.txt",
                    content: "„Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆÂØøÂëΩ„ÅØÈÄöÂ∏∏2-3Âπ¥„Åß„Åô„ÄÇÂÆöÊúüÁöÑ„Å™ÁÇπÊ§ú„Å®ÈÅ©Âàá„Å™ÂÖÖÈõªÁÆ°ÁêÜ„ÅåÈáçË¶Å„Åß„Åô„ÄÇÈõªÂúß„ÉÅ„Çß„ÉÉ„ÇØÔºà12.6V‰ª•‰∏ä„ÅåÊ≠£Â∏∏Ôºâ„Å®Á´ØÂ≠ê„ÅÆÊ∏ÖÊéÉ„ÇíÂÆöÊúüÁöÑ„Å´Ë°å„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                    costs: ["15,000ÂÜÜ", "25,000ÂÜÜ", "35,000ÂÜÜ"],
                    alternatives: ["„Äê„Éê„ÉÉ„ÉÜ„É™„ÉºAÂûã„Äë", "„Äê„Éê„ÉÉ„ÉÜ„É™„ÉºBÂûã„Äë", "„Äê„Éê„ÉÉ„ÉÜ„É™„ÉºCÂûã„Äë"],
                    urls: ["https://example.com/battery1", "https://example.com/battery2"],
                    summary: "„Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆÂü∫Êú¨ÁöÑ„Å™„É°„É≥„ÉÜ„Éä„É≥„Çπ„Å®‰∫§Êèõ„Å´„Å§„ÅÑ„Å¶",
                    structured_content: {
                        problem_description: "„Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆË™øÂ≠ê„ÅåÊÇ™„ÅÑ„ÄÅ„Ç®„É≥„Ç∏„É≥„Åå„Åã„Åã„Çâ„Å™„ÅÑ„ÄÅÈõªÂúß„Åå‰Ωé„ÅÑ„Å™„Å©„ÅÆÁóáÁä∂",
                        causes: ["„Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆÂØøÂëΩ", "Á´ØÂ≠ê„ÅÆËÖêÈ£ü", "ÂÖÖÈõª‰∏çË∂≥", "ÈÅéÊîæÈõª"],
                        solutions: ["Á´ØÂ≠ê„ÅÆÊ∏ÖÊéÉ", "ÂÖÖÈõªÂô®„Åß„ÅÆÂÖÖÈõª", "„Éê„ÉÉ„ÉÜ„É™„Éº„ÅÆ‰∫§Êèõ", "ÂÖÖÈõª„Ç∑„Çπ„ÉÜ„É†„ÅÆÁÇπÊ§ú"],
                        tools_needed: ["„Éû„É´„ÉÅ„É°„Éº„Çø„Éº", "Á´ØÂ≠ê„Éñ„É©„Ç∑", "ÂÖÖÈõªÂô®", "„É¨„É≥„ÉÅ„Çª„ÉÉ„Éà"]
                    },
                    warnings: ["„Éê„ÉÉ„ÉÜ„É™„ÉºÊ∂≤„ÅØÂç±Èô∫„Åß„Åô", "ÂÖÖÈõª‰∏≠„ÅØÊèõÊ∞ó„ÇíÂçÅÂàÜ„Å´", "Â∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á"],
                    repair_costs: {
                        summary: "15,000ÂÜÜÔΩû35,000ÂÜÜ",
                        items: ["„Éê„ÉÉ„ÉÜ„É™„Éº‰∫§Êèõ: 15,000ÂÜÜÔΩû25,000ÂÜÜ", "Á´ØÂ≠êÊ∏ÖÊéÉ: 3,000ÂÜÜÔΩû5,000ÂÜÜ", "ÂÖÖÈõª„Ç∑„Çπ„ÉÜ„É†ÁÇπÊ§ú: 5,000ÂÜÜÔΩû10,000ÂÜÜ"]
                    },
                    recommended_products: {
                        items: ["„Éá„Ç£„Éº„Éó„Çµ„Ç§„ÇØ„É´„Éê„ÉÉ„ÉÜ„É™„Éº", "„Éê„ÉÉ„ÉÜ„É™„Éº„ÉÅ„É£„Éº„Ç∏„É£„Éº", "Á´ØÂ≠ê„ÇØ„É™„Éº„Éä„Éº"]
                    }
                },
                {
                    title: "Èõ®Êºè„Çä‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„Çπ",
                    category: "Èõ®Êºè„Çä",
                    filename: "Èõ®Êºè„Çä.txt",
                    content: "Èõ®Êºè„Çä„ÅÆÂéüÂõ†„ÅØ‰∏ª„Å´„Ç∑„Éº„É™„É≥„Ç∞Êùê„ÅÆÂä£Âåñ„Åß„Åô„ÄÇÊó©ÊúüÁô∫Ë¶ã„Å®ÈÅ©Âàá„Å™Ë£ú‰øÆ„ÅåÈáçË¶Å„Åß„Åô„ÄÇÈò≤Ê∞¥„ÉÜ„Éº„Éó„Åß„ÅÆÂøúÊÄ•Âá¶ÁΩÆ„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ",
                    costs: ["8,000ÂÜÜ", "15,000ÂÜÜ", "30,000ÂÜÜ"],
                    alternatives: ["„Äê„Ç∑„Éº„É™„É≥„Ç∞ÊùêA„Äë", "„Äê„Ç∑„Éº„É™„É≥„Ç∞ÊùêB„Äë"],
                    urls: ["https://example.com/sealing1"],
                    summary: "Èõ®Êºè„Çä„ÅÆÂéüÂõ†ÁâπÂÆö„Å®‰øÆÁêÜÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶",
                    structured_content: {
                        problem_description: "Â§©‰∫ï„ÇÑÂ£Å„Åã„ÇâÊ∞¥„ÅåÊºè„Çå„Çã„ÄÅ„Ç´„Éì„ÅåÁô∫Áîü„Åô„Çã„ÄÅÂÜÖË£ÖÊùê„ÅåÊø°„Çå„Çã",
                        causes: ["„Ç∑„Éº„É™„É≥„Ç∞Êùê„ÅÆÂä£Âåñ", "Â±ãÊ†π„ÅÆÁ†¥Êêç", "Á™ìÊû†„ÅÆÈöôÈñì", "ÈÖçÁÆ°„ÅÆÁ†¥Êêç"],
                        solutions: ["„Ç∑„Éº„É™„É≥„Ç∞Êùê„ÅÆ‰∫§Êèõ", "Èò≤Ê∞¥„ÉÜ„Éº„Éó„Åß„ÅÆÂøúÊÄ•Âá¶ÁΩÆ", "Â±ãÊ†π„ÅÆË£ú‰øÆ", "ÈÖçÁÆ°„ÅÆ‰øÆÁêÜ"],
                        tools_needed: ["„Ç∑„Éº„É™„É≥„Ç∞„Ç¨„É≥", "Èò≤Ê∞¥„ÉÜ„Éº„Éó", "„Ç´„ÉÉ„Çø„Éº", "„Éñ„É©„Ç∑"]
                    },
                    warnings: ["È´òÊâÄ„Åß„ÅÆ‰ΩúÊ•≠„ÅØÂç±Èô∫", "ÈÅ©Âàá„Å™‰øùË≠∑ÂÖ∑„ÇíÁùÄÁî®", "Â∞ÇÈñÄÊ•≠ËÄÖ„Å∏„ÅÆÁõ∏Ë´á„ÇíÊé®Â•®"],
                    repair_costs: {
                        summary: "8,000ÂÜÜÔΩû30,000ÂÜÜ",
                        items: ["„Ç∑„Éº„É™„É≥„Ç∞Êùê‰∫§Êèõ: 8,000ÂÜÜÔΩû15,000ÂÜÜ", "Â±ãÊ†πË£ú‰øÆ: 20,000ÂÜÜÔΩû50,000ÂÜÜ", "ÈÖçÁÆ°‰øÆÁêÜ: 10,000ÂÜÜÔΩû25,000ÂÜÜ"]
                    },
                    recommended_products: {
                        items: ["„Ç¶„É¨„Çø„É≥„Ç∑„Éº„É™„É≥„Ç∞", "Èò≤Ê∞¥„ÉÜ„Éº„Éó", "Â±ãÊ†πÁî®„Ç≥„Éº„Ç≠„É≥„Ç∞"]
                    }
                },
                {
                    title: "„Ç®„Ç¢„Ç≥„É≥‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„Çπ",
                    category: "„Ç®„Ç¢„Ç≥„É≥",
                    filename: "„Ç®„Ç¢„Ç≥„É≥.txt",
                    content: "„Ç®„Ç¢„Ç≥„É≥„ÅÆ„Éï„Ç£„É´„Çø„ÉºÊ∏ÖÊéÉ„Å®ÂÜ∑Â™í„Ç¨„Çπ„ÅÆÁÇπÊ§ú„ÅåÈáçË¶Å„Åß„Åô„ÄÇÂÆ§Â§ñÊ©ü„ÅÆÊ∏ÖÊéÉ„ÇÇÂÆöÊúüÁöÑ„Å´Ë°å„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                    costs: ["12,000ÂÜÜ", "20,000ÂÜÜ", "45,000ÂÜÜ"],
                    alternatives: ["„Äê„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„ÉºA„Äë", "„ÄêÂÜ∑Â™í„Ç¨„ÇπB„Äë"],
                    urls: ["https://example.com/aircon1"],
                    summary: "„Ç®„Ç¢„Ç≥„É≥„ÅÆ„É°„É≥„ÉÜ„Éä„É≥„Çπ„Å®‰øÆÁêÜ„Å´„Å§„ÅÑ„Å¶",
                    structured_content: {
                        problem_description: "ÂÜ∑„Åà„Å™„ÅÑ„ÄÅÁï∞Èü≥„Åå„Åô„Çã„ÄÅÊ∞¥„ÅåÊºè„Çå„Çã„ÄÅ„Éï„Ç£„É´„Çø„Éº„ÅåÊ±ö„Çå„Å¶„ÅÑ„Çã",
                        causes: ["„Éï„Ç£„É´„Çø„Éº„ÅÆÊ±ö„Çå", "ÂÜ∑Â™í„Ç¨„Çπ‰∏çË∂≥", "ÂÆ§Â§ñÊ©ü„ÅÆÊ±ö„Çå", "ÈõªÊ∞óÁ≥ªÁµ±„ÅÆÊïÖÈöú"],
                        solutions: ["„Éï„Ç£„É´„Çø„Éº„ÅÆÊ∏ÖÊéÉ", "ÂÜ∑Â™í„Ç¨„Çπ„ÅÆË£úÂÖÖ", "ÂÆ§Â§ñÊ©ü„ÅÆÊ∏ÖÊéÉ", "ÈõªÊ∞óÁ≥ªÁµ±„ÅÆÁÇπÊ§ú"],
                        tools_needed: ["„Éï„Ç£„É´„Çø„Éº„ÇØ„É™„Éº„Éä„Éº", "„Éñ„É©„Ç∑", "„Éû„É´„ÉÅ„É°„Éº„Çø„Éº", "ÂúßÂäõË®à"]
                    },
                    warnings: ["ÂÜ∑Â™í„Ç¨„Çπ„ÅØÂ∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å", "ÈõªÊ∞óÁ≥ªÁµ±„ÅÆ‰ΩúÊ•≠„ÅØÊÑüÈõª„ÅÆÂç±Èô∫", "ÂÆ§Â§ñÊ©ü„ÅÆÊ∏ÖÊéÉ„ÅØÂÆâÂÖ®„Å´"],
                    repair_costs: {
                        summary: "12,000ÂÜÜÔΩû45,000ÂÜÜ",
                        items: ["„Éï„Ç£„É´„Çø„Éº‰∫§Êèõ: 3,000ÂÜÜÔΩû8,000ÂÜÜ", "ÂÜ∑Â™í„Ç¨„ÇπË£úÂÖÖ: 15,000ÂÜÜÔΩû25,000ÂÜÜ", "ÂÆ§Â§ñÊ©üÊ∏ÖÊéÉ: 5,000ÂÜÜÔΩû10,000ÂÜÜ"]
                    },
                    recommended_products: {
                        items: ["„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„Éº", "ÂÜ∑Â™í„Ç¨„Çπ", "„Éï„Ç£„É´„Çø„Éº„ÇØ„É™„Éº„Éä„Éº"]
                    }
                },
                {
                    title: "„Éà„Ç§„É¨‰øÆÁêÜ„Ç¢„Éâ„Éê„Ç§„Çπ",
                    category: "„Éà„Ç§„É¨",
                    filename: "„Éà„Ç§„É¨.txt",
                    content: "„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº„ÅÆ„Éà„Ç§„É¨„ÅØÂÆöÊúüÁöÑ„Å™Ê∏ÖÊéÉ„Å®„É°„É≥„ÉÜ„Éä„É≥„Çπ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„ÅÆ‰∫§Êèõ„ÇÑ„Éù„É≥„Éó„ÅÆÁÇπÊ§ú„ÇíË°å„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                    costs: ["5,000ÂÜÜ", "15,000ÂÜÜ", "25,000ÂÜÜ"],
                    alternatives: ["„Äê„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„Äë", "„Äê„Éù„É≥„Éó„Äë", "„Äê„Ç∑„Éº„É´„Äë"],
                    urls: ["https://example.com/toilet1"],
                    summary: "„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº„Éà„Ç§„É¨„ÅÆ„É°„É≥„ÉÜ„Éä„É≥„Çπ„Å®‰øÆÁêÜ„Å´„Å§„ÅÑ„Å¶",
                    structured_content: {
                        problem_description: "Ê∞¥„ÅåÊµÅ„Çå„Å™„ÅÑ„ÄÅÁï∞Ëá≠„Åå„Åô„Çã„ÄÅÊ∞¥Êºè„Çå„ÅåÁô∫Áîü„Åô„Çã„ÄÅ„Éù„É≥„Éó„ÅåÂãï„Åã„Å™„ÅÑ",
                        causes: ["„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„ÅÆÊ±ö„Çå", "„Éù„É≥„Éó„ÅÆÊïÖÈöú", "„Ç∑„Éº„É´„ÅÆÂä£Âåñ", "ÈÖçÁÆ°„ÅÆË©∞„Åæ„Çä"],
                        solutions: ["„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„ÅÆÊ∏ÖÊéÉ", "„Éù„É≥„Éó„ÅÆÁÇπÊ§ú", "„Ç∑„Éº„É´„ÅÆ‰∫§Êèõ", "ÈÖçÁÆ°„ÅÆÊ∏ÖÊéÉ"],
                        tools_needed: ["„Éñ„É©„Ç∑", "Ê¥óÂâ§", "„Ç∑„Éº„É´", "„Éù„É≥„Éó"]
                    },
                    warnings: ["Ê±öÁâ©„ÅÆÂá¶ÁêÜ„ÅØÈÅ©Âàá„Å´", "Ê∏ÖÊéÉÊôÇ„ÅØÊâãË¢ã„ÇíÁùÄÁî®", "„Ç∑„Éº„É´‰∫§Êèõ„ÅØÊÖéÈáç„Å´"],
                    repair_costs: {
                        summary: "5,000ÂÜÜÔΩû25,000ÂÜÜ",
                        items: ["„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ‰∫§Êèõ: 8,000ÂÜÜÔΩû15,000ÂÜÜ", "„Éù„É≥„Éó‰∫§Êèõ: 12,000ÂÜÜÔΩû20,000ÂÜÜ", "„Ç∑„Éº„É´‰∫§Êèõ: 3,000ÂÜÜÔΩû8,000ÂÜÜ"]
                    },
                    recommended_products: {
                        items: ["„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ", "„Éà„Ç§„É¨„Éù„É≥„Éó", "„Ç∑„Éº„É´„Ç≠„ÉÉ„Éà", "„Éà„Ç§„É¨Ê¥óÂâ§"]
                    }
                }
            ];
            
            // „ÇØ„Ç®„É™„Å´Âü∫„Å•„ÅÑ„Å¶Èñ¢ÈÄ£„Åô„ÇãÁµêÊûú„Çí„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
            const queryLower = query.toLowerCase();
            const filteredResults = mockResults.filter(result => {
                const categoryMatch = result.category.toLowerCase().includes(queryLower);
                const contentMatch = result.content.toLowerCase().includes(queryLower);
                const titleMatch = result.title.toLowerCase().includes(queryLower);
                const summaryMatch = result.summary && result.summary.toLowerCase().includes(queryLower);
                
                return categoryMatch || contentMatch || titleMatch || summaryMatch;
            });
            
            console.log('‚úÖ „Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÁµêÊûú:', filteredResults.length, '‰ª∂');
            return filteredResults;
        }

        // ÁµêÊûúË°®Á§∫ÔºàÊîπÂñÑÁâàÔºâ
        function displayResults(results, query) {
            console.log('üìä ÁµêÊûúË°®Á§∫ÈñãÂßã:', results.length, '‰ª∂');
            console.log('üìä ÁµêÊûúË©≥Á¥∞:', JSON.stringify(results, null, 2));
            
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsSection = document.getElementById('resultsSection');
            
            console.log('üîç DOMË¶ÅÁ¥†„ÉÅ„Çß„ÉÉ„ÇØ:');
            console.log('  - resultsContainer:', resultsContainer);
            console.log('  - resultsSection:', resultsSection);
            
            if (!resultsContainer) {
                console.error('‚ùå resultsContainer„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            if (!resultsSection) {
                console.error('‚ùå resultsSection„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            if (!results || results.length === 0) {
                console.log('‚ö†Ô∏è ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì - ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åó„Åæ„Åô');
                // ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åô„Çã
                resultsSection.classList.remove('show');
                return;
            }
            
            console.log('‚úÖ ÁµêÊûú„ÇíË°®Á§∫‰∏≠...');
            resultsContainer.innerHTML = '';
            
            // ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫
            resultsSection.classList.add('show');
            
            // Ê§úÁ¥¢ÊÉÖÂ†±„ÅÆË°®Á§∫ÔºàÊîπËâØÁâàÔºâ
            const searchInfo = createSearchInfo(results, query);
            if (results.length === 1) {
                searchInfo.classList.add('single-result');
            }
            resultsContainer.appendChild(searchInfo);
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊèêÊ°à„ÅÆÂ†¥Âêà„ÅØÁâπÂà•„Å™Ë°®Á§∫ÔºàÂâäÈô§Ôºâ
            
            // ÁµêÊûú„ÅÆË°®Á§∫Ôºà„Éû„Éã„É•„Ç¢„É´Èô§Â§ñÁâàÔºâ
            results.forEach((result, index) => {
                console.log('üìù ÁµêÊûúË¶ÅÁ¥†‰ΩúÊàê‰∏≠:', index + 1, result.title);
                console.log('üìù ÁµêÊûú„Éá„Éº„Çø:', result);
                
                // „Éû„Éã„É•„Ç¢„É´Èñ¢ÈÄ£„ÅÆÁµêÊûú„ÇíÈô§Â§ñ
                if (result.source === 'manual' || result.category === '„Éû„Éã„É•„Ç¢„É´' || 
                    result.title?.includes('„Éû„Éã„É•„Ç¢„É´') || result.title?.includes('manual')) {
                    console.log('üö´ „Éû„Éã„É•„Ç¢„É´ÁµêÊûú„ÇíÈô§Â§ñ:', result.title);
                    return; // „Åì„ÅÆÁµêÊûú„Çí„Çπ„Ç≠„ÉÉ„Éó
                }
                
                // Á∞°ÊòìÁâà„ÅÆÁµêÊûúË°®Á§∫„Çí‰ΩúÊàê
                const resultElement = document.createElement('div');
                resultElement.className = 'result-item fade-in';
                console.log('üìù ÁµêÊûúË¶ÅÁ¥†„ÅÆHTML„ÇíÁîüÊàê‰∏≠...');
                resultElement.innerHTML = `
                    <div class="result-header">
                        <h3>${result.title || '„Çø„Ç§„Éà„É´„Å™„Åó'}</h3>
                        <span class="relevance-badge">${result.relevance || 'medium'}</span>
                    </div>
                    <div class="result-content">
                        <p><strong>„Ç´„ÉÜ„Ç¥„É™„Éº:</strong> ${result.category || 'N/A'}</p>
                        <p><strong>„ÇΩ„Éº„Çπ:</strong> ${result.source || 'N/A'}</p>
                        <p><strong>ÂÜÖÂÆπ:</strong> ${result.content || result.text || 'ÂÜÖÂÆπ„Å™„Åó'}</p>
                        ${result.repair_steps && result.repair_steps.length > 0 ? `
                            <div class="repair-steps">
                                <h4>üîß ‰øÆÁêÜÊâãÈ†Ü:</h4>
                                <ul>
                                    ${result.repair_steps.map(step => `<li>${step}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        ${result.costs && result.costs.length > 0 ? `
                            <div class="repair-costs">
                                <h4>üí∞ ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ:</h4>
                                ${(() => {
                                    console.log('üí∞ ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁîüÊàê‰∏≠...');
                                    const costHtml = getRepairCosts(result, query);
                                    console.log('üí∞ ÁîüÊàê„Åï„Çå„ÅüË≤ªÁî®HTML:', costHtml);
                                    return costHtml;
                                })()}
                            </div>
                        ` : ''}
                        ${result.warnings && result.warnings.length > 0 ? `
                            <div class="warnings">
                                <h4>‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö:</h4>
                                <ul>
                                    ${result.warnings.map(warning => `<li>${warning}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                if (results.length === 1) {
                    resultElement.classList.add('single-result');
                }
                
                console.log('üìù ÁµêÊûúË¶ÅÁ¥†„ÇíDOM„Å´ËøΩÂä†‰∏≠...');
                console.log('üìù ÁµêÊûúË¶ÅÁ¥†„ÅÆÂÜÖÂÆπ:', resultElement.innerHTML.substring(0, 500) + '...');
                resultsContainer.appendChild(resultElement);
                console.log('‚úÖ ÁµêÊûúË¶ÅÁ¥†„ÇíDOM„Å´ËøΩÂä†ÂÆå‰∫Ü');
            });
            
            // ‰ª£ÊõøÂìÅ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂ∏∏„Å´Ë°®Á§∫
            const alternativeSection = document.createElement('div');
            alternativeSection.className = 'result-item fade-in';
            alternativeSection.innerHTML = `
                <div class="result-header">
                    <h3>üõí ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã</h3>
                    <span class="relevance-badge">Êé®Â•®</span>
                </div>
                <div class="result-content">
                    ${generateDynamicProducts(query)}
                </div>
            `;
            resultsContainer.appendChild(alternativeSection);
            
            // Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂ∏∏„Å´Ë°®Á§∫
            const supportCenterSection = document.createElement('div');
            supportCenterSection.className = 'result-item support-center-section fade-in';
            supportCenterSection.innerHTML = `
                <div class="result-header">
                    <h3>üè¢ Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h3>
                    <span class="relevance-badge">Â∞ÇÈñÄ„Çµ„Éù„Éº„Éà</span>
                </div>
                <div class="result-content">
                    <div class="support-center-info">
                        <div class="contact-box">
                            <div class="contact-item">
                                <span class="contact-icon">üìç</span>
                                <span class="contact-label">‰ΩèÊâÄ:</span>
                                <span class="contact-value">„Äí700-0921 Â≤°Â±±Â∏ÇÂåóÂå∫Êù±Âè§Êùæ485-4 2F</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">üìû</span>
                                <span class="contact-label">ÈõªË©±:</span>
                                <span class="contact-value">086-206-6622</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">üìß</span>
                                <span class="contact-label">„ÅäÂïèÂêà„Çè„Åõ:</span>
                                <span class="contact-value"><a href="https://camper-repair.net/contact/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/contact/</a></span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">üåê</span>
                                <span class="contact-label">„Éõ„Éº„É†„Éö„Éº„Ç∏:</span>
                                <span class="contact-value"><a href="https://camper-repair.net/blog/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/blog/</a></span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">‚è∞</span>
                                <span class="contact-label">Âñ∂Ê•≠ÊôÇÈñì:</span>
                                <span class="contact-value">Âπ¥‰∏≠ÁÑ°‰ºëÔºà9:00ÔΩû21:00Ôºâ</span>
                            </div>
                            <div class="contact-note">
                                ‚Äª‰∏çÂú®ÊôÇ„ÅØÊäò„ÇäËøî„Åó„ÅäÈõªË©±Â∑Æ„Åó‰∏ä„Åí„Åæ„Åô„ÄÇ
                            </div>
                            <div class="company-info">
                                ÔºàÈÅãÂñ∂ÔºâÊ†™Âºè‰ºöÁ§æ„É™„ÇØ„Ç®„Çπ„Éà„Éó„É©„Çπ
                            </div>
                        </div>
                        
                        <div class="service-box">
                            <h6>üîß ÂØæÂøú„Çµ„Éº„Éì„Çπ:</h6>
                            <ul class="service-list">
                                <li>„Éê„ÉÉ„ÉÜ„É™„Éº„Éª„Ç§„É≥„Éê„Éº„Çø„Éº‰øÆÁêÜ„Éª‰∫§Êèõ</li>
                                <li>ÈõªÊ∞óÈÖçÁ∑ö„ÉªÈõªË£ÖÁ≥ª„Éà„É©„Éñ„É´ÂØæÂøú</li>
                                <li>Èõ®Êºè„Çä„ÉªÈò≤Ê∞¥Â∑•‰∫ã</li>
                                <li>ÂêÑÁ®ÆÂÆ∂Èõª„ÉªË®≠ÂÇô„ÅÆ‰øÆÁêÜ</li>
                                <li>ÂÆöÊúüÁÇπÊ§ú„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ</li>
                                <li>Á∑äÊÄ•ÂØæÂøú„ÉªÂá∫Âºµ‰øÆÁêÜÔºàË¶ÅÁõ∏Ë´áÔºâ</li>
                            </ul>
                        </div>
                        
                        <div class="consultation-box">
                            <h6>üí° „ÅîÁõ∏Ë´á„ÅÆÈöõ„ÅØ:</h6>
                            <ul class="consultation-list">
                                <li>ËªäÁ®Æ„ÉªÂπ¥Âºè</li>
                                <li>ÁóáÁä∂„ÅÆË©≥Á¥∞</li>
                                <li>Â∏åÊúõ„Åô„ÇãÂØæÂøúÊñπÊ≥ï</li>
                            </ul>
                            <p class="consultation-note">„Çí„ÅäÊïô„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                        </div>
                    </div>
                </div>
            `;
            resultsContainer.appendChild(supportCenterSection);
            
            console.log('üéØ ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫‰∏≠...');
            resultsSection.classList.add('show');
            console.log('üéâ ÁµêÊûúË°®Á§∫ÂÆå‰∫Ü');
        }

        // Ê§úÁ¥¢ÊÉÖÂ†±„ÅÆË°®Á§∫
        function createSearchInfo(results, query) {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'search-info';
            
            let resultText = '';
            if (results.length === 1) {
                resultText = '<p><strong>ÊúÄ„ÇÇÈñ¢ÈÄ£ÊÄß„ÅÆÈ´ò„ÅÑÁµêÊûú:</strong> 1‰ª∂</p>';
            } else {
                resultText = `<p><strong>Ë¶ã„Å§„Åã„Å£„ÅüÁµêÊûú:</strong> ${results.length}‰ª∂</p>`;
            }
            
            infoDiv.innerHTML = `
                <div class="search-summary">
                    <h3>üîç Ê§úÁ¥¢ÁµêÊûú</h3>
                    <p><strong>Ê§úÁ¥¢„ÇØ„Ç®„É™:</strong> "${query}"</p>
                    ${resultText}
                </div>
            `;
            return infoDiv;
        }

        // „Éï„Ç©„Éº„Éû„ÉÉ„Éà„Åï„Çå„ÅüÁµêÊûúË¶ÅÁ¥†„ÅÆ‰ΩúÊàêÔºàÊîπÂñÑÁâà - „Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞ÂØæÂøúÔºâ
        function createFormattedResultElement(result, index, query, results) {
            const div = document.createElement('div');
            
            // Ë≤ªÁî®ÁõÆÂÆâÊÉÖÂ†±„ÅÆÂ†¥Âêà„ÅØÁâπÂà•„Å™„ÇØ„É©„Çπ„ÇíÈÅ©Áî®
            if (result.source === 'cost_info' || result.category === 'Ë≤ªÁî®ÊÉÖÂ†±') {
                div.className = `result-item cost-info fade-in ${result.relevance || 'medium'}`;
            } else {
                div.className = `result-item fade-in ${result.relevance || 'medium'}`;
            }
            
            // Èñ¢ÈÄ£Â∫¶„É¨„Éô„É´„Å´Âü∫„Å•„Åè„Çπ„Çø„Ç§„É´
            const relevanceIcon = getRelevanceIcon(result.relevance);
            const sourceIcon = getSourceIcon(result.source);
            
            // „Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞„ÅÆÊîπÂñÑ
            const highlightedContent = highlightKeywords(result.content || result.text || '', query);
            const highlightedTitle = highlightKeywords(result.title || '', query);
            
            // Ë≤ªÁî®ÁõÆÂÆâÊÉÖÂ†±„ÅÆÂ†¥Âêà„ÅØÁâπÂà•„Å™„Éï„Ç©„Éº„Éû„ÉÉ„Éà
            let formattedContent = highlightedContent;
            if (result.source === 'cost_info' || result.category === 'Ë≤ªÁî®ÊÉÖÂ†±') {
                formattedContent = formatCostInformation(highlightedContent);
            }
            
            div.innerHTML = `
                <div class="result-header">
                    <div class="result-rank">
                        <span class="rank-number">${index + 1}</span>
                        <span class="relevance-icon">${relevanceIcon}</span>
                    </div>
                    <div class="result-title-section">
                        <h3 class="result-title">${highlightedTitle}</h3>
                        <div class="result-meta">
                            <span class="category">üìÇ ${result.category || result.filename || '„Åù„ÅÆ‰ªñ'}</span>
                            <span class="source">${sourceIcon} ${getSourceName(result.source)}</span>
                        </div>
                    </div>
                </div>
                
                    <div class="result-content">
                        <div class="problem-header">
                            <div class="problem-icon">üîß</div>
                            <div class="problem-title">${highlightedTitle}</div>
                        </div>
                        
                        <!-- Ë≤ªÁî®ÁõÆÂÆâÊÉÖÂ†±„ÅÆÁâπÂà•Ë°®Á§∫ -->
                        ${result.source === 'cost_info' || result.category === 'Ë≤ªÁî®ÊÉÖÂ†±' ? 
                            `<div class="cost-details">${formattedContent}</div>` : 
                            `<div class="result-text">${formattedContent}</div>`
                        }
                    
                    <!-- Êï¥ÁêÜ„Åï„Çå„ÅüÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="organized-sections">
                        <!-- 1. ÂïèÈ°å„ÅÆÁ®ÆÈ°ûÔºàÈùûË°®Á§∫Ôºâ -->
                        <!--
                        <div class="section-item">
                            <h4 class="section-title">üîç ÂïèÈ°å„ÅÆÁ®ÆÈ°û</h4>
                            <div class="section-content">
                                ${getProblemTypes(result, query)}
                            </div>
                        </div>
                        -->
                        
                        <!-- 2. ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ -->
                        <div class="section-item">
                            <h4 class="section-title">üí∞ ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ</h4>
                            <div class="section-content">
                                ${(() => {
                                    console.log('üí∞ ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÁîüÊàê‰∏≠...');
                                    const costHtml = getRepairCosts(result, query);
                                    console.log('üí∞ ÁîüÊàê„Åï„Çå„ÅüË≤ªÁî®HTML:', costHtml);
                                    return costHtml;
                                })()}
                            </div>
                        </div>
                        
                        <!-- 3. ÂøÖË¶Å„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅÔºàÈùûË°®Á§∫Ôºâ -->
                        <!--
                        <div class="section-item">
                            <h4 class="section-title">üõ†Ô∏è ÂøÖË¶Å„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ</h4>
                            <div class="section-content">
                                ${getToolsAndParts(result, query)}
                            </div>
                        </div>
                        -->
                        
                        <!-- 4. ‰øÆÁêÜÊâãÈ†Ü -->
                        <div class="section-item">
                            <h4 class="section-title">üîß ‰øÆÁêÜÊâãÈ†Ü</h4>
                            <div class="section-content">
                                ${getRepairStepsFromResult(result, query)}
                            </div>
                        </div>
                        
                        <!-- 5. Ê≥®ÊÑè‰∫ãÈ†Ö -->
                        <div class="section-item">
                            <h4 class="section-title">‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö</h4>
                            <div class="section-content">
                                ${getWarningsFromResult(result, query)}
                            </div>
                        </div>
                        
                        <!-- 6. ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªãÔºàÂãïÁöÑÁîüÊàêÔºâ -->
                        <div class="section-item">
                            <h4 class="section-title">üõí ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã</h4>
                            <div class="section-content">
                                ${generateDynamicProducts(query)}
                            </div>
                        </div>
                        
                        <!-- 7. Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº -->
                        <div class="section-item support-center-section">
                            <div class="section-number">7</div>
                            <div class="section-content">
                                <h4>üè¢ Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h4>
                                <div class="support-center-info">
                                    <div class="contact-box">
                                        <div class="contact-item">
                                            <span class="contact-icon">üìç</span>
                                            <span class="contact-label">‰ΩèÊâÄ:</span>
                                            <span class="contact-value">„Äí700-0921 Â≤°Â±±Â∏ÇÂåóÂå∫Êù±Âè§Êùæ485-4 2F</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìû</span>
                                            <span class="contact-label">ÈõªË©±:</span>
                                            <span class="contact-value">086-206-6622</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìß</span>
                                            <span class="contact-label">„ÅäÂïèÂêà„Çè„Åõ:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/contact/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/contact/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üåê</span>
                                            <span class="contact-label">„Éõ„Éº„É†„Éö„Éº„Ç∏:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/blog/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/blog/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">‚è∞</span>
                                            <span class="contact-label">Âñ∂Ê•≠ÊôÇÈñì:</span>
                                            <span class="contact-value">Âπ¥‰∏≠ÁÑ°‰ºëÔºà9:00ÔΩû21:00Ôºâ</span>
                                        </div>
                                        <div class="contact-note">
                                            ‚Äª‰∏çÂú®ÊôÇ„ÅØÊäò„ÇäËøî„Åó„ÅäÈõªË©±Â∑Æ„Åó‰∏ä„Åí„Åæ„Åô„ÄÇ
                                        </div>
                                        <div class="company-info">
                                            ÔºàÈÅãÂñ∂ÔºâÊ†™Âºè‰ºöÁ§æ„É™„ÇØ„Ç®„Çπ„Éà„Éó„É©„Çπ
                                        </div>
                                    </div>
                                    
                                    <div class="service-box">
                                        <h6>üîß ÂØæÂøú„Çµ„Éº„Éì„Çπ:</h6>
                                        <ul class="service-list">
                                            <li>„Éê„ÉÉ„ÉÜ„É™„Éº„Éª„Ç§„É≥„Éê„Éº„Çø„Éº‰øÆÁêÜ„Éª‰∫§Êèõ</li>
                                            <li>ÈõªÊ∞óÈÖçÁ∑ö„ÉªÈõªË£ÖÁ≥ª„Éà„É©„Éñ„É´ÂØæÂøú</li>
                                            <li>Èõ®Êºè„Çä„ÉªÈò≤Ê∞¥Â∑•‰∫ã</li>
                                            <li>ÂêÑÁ®ÆÂÆ∂Èõª„ÉªË®≠ÂÇô„ÅÆ‰øÆÁêÜ</li>
                                            <li>ÂÆöÊúüÁÇπÊ§ú„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ</li>
                                            <li>Á∑äÊÄ•ÂØæÂøú„ÉªÂá∫Âºµ‰øÆÁêÜÔºàË¶ÅÁõ∏Ë´áÔºâ</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="consultation-box">
                                        <h6>üí° „ÅîÁõ∏Ë´á„ÅÆÈöõ„ÅØ:</h6>
                                        <ul class="consultation-list">
                                            <li>ËªäÁ®Æ„ÉªÂπ¥Âºè</li>
                                            <li>ÁóáÁä∂„ÅÆË©≥Á¥∞</li>
                                            <li>Â∏åÊúõ„Åô„ÇãÂØæÂøúÊñπÊ≥ï</li>
                                        </ul>
                                        <p class="consultation-note">„Çí„ÅäÊïô„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-info">
                        ${result.costs || result.repair_costs ? `
                        <div class="quick-cost">
                            <h4>üí∞ ‰øÆÁêÜË≤ªÁî®ÁõÆÂÆâ</h4>
                            <p class="cost-highlight">${result.costs || result.repair_costs}</p>
                        </div>
                        ` : ''}
                        
                        ${result.tools || result.parts ? `
                        <div class="quick-products">
                            <h4>üõ†Ô∏è ÂøÖË¶Å„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ</h4>
                            <div class="product-tags">
                                ${result.tools ? `<span class="product-tag">Â∑•ÂÖ∑: ${result.tools}</span>` : ''}
                                ${result.parts ? `<span class="product-tag">ÈÉ®ÂìÅ: ${result.parts}</span>` : ''}
                            </div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="troubleshooting-sections">
                        ${result.structured_content?.problem_description ? `
                        <div class="section-item">
                            <div class="section-number">1</div>
                            <div class="section-content">
                                <h4>ÂïèÈ°å„ÅÆË©≥Á¥∞„Å™Áä∂Ê≥Å„ÇíÁ¢∫Ë™ç</h4>
                                <p>${result.structured_content.problem_description}</p>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.warnings?.length > 0 ? `
                        <div class="section-item safety-section">
                            <div class="section-number">2</div>
                            <div class="section-content">
                                <h4>ÂÆâÂÖ®‰∏ä„ÅÆÊ≥®ÊÑèÁÇπ</h4>
                                <div class="safety-warnings">
                                    ${result.warnings.map(warning => `
                                        <div class="safety-item">
                                            <span class="safety-icon">‚ö†Ô∏è</span>
                                            <span class="safety-text">${warning}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.structured_content?.causes?.length > 0 ? `
                        <div class="section-item">
                            <div class="section-number">3</div>
                            <div class="section-content">
                                <h4>ËÄÉ„Åà„Çâ„Çå„ÇãÂéüÂõ†</h4>
                                <ul class="cause-list">
                                    ${result.structured_content.causes.map(cause => `<li>${cause}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.structured_content?.solutions?.length > 0 ? `
                        <div class="section-item">
                            <div class="section-number">4</div>
                            <div class="section-content">
                                <h4>ÂÖ∑‰ΩìÁöÑ„Å™‰øÆÁêÜÊâãÈ†Ü</h4>
                                ${result.category === '„Éà„Ç§„É¨' ? `
                                <div class="toilet-repair-advice">
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß „Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„ÅÆÊ∏ÖÊéÉ„Å®„É°„É≥„ÉÜ„Éä„É≥„Çπ</h5>
                                            <div class="cost-badge">0ÂÜÜÔºàËá™ÂàÜ„Åß‰ΩúÊ•≠Ôºâ</div>
                                        </div>
                                        <p class="cost-description">Ê∏ÖÊéÉÁî®ÂìÅ„ÅÆ„ÅøÂøÖË¶Å</p>
                                        <ul class="step-details">
                                            <li>„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ„ÇíÂèñ„ÇäÂ§ñ„Åó„ÄÅ‰∏≠Ë∫´„ÇíÈÅ©Âàá„Å´Âá¶ÁêÜ„Åô„Çã</li>
                                            <li>„Çø„É≥„ÇØÂÜÖÈÉ®„Çí„Éñ„É©„Ç∑„Å®Ê¥óÂâ§„ÅßÊ∏ÖÊéÉ„Åô„Çã</li>
                                            <li>Ê∞¥„ÅßÂçÅÂàÜ„Å´„Åô„Åô„Åé„ÄÅ‰πæÁá•„Åï„Åõ„Çã</li>
                                            <li>Êñ∞„Åó„ÅÑËñ¨Ââ§„ÇíÈÅ©ÈáèÊäïÂÖ•„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß „Éù„É≥„Éó„ÅÆÂãï‰ΩúÁ¢∫Ë™ç„Å®Ê∏ÖÊéÉ</h5>
                                            <div class="cost-badge">3,000ÂÜÜÔΩû8,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">„Éù„É≥„ÉóÊ∏ÖÊéÉ„ÉªÈÉ®ÂìÅ‰∫§ÊèõË≤ªÁî®</p>
                                        <ul class="step-details">
                                            <li>„Éù„É≥„Éó„ÅÆÈõªÊ∫ê„ÇíÁ¢∫Ë™ç„Åó„ÄÅÂãï‰Ωú„ÉÜ„Çπ„Éà„ÇíË°å„ÅÜ</li>
                                            <li>„Éù„É≥„ÉóÂÜÖÈÉ®„ÅÆË©∞„Åæ„Çä„ÇíÁ¢∫Ë™ç„Åó„ÄÅÊ∏ÖÊéÉ„Åô„Çã</li>
                                            <li>ÈÖçÁÆ°„ÅÆË©∞„Åæ„Çä„ÇíÁ¢∫Ë™ç„Åó„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶Ê∏ÖÊéÉ„Åô„Çã</li>
                                            <li>„Éù„É≥„Éó„ÅÆÂãï‰ΩúÈü≥„ÇíÁ¢∫Ë™ç„Åó„ÄÅÁï∞Â∏∏„Åå„Å™„ÅÑ„Åã„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß „Ç∑„Éº„É´„Éª„Éë„ÉÉ„Ç≠„É≥„ÅÆÁÇπÊ§ú„Å®‰∫§Êèõ</h5>
                                            <div class="cost-badge">5,000ÂÜÜÔΩû15,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">ÈÉ®ÂìÅ‰ª£ÔºãÂ∑•Ë≥É</p>
                                        <ul class="step-details">
                                            <li>„Ç∑„Éº„É´„Éª„Éë„ÉÉ„Ç≠„É≥„ÅÆÂä£ÂåñÁä∂Ê≥Å„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                            <li>‰∫ÄË£Ç„ÇÑÁ°¨Âåñ„Åå„Å™„ÅÑ„ÅãÁÇπÊ§ú„Åô„Çã</li>
                                            <li>ÂøÖË¶Å„Å´Âøú„Åò„Å¶Êñ∞„Åó„ÅÑ„Ç∑„Éº„É´„Éª„Éë„ÉÉ„Ç≠„É≥„Å´‰∫§Êèõ„Åô„Çã</li>
                                            <li>‰∫§ÊèõÂæå„ÅØÊ∞¥Êºè„Çå„Åå„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß ÈõªÊ∫ê„ÉªÈÖçÁ∑ö„ÅÆÁ¢∫Ë™ç</h5>
                                            <div class="cost-badge">2,000ÂÜÜÔΩû10,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">ÈõªÊ∞óÂ∑•‰∫ãË≤ªÁî®</p>
                                        <ul class="step-details">
                                            <li>ÈõªÊ∫ê„Çπ„Ç§„ÉÉ„ÉÅ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                            <li>ÈÖçÁ∑ö„ÅÆÊñ≠Á∑ö„ÇÑÊé•Ëß¶‰∏çËâØ„Åå„Å™„ÅÑ„Åã„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã</li>
                                            <li>„Éí„É•„Éº„Ç∫„ÅÆÁä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åó„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶‰∫§Êèõ„Åô„Çã</li>
                                            <li>ÈõªÂúß„Çí„Éû„É´„ÉÅ„É°„Éº„Çø„Éº„ÅßÊ∏¨ÂÆö„Åó„ÄÅÊ≠£Â∏∏ÂÄ§„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß Ê∞¥„Çø„É≥„ÇØ„ÅÆÊ∞¥ÈáèÁ¢∫Ë™ç</h5>
                                            <div class="cost-badge">0ÂÜÜÔΩû3,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">Áµ¶Ê∞¥Á≥ªÁµ±„ÅÆÁÇπÊ§ú„Éª‰øÆÁêÜ</p>
                                        <ul class="step-details">
                                            <li>Ê∞¥„Çø„É≥„ÇØ„ÅÆÊ∞¥Èáè„ÇíÁ¢∫Ë™ç„Åó„ÄÅ‰∏çË∂≥„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØË£úÂÖÖ„Åô„Çã</li>
                                            <li>Áµ¶Ê∞¥„Éù„É≥„Éó„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                            <li>Áµ¶Ê∞¥ÁÆ°„ÅÆË©∞„Åæ„Çä„Åå„Å™„ÅÑ„Åã„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã</li>
                                            <li>Áµ¶Ê∞¥„Éê„É´„Éñ„ÅÆÈñãÈñâ„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß Áï∞Áâ©„ÅÆÈô§Âéª</h5>
                                            <div class="cost-badge">1,000ÂÜÜÔΩû5,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">Ê∏ÖÊéÉ„ÉªÂàÜËß£‰ΩúÊ•≠Ë≤ªÁî®</p>
                                        <ul class="step-details">
                                            <li>Áï∞Áâ©„ÅÆ‰ΩçÁΩÆ„Å®Á®ÆÈ°û„ÇíÁâπÂÆö„Åô„Çã</li>
                                            <li>ÂÆâÂÖ®„Å´Áï∞Áâ©„ÇíÂèñ„ÇäÈô§„Åè</li>
                                            <li>ÂΩ±Èüø„ÇíÂèó„Åë„ÅüÈÉ®ÂàÜ„ÇíÊ∏ÖÊéÉ„Åô„Çã</li>
                                            <li>Âãï‰ΩúÁ¢∫Ë™ç„ÇíË°å„ÅÜ</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß Ëñ¨Ââ§„ÅÆË£úÂÖÖ</h5>
                                            <div class="cost-badge">500ÂÜÜÔΩû2,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">Ëñ¨Ââ§‰ª£„ÅÆ„Åø</p>
                                        <ul class="step-details">
                                            <li>ÈÅ©Âàá„Å™Ëñ¨Ââ§„ÇíÈÅ∏Êäû„Åô„Çã</li>
                                            <li>Ëñ¨Ââ§„ÇíÈÅ©ÈáèÊäïÂÖ•„Åô„Çã</li>
                                            <li>Â∏åÈáàÂÄçÁéá„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                            <li>ÂäπÊûú„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="repair-step">
                                        <div class="step-header">
                                            <h5>üîß ÊéíÊ∞¥ÂºÅ„ÅÆÂãï‰ΩúÁ¢∫Ë™ç</h5>
                                            <div class="cost-badge">3,000ÂÜÜÔΩû8,000ÂÜÜ</div>
                                        </div>
                                        <p class="cost-description">ÂºÅ„ÅÆÁÇπÊ§ú„Éª‰∫§ÊèõË≤ªÁî®</p>
                                        <ul class="step-details">
                                            <li>ÊéíÊ∞¥ÂºÅ„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç„Åô„Çã</li>
                                            <li>ÂºÅ„ÅÆÈñãÈñâÁä∂ÊÖã„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã</li>
                                            <li>ÂøÖË¶Å„Å´Âøú„Åò„Å¶ÂºÅ„ÇíÊ∏ÖÊéÉ„Éª‰∫§Êèõ„Åô„Çã</li>
                                            <li>Ê∞¥Êºè„Çå„Åå„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åô„Çã</li>
                                        </ul>
                                    </div>
                                </div>
                                ` : `
                                <ol class="solution-steps">
                                    ${result.structured_content.solutions.map(solution => `<li>${solution}</li>`).join('')}
                                </ol>
                                `}
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.structured_content?.tools_needed?.length > 0 ? `
                        <div class="section-item">
                            <div class="section-number">5</div>
                            <div class="section-content">
                                <h4>ÂøÖË¶Å„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ</h4>
                                <div class="tools-list">
                                    ${result.structured_content.tools_needed.map(tool => `
                                        <div class="tool-item">
                                            <span class="tool-icon">üîß</span>
                                            <span class="tool-name">${tool}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã„Çª„ÇØ„Ç∑„Éß„É≥ -->
                        <div class="section-item alternative-products-section">
                            <div class="section-number">6</div>
                            <div class="section-content">
                                <h4>üõí ‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã</h4>
                                
                                <!-- ÂïÜÂìÅÊ§úÁ¥¢Ê©üËÉΩ -->
                                <div class="product-search-section">
                                    <div class="search-header">
                                        <h5>üîç ÂïÜÂìÅ„ÇíÊ§úÁ¥¢</h5>
                                        <p>ÂøÖË¶Å„Å™ÈÉ®ÂìÅ„ÇÑÂ∑•ÂÖ∑„ÇíÊ§úÁ¥¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                                    </div>
                                    <div class="search-controls">
                                        <input type="text" id="productSearchInput" placeholder="‰æã: „Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà„ÄÅ„Éñ„ÉÅ„É´„ÉÜ„Éº„Éó„ÄÅÁ™ìÊû†„É¢„Éº„É´„ÄÅ„Ç¨„Çπ„Ç±„ÉÉ„Éà„Å™„Å©" class="search-input">
                                        <button onclick="searchProducts()" class="search-btn">Ê§úÁ¥¢</button>
                                    </div>
                                    <div class="search-categories">
                                        <button onclick="filterProducts('all')" class="category-btn active">„Åô„Åπ„Å¶</button>
                                        <button onclick="filterProducts('sealing')" class="category-btn">„Ç∑„Éº„É™„É≥„Ç∞„ÉªÈò≤Ê∞¥</button>
                                        <button onclick="filterProducts('roof')" class="category-btn">„É´„Éº„Éï„ÉªÁ™ìÊû†</button>
                                        <button onclick="filterProducts('gasket')" class="category-btn">„Ç¨„Çπ„Ç±„ÉÉ„Éà„Éª„Ç∑„Éº„É´</button>
                                        <button onclick="filterProducts('interior')" class="category-btn">ÂÜÖË£Ö„ÉªÂ£ÅÁ¥ô</button>
                                    </div>
                                </div>
                                
                                <div class="alternative-products" id="productResults">
                                    <!-- ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãÂïÜÂìÅ„Ç´„ÉÜ„Ç¥„É™ -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„ÉºÁ¥π‰ªã -->
                        <div class="section-item support-center-section">
                            <div class="section-number">7</div>
                            <div class="section-content">
                                <h4>üè¢ Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h4>
                                <div class="support-center-info">
                                    <div class="contact-box">
                                        <div class="contact-item">
                                            <span class="contact-icon">üìç</span>
                                            <span class="contact-label">‰ΩèÊâÄ:</span>
                                            <span class="contact-value">„Äí700-0921 Â≤°Â±±Â∏ÇÂåóÂå∫Êù±Âè§Êùæ485-4 2F</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìû</span>
                                            <span class="contact-label">ÈõªË©±:</span>
                                            <span class="contact-value">086-206-6622</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìß</span>
                                            <span class="contact-label">„ÅäÂïèÂêà„Çè„Åõ:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/contact/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/contact/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üåê</span>
                                            <span class="contact-label">„Éõ„Éº„É†„Éö„Éº„Ç∏:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/blog/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/blog/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">‚è∞</span>
                                            <span class="contact-label">Âñ∂Ê•≠ÊôÇÈñì:</span>
                                            <span class="contact-value">Âπ¥‰∏≠ÁÑ°‰ºëÔºà9:00ÔΩû21:00Ôºâ</span>
                                        </div>
                                        <div class="contact-note">
                                            ‚Äª‰∏çÂú®ÊôÇ„ÅØÊäò„ÇäËøî„Åó„ÅäÈõªË©±Â∑Æ„Åó‰∏ä„Åí„Åæ„Åô„ÄÇ
                                        </div>
                                        <div class="company-info">
                                            ÔºàÈÅãÂñ∂ÔºâÊ†™Âºè‰ºöÁ§æ„É™„ÇØ„Ç®„Çπ„Éà„Éó„É©„Çπ
                                        </div>
                                    </div>
                                    
                                    <div class="service-box">
                                        <h6>üîß ÂØæÂøú„Çµ„Éº„Éì„Çπ:</h6>
                                        <ul class="service-list">
                                            <li>„Éê„ÉÉ„ÉÜ„É™„Éº„Éª„Ç§„É≥„Éê„Éº„Çø„Éº‰øÆÁêÜ„Éª‰∫§Êèõ</li>
                                            <li>ÈõªÊ∞óÈÖçÁ∑ö„ÉªÈõªË£ÖÁ≥ª„Éà„É©„Éñ„É´ÂØæÂøú</li>
                                            <li>Èõ®Êºè„Çä„ÉªÈò≤Ê∞¥Â∑•‰∫ã</li>
                                            <li>ÂêÑÁ®ÆÂÆ∂Èõª„ÉªË®≠ÂÇô„ÅÆ‰øÆÁêÜ</li>
                                            <li>ÂÆöÊúüÁÇπÊ§ú„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ</li>
                                            <li>Á∑äÊÄ•ÂØæÂøú„ÉªÂá∫Âºµ‰øÆÁêÜÔºàË¶ÅÁõ∏Ë´áÔºâ</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="consultation-box">
                                        <h6>üí° „ÅîÁõ∏Ë´á„ÅÆÈöõ„ÅØ:</h6>
                                        <ul class="consultation-list">
                                            <li>ËªäÁ®Æ„ÉªÂπ¥Âºè</li>
                                            <li>ÁóáÁä∂„ÅÆË©≥Á¥∞</li>
                                            <li>Â∏åÊúõ„Åô„ÇãÂØæÂøúÊñπÊ≥ï</li>
                                        </ul>
                                        <p class="consultation-note">„Çí„ÅäÊïô„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        ${result.repair_steps?.length > 0 ? `
                        <div class="section-item">
                            <div class="section-number">9</div>
                            <div class="section-content">
                                <h4>‰∫àÈò≤„É°„É≥„ÉÜ„Éä„É≥„Çπ„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπ</h4>
                                <ul class="maintenance-list">
                                    ${result.repair_steps.map(step => `<li>${step}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.substitute_products?.length > 0 ? `
                        <div class="section-item substitute-section">
                            <div class="section-number">10</div>
                            <div class="section-content">
                                <h4>üîß ‰ª£Áî®ÂìÅ„Éª‰ª£ÊõøÂìÅ„ÅÆÁ¥π‰ªã</h4>
                                <div class="substitute-products">
                                    <p class="substitute-intro">Â£ä„Çå„ÅüÈöõ„ÅÆ‰ª£Áî®ÂìÅ„Éª‰ª£ÊõøÂìÅ„Çí„ÅîÁ¥π‰ªã„Åó„Åæ„ÅôÔºö</p>
                                    <div class="product-grid">
                                        ${result.substitute_products.map(product => `
                                            <div class="substitute-item">
                                                <div class="product-info">
                                                    <h6>${product.name}</h6>
                                                    ${product.url ? `
                                                        <a href="${product.url}" target="_blank" rel="noopener noreferrer" class="product-link">
                                                            üîó Ë©≥Á¥∞„ÇíË¶ã„Çã
                                                        </a>
                                                    ` : ''}
                                                </div>
                                                <div class="product-type">
                                                    <span class="type-badge">‰ª£Áî®ÂìÅ</span>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.part_purchase_info?.length > 0 ? `
                        <div class="section-item purchase-section">
                            <div class="section-number">${result.substitute_products?.length > 0 ? '11' : '10'}</div>
                            <div class="section-content">
                                <h4>üõí ÈÉ®ÂìÅË≥ºÂÖ•ÊÉÖÂ†±</h4>
                                <div class="purchase-info">
                                    <p class="purchase-intro">‰øÆÁêÜ„Å´ÂøÖË¶Å„Å™ÈÉ®ÂìÅ„ÅÆË≥ºÂÖ•ÊÉÖÂ†±„Çí„ÅîÊ°àÂÜÖ„Åó„Åæ„ÅôÔºö</p>
                                    <div class="part-grid">
                                        ${result.part_purchase_info.map(part => `
                                            <div class="part-item">
                                                <div class="part-info">
                                                    <h6>${part.name}</h6>
                                                    ${part.url ? `
                                                        <a href="${part.url}" target="_blank" rel="noopener noreferrer" class="part-link">
                                                            üõí Ë≥ºÂÖ•„Éö„Éº„Ç∏
                                                        </a>
                                                    ` : `
                                                        <div class="part-search">
                                                            <span class="search-text">ÂïÜÂìÅÂêç„ÅßÊ§úÁ¥¢</span>
                                                        </div>
                                                    `}
                                                </div>
                                                <div class="part-type">
                                                    <span class="type-badge purchase">Ë≥ºÂÖ•ÈÉ®ÂìÅ</span>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„ÉºÁ¥π‰ªã -->
                        <div class="section-item support-center-section">
                            <div class="section-number">7</div>
                            <div class="section-content">
                                <h4>üè¢ Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h4>
                                <div class="support-center-info">
                                    <div class="contact-box">
                                        <div class="contact-item">
                                            <span class="contact-icon">üìç</span>
                                            <span class="contact-label">‰ΩèÊâÄ:</span>
                                            <span class="contact-value">„Äí700-0921 Â≤°Â±±Â∏ÇÂåóÂå∫Êù±Âè§Êùæ485-4 2F</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìû</span>
                                            <span class="contact-label">ÈõªË©±:</span>
                                            <span class="contact-value">086-206-6622</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìß</span>
                                            <span class="contact-label">„ÅäÂïèÂêà„Çè„Åõ:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/contact/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/contact/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üåê</span>
                                            <span class="contact-label">„Éõ„Éº„É†„Éö„Éº„Ç∏:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/blog/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/blog/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">‚è∞</span>
                                            <span class="contact-label">Âñ∂Ê•≠ÊôÇÈñì:</span>
                                            <span class="contact-value">Âπ¥‰∏≠ÁÑ°‰ºëÔºà9:00ÔΩû21:00Ôºâ</span>
                                        </div>
                                        <div class="contact-note">
                                            ‚Äª‰∏çÂú®ÊôÇ„ÅØÊäò„ÇäËøî„Åó„ÅäÈõªË©±Â∑Æ„Åó‰∏ä„Åí„Åæ„Åô„ÄÇ
                                        </div>
                                        <div class="company-info">
                                            ÔºàÈÅãÂñ∂ÔºâÊ†™Âºè‰ºöÁ§æ„É™„ÇØ„Ç®„Çπ„Éà„Éó„É©„Çπ
                                        </div>
                                    </div>
                                    
                                    <div class="service-box">
                                        <h6>üîß ÂØæÂøú„Çµ„Éº„Éì„Çπ:</h6>
                                        <ul class="service-list">
                                            <li>„Éê„ÉÉ„ÉÜ„É™„Éº„Éª„Ç§„É≥„Éê„Éº„Çø„Éº‰øÆÁêÜ„Éª‰∫§Êèõ</li>
                                            <li>ÈõªÊ∞óÈÖçÁ∑ö„ÉªÈõªË£ÖÁ≥ª„Éà„É©„Éñ„É´ÂØæÂøú</li>
                                            <li>Èõ®Êºè„Çä„ÉªÈò≤Ê∞¥Â∑•‰∫ã</li>
                                            <li>ÂêÑÁ®ÆÂÆ∂Èõª„ÉªË®≠ÂÇô„ÅÆ‰øÆÁêÜ</li>
                                            <li>ÂÆöÊúüÁÇπÊ§ú„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ</li>
                                            <li>Á∑äÊÄ•ÂØæÂøú„ÉªÂá∫Âºµ‰øÆÁêÜÔºàË¶ÅÁõ∏Ë´áÔºâ</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="consultation-box">
                                        <h6>üí° „ÅîÁõ∏Ë´á„ÅÆÈöõ„ÅØ:</h6>
                                        <ul class="consultation-list">
                                            <li>ËªäÁ®Æ„ÉªÂπ¥Âºè</li>
                                            <li>ÁóáÁä∂„ÅÆË©≥Á¥∞</li>
                                            <li>Â∏åÊúõ„Åô„ÇãÂØæÂøúÊñπÊ≥ï</li>
                                        </ul>
                                        <p class="consultation-note">„Çí„ÅäÊïô„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Â∞ÇÈñÄÂÆ∂„Å∏„ÅÆÁõ∏Ë´á„Çø„Ç§„Éü„É≥„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂâäÈô§ -->
                                
                                <div class="support-center-detailed">
                                    <h5>üè¢ Â≤°Â±±„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h5>
                                    <p class="support-intro">Â∞ÇÈñÄÁöÑ„Å™‰øÆÁêÜ„ÇÑ„É°„É≥„ÉÜ„Éä„É≥„Çπ„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØ„ÄÅ„ÅäÊ∞óËªΩ„Å´„ÅîÁõ∏Ë´á„Åè„Å†„Åï„ÅÑÔºö</p>
                                    
                                    <div class="contact-details">
                                        <div class="contact-item">
                                            <span class="contact-icon">üìç</span>
                                            <span class="contact-label">‰ΩèÊâÄ:</span>
                                            <span class="contact-value">„Äí700-0921 Â≤°Â±±Â∏ÇÂåóÂå∫Êù±Âè§Êùæ485-4 2F</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìû</span>
                                            <span class="contact-label">ÈõªË©±:</span>
                                            <span class="contact-value">086-206-6622</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üìß</span>
                                            <span class="contact-label">„ÅäÂïèÂêà„Çè„Åõ:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/contact/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/contact/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">üåê</span>
                                            <span class="contact-label">„Éõ„Éº„É†„Éö„Éº„Ç∏:</span>
                                            <span class="contact-value"><a href="https://camper-repair.net/blog/" target="_blank" rel="noopener noreferrer">https://camper-repair.net/blog/</a></span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-icon">‚è∞</span>
                                            <span class="contact-label">Âñ∂Ê•≠ÊôÇÈñì:</span>
                                            <span class="contact-value">Âπ¥‰∏≠ÁÑ°‰ºëÔºà9:00ÔΩû21:00Ôºâ</span>
                                        </div>
                                        <div class="contact-note">
                                            ‚Äª‰∏çÂú®ÊôÇ„ÅØÊäò„ÇäËøî„Åó„ÅäÈõªË©±Â∑Æ„Åó‰∏ä„Åí„Åæ„Åô„ÄÇ
                                        </div>
                                        <div class="company-info">
                                            ÔºàÈÅãÂñ∂ÔºâÊ†™Âºè‰ºöÁ§æ„É™„ÇØ„Ç®„Çπ„Éà„Éó„É©„Çπ
                                        </div>
                                    </div>
                                    
                                    <div class="service-list">
                                        <h6>üîß ÂØæÂøú„Çµ„Éº„Éì„Çπ:</h6>
                                        <ul class="service-items">
                                            <li>„Éê„ÉÉ„ÉÜ„É™„Éº„Éª„Ç§„É≥„Éê„Éº„Çø„Éº‰øÆÁêÜ„Éª‰∫§Êèõ</li>
                                            <li>ÈõªÊ∞óÈÖçÁ∑ö„ÉªÈõªË£ÖÁ≥ª„Éà„É©„Éñ„É´ÂØæÂøú</li>
                                            <li>Èõ®Êºè„Çä„ÉªÈò≤Ê∞¥Â∑•‰∫ã</li>
                                            <li>ÂêÑÁ®ÆÂÆ∂Èõª„ÉªË®≠ÂÇô„ÅÆ‰øÆÁêÜ</li>
                                            <li>ÂÆöÊúüÁÇπÊ§ú„Éª„É°„É≥„ÉÜ„Éä„É≥„Çπ</li>
                                            <li>Á∑äÊÄ•ÂØæÂøú„ÉªÂá∫Âºµ‰øÆÁêÜÔºàË¶ÅÁõ∏Ë´áÔºâ</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="consultation-info">
                                        <h6>üí° „ÅîÁõ∏Ë´á„ÅÆÈöõ„ÅØ:</h6>
                                        <ul class="consultation-items">
                                            <li>ËªäÁ®Æ„ÉªÂπ¥Âºè</li>
                                            <li>ÁóáÁä∂„ÅÆË©≥Á¥∞</li>
                                            <li>Â∏åÊúõ„Åô„ÇãÂØæÂøúÊñπÊ≥ï</li>
                                        </ul>
                                        <p class="consultation-note">„Çí„ÅäÊïô„Åà„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="support-center">
                        <h3>„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜ„Çµ„Éù„Éº„Éà„Çª„É≥„Çø„Éº</h3>
                        <div class="support-info">
                            <div class="contact-info">
                                <p><strong>üìû „ÅäÈõªË©±„Åß„ÅÆ„ÅîÁõ∏Ë´á</strong></p>
                                <p>‰øÆÁêÜ„Å´Èñ¢„Åô„Çã„ÅîË≥™Âïè„ÇÑ„ÅîÁõ∏Ë´á„ÅØ„ÄÅ„ÅäÊ∞óËªΩ„Å´„ÅäÈõªË©±„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                            </div>
                            <div class="contact-info">
                                <p><strong>üåê „Ç™„É≥„É©„Ç§„É≥„Çµ„Éù„Éº„Éà</strong></p>
                                <p>Ë©≥Á¥∞„Å™‰øÆÁêÜ„Éû„Éã„É•„Ç¢„É´„ÇÑÈÉ®ÂìÅÊÉÖÂ†±„ÅØ„ÄÅ„Ç™„É≥„É©„Ç§„É≥„Åß„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ</p>
                            </div>
                        </div>
                    </div>
                    
                    
                    ${result.repair_steps?.length > 0 ? `
                    <div class="repair-steps">
                        <h4>üìù ‰øÆÁêÜÊâãÈ†Ü</h4>
                        <ol class="steps-list">
                            ${result.repair_steps.map((step, idx) => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                    ` : ''}
                    
                    ${result.warnings?.length > 0 ? `
                    <div class="warnings">
                        <h4>‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ†Ö</h4>
                        <ul class="warnings-list">
                            ${result.warnings.map((warning, idx) => `<li>${warning}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                    
                    <!-- Ë©≥Á¥∞„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫Ë®≠ÂÆö -->
                    <!--
                    <div class="detailed-sections">
                        ${result.repair_costs?.items?.length > 0 ? `
                        <div class="collapsible-section">
                            <button class="section-header" onclick="toggleSection('costs${index}')">
                                <h4>üí∞ Ë©≥Á¥∞„Å™‰øÆÁêÜË≤ªÁî®</h4>
                                <span class="toggle-icon">‚ñº</span>
                            </button>
                            <div class="section-content" id="costs${index}" style="display: none;">
                                <p class="cost-summary">${result.repair_costs.summary}</p>
                                
                                ${result.repair_costs.detailed_breakdown?.length > 0 ? `
                                <div class="cost-breakdown">
                                    ${result.repair_costs.detailed_breakdown.map(cost => `
                                        <div class="cost-item">
                                            <div class="cost-header">
                                                ${cost.min_cost && cost.max_cost ? 
                                                    `<span class="cost-range">${cost.min_cost} - ${cost.max_cost}</span>` :
                                                    `<span class="cost-single">${cost.cost}</span>`
                                                }
                                            </div>
                                            <div class="cost-description">${cost.description}</div>
                                            ${cost.reason && cost.reason.length > 0 ? `
                                            <div class="cost-reason">
                                                <strong>Ê†πÊã†:</strong> ${cost.reason.join(', ')}
                                            </div>
                                            ` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                                ` : ''}
                                
                                <ul class="cost-list">
                                    ${result.repair_costs.items.map(cost => `<li>${cost}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.recommended_products?.items?.length > 0 ? `
                        <div class="collapsible-section">
                            <button class="section-header" onclick="toggleSection('products${index}')">
                                <h4>üõ†Ô∏è Ë©≥Á¥∞„Å™Êé®Â•®Ë£ΩÂìÅ</h4>
                                <span class="toggle-icon">‚ñº</span>
                            </button>
                            <div class="section-content" id="products${index}" style="display: none;">
                                ${result.recommended_products.detailed_products?.length > 0 ? `
                                <div class="product-details">
                                    ${result.recommended_products.detailed_products.map(product => `
                                        <div class="product-item">
                                            <strong>${product.name}</strong>
                                            <p>${product.description}</p>
                                        </div>
                                    `).join('')}
                                </div>
                                ` : ''}
                                
                                <ul class="product-list">
                                    ${result.recommended_products.items.map(product => `<li>${product}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.warnings?.length > 0 ? `
                        <div class="collapsible-section warning-section">
                            <button class="section-header" onclick="toggleSection('warnings${index}')">
                                <h4>‚ö†Ô∏è ÈáçË¶Å„Å™Ê≥®ÊÑè‰∫ãÈ†Ö</h4>
                                <span class="toggle-icon">‚ñº</span>
                            </button>
                            <div class="section-content" id="warnings${index}" style="display: none;">
                                <div class="warning-list">
                                    ${result.warnings.map(warning => `
                                        <div class="warning-item">
                                            <span class="warning-icon">‚ö†Ô∏è</span>
                                            <span class="warning-text">${warning}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${result.related_links?.items?.length > 0 ? `
                        <div class="collapsible-section">
                            <button class="section-header" onclick="toggleSection('links${index}')">
                                <h4>üîó Èñ¢ÈÄ£„É™„É≥„ÇØ„ÉªÂèÇËÄÉË≥áÊñô</h4>
                                <span class="toggle-icon">‚ñº</span>
                            </button>
                            <div class="section-content" id="links${index}" style="display: none;">
                                ${result.related_links.additional_resources?.length > 0 ? `
                                <div class="additional-resources">
                                    <h5>ÂèÇËÄÉË≥áÊñô</h5>
                                    <ul class="resource-list">
                                        ${result.related_links.additional_resources.map(resource => `<li>${resource}</li>`).join('')}
                                    </ul>
                                </div>
                                ` : ''}
                                
                                <div class="link-list">
                                    ${result.related_links.items.map(url => `
                                        <a href="${url}" target="_blank" class="external-link">
                                            üîó ${url}
                                        </a>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                    -->
                    
                    <!-- ÂÆåÂÖ®„Å™ÂÜÖÂÆπË°®Á§∫„Å®Èñ¢ÈÄ£Â∫¶Ë©≥Á¥∞„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂâäÈô§ -->
                </div>
                
                <div class="result-actions">
                    <button class="btn btn-primary" onclick="copyToClipboard('${result.title} - ${result.summary}')">
                        üìã „Åì„ÅÆÊÉÖÂ†±„Çí„Ç≥„Éî„Éº
                    </button>
                </div>
            `;
            
            return div;
        }

        // Èñ¢ÈÄ£Â∫¶„Ç¢„Ç§„Ç≥„É≥„ÅÆÂèñÂæó
        function getRelevanceIcon(level) {
            const icons = {
                'high': 'üî•',
                'medium': '‚≠ê',
                'low': 'üìå',
                'very_low': 'üìù'
            };
            return icons[level] || '‚≠ê';
        }

        // „ÇΩ„Éº„Çπ„Ç¢„Ç§„Ç≥„É≥„ÅÆÂèñÂæó
        function getSourceIcon(source) {
            const icons = {
                'text_file': 'üìÑ',
                'notion': 'üìä',
                'rag_text': 'ü§ñ',
                'blog': 'üîó',
                'fallback': 'üîç'
            };
            return icons[source] || 'üìÑ';
        }

        // „ÇΩ„Éº„ÇπÂêç„ÅÆÂèñÂæó
        function getSourceName(source) {
            const names = {
                'text_file': '„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´',
                'notion': 'Notion„Éá„Éº„Çø„Éô„Éº„Çπ',
                'rag_text': 'RAGÊ§úÁ¥¢',
                'blog': '„Éñ„É≠„Ç∞Ë®ò‰∫ã',
                'fallback': 'Ê§úÁ¥¢ÁµêÊûú'
            };
            return names[source] || '„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´';
        }


        // ÂïèÈ°å„ÅÆÁ®ÆÈ°û„ÇíÂèñÂæó
        function getProblemTypes(result) {
            if (result.structured_content && result.structured_content.problem_description) {
                return `<p>${result.structured_content.problem_description}</p>`;
            } else if (result.content) {
                const content = result.content;
                if (content.includes('Case')) {
                    // „Ç±„Éº„ÇπÊÉÖÂ†±„Åã„ÇâÂïèÈ°å„ÇíÊäΩÂá∫
                    const cases = content.match(/## „ÄêCase ([^„Äë]+)„Äë([^#]+)/g);
                    if (cases && cases.length > 0) {
                        let html = '<p><strong>‰∏ª„Å™ÂïèÈ°å„Éë„Çø„Éº„É≥:</strong></p><ul>';
                        cases.slice(0, 3).forEach(caseText => {
                            const match = caseText.match(/## „ÄêCase ([^„Äë]+)„Äë([^#]+)/);
                            if (match) {
                                html += `<li><strong>${match[1]}</strong>: ${match[2].trim().substring(0, 80)}...</li>`;
                            }
                        });
                        html += '</ul>';
                        return html;
                    }
                }
                return `<p>${content.substring(0, 200)}${content.length > 200 ? '...' : ''}</p>`;
            }
            return '<p>ÂïèÈ°å„ÅÆË©≥Á¥∞ÊÉÖÂ†±„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>';
        }

        // ÂâäÈô§„Åï„Çå„ÅüÈáçË§áÈñ¢Êï∞„ÅÆÂÜÖÂÆπ„ÅØ‰∏äË®ò„ÅÆgetRepairCostsÈñ¢Êï∞„Å´Áµ±Âêà„Åï„Çå„Åæ„Åó„Åü

        // Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅ„ÇíÂèñÂæó
        function getToolsAndParts(result) {
            const items = [];
            
            if (result.structured_content && result.structured_content.tools_needed) {
                items.push(...result.structured_content.tools_needed);
            }
            
            if (result.alternatives) {
                items.push(...result.alternatives);
            }
            
            if (result.recommended_products && result.recommended_products.items) {
                items.push(...result.recommended_products.items);
            }
            
            if (items.length > 0) {
                return '<ul>' + items.map(item => `<li>${item}</li>`).join('') + '</ul>';
            }
            
            // FF„Éí„Éº„Çø„Éº„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅÊÉÖÂ†±
            if (result.content && (result.content.includes('FF„Éí„Éº„Çø„Éº') || result.content.includes('FF'))) {
                return `<ul>
                    <li><strong>Â∑•ÂÖ∑:</strong> „Éû„É´„ÉÅ„É°„Éº„Çø„Éº„ÄÅ„Éâ„É©„Ç§„Éê„Éº„Çª„ÉÉ„Éà„ÄÅ„Ç¨„ÇπÊ§úÁü•Âô®</li>
                    <li><strong>FF„Éí„Éº„Çø„ÉºÈÉ®ÂìÅ:</strong> „Éê„Éº„Éä„Éº„ÄÅÂà∂Âæ°Âü∫Êùø„ÄÅ„Éï„Ç°„É≥„ÄÅ„Éï„Ç£„É´„Çø„Éº</li>
                    <li><strong>„Ç¨„ÇπÁ≥ªÁµ±:</strong> „Ç¨„Çπ„Éõ„Éº„Çπ„ÄÅ„Ç¨„Çπ„Éê„É´„Éñ„ÄÅ„Ç¨„Çπ„É¨„ÇÆ„É•„É¨„Éº„Çø„Éº</li>
                    <li><strong>ÈõªÊ∞óÁ≥ªÁµ±:</strong> ÈÖçÁ∑ö„ÄÅ„Éí„É•„Éº„Ç∫„ÄÅ„É™„É¨„Éº„ÄÅ„Çπ„Ç§„ÉÉ„ÉÅ</li>
                    <li><strong>Ê∏ÖÊéÉÁî®ÂìÅ:</strong> „Ç®„Ç¢„ÉÄ„Çπ„Çø„Éº„ÄÅ„Éñ„É©„Ç∑„ÄÅÊ∏ÖÊéÉÂâ§</li>
                    <li><strong>ÂÆâÂÖ®Áî®ÂìÅ:</strong> „Ç¨„ÇπÊ§úÁü•Âô®„ÄÅÊèõÊ∞óÊâá„ÄÅÊ∂àÁÅ´Âô®</li>
                </ul>`;
            }
            // Èõ®Êºè„Çä„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅÊÉÖÂ†±
            else if (result.content && result.content.includes('Èõ®Êºè„Çä')) {
                return `<ul>
                    <li><strong>Â∑•ÂÖ∑:</strong> „Ç∑„Éº„É™„É≥„Ç∞„Ç¨„É≥„ÄÅ„Ç´„ÉÉ„Çø„Éº„ÄÅ„Éñ„É©„Ç∑„ÄÅ„Éû„Çπ„Ç≠„É≥„Ç∞„ÉÜ„Éº„Éó</li>
                    <li><strong>„Ç∑„Éº„É™„É≥„Ç∞Êùê:</strong> „Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà„ÄÅ„Éñ„ÉÅ„É´„ÉÜ„Éº„Éó</li>
                    <li><strong>Á™ìÊû†ÈÉ®ÂìÅ:</strong> „É¢„Éº„É´„ÄÅ„Çπ„Éù„É≥„Ç∏„Ç¥„É†„ÄÅÈò≤Ê∞¥„Ç∑„Éº„É´</li>
                    <li><strong>„É´„Éº„ÉïÈÉ®ÂìÅ:</strong> „É´„Éº„Éï„Éë„Éç„É´„ÄÅ„Ç∏„Éß„Ç§„É≥„ÉàÊùê</li>
                    <li><strong>„Ç¨„Çπ„Ç±„ÉÉ„Éà:</strong> „Éê„ÉÉ„ÇØ„Éâ„Ç¢Áî®„ÄÅ„É©„É≥„ÉóÁî®</li>
                    <li><strong>ÂÜÖË£ÖÊùê:</strong> Â£ÅÁ¥ô„ÄÅÂÜÖÂºµ„ÇäÊùê</li>
                </ul>`;
            }
            
            return '<ul><li>Âü∫Êú¨ÁöÑ„Å™Â∑•ÂÖ∑„Çª„ÉÉ„Éà</li><li>Â∞ÇÈñÄÂ∑•ÂÖ∑„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á</li></ul>';
        }

        // ‰øÆÁêÜÊâãÈ†Ü„ÇíÂèñÂæóÔºàÊîπÂñÑÁâà - „Ç®„Ç¢„Ç≥„É≥ÂØæÂøúÔºâ
        function getRepairSteps(result) {
            if (result.structured_content && result.structured_content.solutions) {
                return '<ol>' + result.structured_content.solutions.map(solution => `<li>${solution}</li>`).join('') + '</ol>';
            } else if (result.repair_steps) {
                return '<ol>' + result.repair_steps.map(step => `<li>${step}</li>`).join('') + '</ol>';
            }
            
            // „Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®„ÅÆ‰øÆÁêÜÊâãÈ†Ü
            if (result.content && result.content.includes('„Ç®„Ç¢„Ç≥„É≥')) {
                return `<ol>
                    <li><strong>„Éà„É©„Éñ„É´ÁÆáÊâÄ„ÅÆÁâπÂÆö:</strong> ÂÜ∑È¢®„ÅÆÊúâÁÑ°„ÄÅ„Éï„Ç°„É≥„ÅÆÂãï‰ΩúÁ¢∫Ë™ç„ÄÅÈõªÊ∫ê„ÅÆON/OFF„ÄÅ„É™„É¢„Ç≥„É≥„ÅÆÊìç‰ΩúÂèØÂê¶</li>
                    <li><strong>ÈõªÂúßÊ∏¨ÂÆö„Éª„Éí„É•„Éº„Ç∫Á¢∫Ë™ç:</strong> 12VÈõªÂúß„ÅÆÁ¢∫Ë™ç„ÄÅ„Éí„É•„Éº„Ç∫„ÅÆÁä∂ÊÖã„ÉÅ„Çß„ÉÉ„ÇØ</li>
                    <li><strong>ÂøúÊÄ•Âá¶ÁΩÆ:</strong> „Éê„ÉÉ„ÉÜ„É™„ÉºÂÖÖÈõªÂæåÂÜçËµ∑Âãï„ÄÅ„Éí„É•„Éº„Ç∫‰∫§Êèõ„ÄÅ„Éâ„É¨„É≥„Éõ„Éº„ÇπÊ∏ÖÊéÉ</li>
                    <li><strong>Êú¨Ê†º‰øÆÁêÜ:</strong> ÂÜ∑Â™í„Ç¨„ÇπË£úÂÖÖ„ÉªÁúüÁ©∫Âºï„Åç„ÄÅ„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº„ÉªÂü∫Êùø„Éª„Éï„Ç°„É≥„É¢„Éº„Çø„Éº„ÅÆ‰∫§Êèõ</li>
                    <li><strong>Ê∏ÖÊéÉ‰ΩúÊ•≠:</strong> „Éâ„É¨„É≥„Éõ„Éº„Çπ„ÉªÂÆ§Â§ñ„É¶„Éã„ÉÉ„Éà„ÅÆÊ∏ÖÊéÉ„ÄÅ„Éï„Ç£„É´„Çø„Éº‰∫§Êèõ</li>
                    <li><strong>ÈõªÂ≠êÈÉ®ÂìÅ‰∫§Êèõ:</strong> „É™„É¢„Ç≥„É≥„ÉªÂèóÂÖâÈÉ®„ÉªÂü∫Êùø„ÅÆ‰∫§Êèõ„ÄÅÈõªÊ∫êÂõûË∑Ø„Éª„Éí„É•„Éº„Ç∫„Éª„É™„É¨„Éº„ÅÆ‰øÆÁêÜ</li>
                    <li><strong>Âãï‰Ωú„ÉÜ„Çπ„Éà:</strong> ÂÜ∑ÊàøÊ©üËÉΩ„ÅÆÁ¢∫Ë™ç„ÄÅÁï∞Èü≥„ÉÅ„Çß„ÉÉ„ÇØ„ÄÅÊ∞¥Êºè„ÇåÁ¢∫Ë™ç</li>
                    <li><strong>‰∫àÈò≤Á≠ñ:</strong> ÂÆöÊúüÁöÑ„Å™„Éí„É•„Éº„Ç∫„ÉªÈõªÂúß„ÉÅ„Çß„ÉÉ„ÇØ„ÄÅÂÜ∑Â™íÊºè„ÇåÁÇπÊ§ú</li>
                </ol>`;
            }
            // FF„Éí„Éº„Çø„Éº„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™‰øÆÁêÜÊâãÈ†Ü
            else if (result.content && (result.content.includes('FF„Éí„Éº„Çø„Éº') || result.content.includes('FF'))) {
                return `<ol>
                    <li><strong>ÂÆâÂÖ®Á¢∫Ë™ç:</strong> „Ç¨„Çπ‰æõÁµ¶„ÇíÂÅúÊ≠¢„Åó„ÄÅÈõªÊ∫ê„ÇíÂàá„Çã</li>
                    <li><strong>Â§ñË£ÖÂèñ„ÇäÂ§ñ„Åó:</strong> FF„Éí„Éº„Çø„Éº„ÅÆÂ§ñË£Ö„Ç´„Éê„Éº„ÇíÊÖéÈáç„Å´Âèñ„ÇäÂ§ñ„Åô</li>
                    <li><strong>„Éï„Ç£„É´„Çø„ÉºÊ∏ÖÊéÉ:</strong> „Ç®„Ç¢„Éï„Ç£„É´„Çø„Éº„ÇíÊ∏ÖÊéÉ„Åæ„Åü„ÅØ‰∫§Êèõ</li>
                    <li><strong>„Éê„Éº„Éä„ÉºÁÇπÊ§ú:</strong> „Éê„Éº„Éä„Éº„ÅÆÊ±ö„Çå„ÇÑÊêçÂÇ∑„ÇíÁ¢∫Ë™ç</li>
                    <li><strong>Âà∂Âæ°Âü∫ÊùøÁÇπÊ§ú:</strong> ÈõªÂ≠êÂà∂Âæ°Âü∫Êùø„ÅÆÂãï‰Ωú„ÇíÁ¢∫Ë™ç</li>
                    <li><strong>„Éï„Ç°„É≥ÁÇπÊ§ú:</strong> ÈÄÅÈ¢®„Éï„Ç°„É≥„ÅÆÂãï‰Ωú„Å®Ê∏ÖÊéÉ</li>
                    <li><strong>„Ç¨„ÇπÁ≥ªÁµ±ÁÇπÊ§ú:</strong> „Ç¨„Çπ„Éõ„Éº„Çπ„Å®„Éê„É´„Éñ„ÅÆÁÇπÊ§ú</li>
                    <li><strong>Âãï‰Ωú„ÉÜ„Çπ„Éà:</strong> ÂÆâÂÖ®Á¢∫Ë™çÂæå„ÄÅÂãï‰Ωú„ÉÜ„Çπ„Éà„ÇíÂÆüÊñΩ</li>
                </ol>`;
            }
            // Èõ®Êºè„Çä„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™‰øÆÁêÜÊâãÈ†Ü
            else if (result.content && result.content.includes('Èõ®Êºè„Çä')) {
                return `<ol>
                    <li><strong>ÂéüÂõ†ÁâπÂÆö:</strong> Ê∞¥„ÅÆ‰æµÂÖ•ÁÆáÊâÄ„ÇíÁâπÂÆöÔºà„É´„Éº„Éï„ÄÅÁ™ìÊû†„ÄÅ„Éâ„Ç¢Âë®„ÇäÔºâ</li>
                    <li><strong>Âè§„ÅÑ„Ç∑„Éº„É™„É≥„Ç∞Èô§Âéª:</strong> „Ç´„ÉÉ„Çø„Éº„ÅßÂè§„ÅÑ„Ç∑„Éº„É™„É≥„Ç∞Êùê„ÇíÈô§Âéª</li>
                    <li><strong>Ê∏ÖÊéÉ„Éª‰πæÁá•:</strong> ‰ΩúÊ•≠ÁÆáÊâÄ„ÇíÊ∏ÖÊéÉ„Åó„ÄÅÂÆåÂÖ®„Å´‰πæÁá•„Åï„Åõ„Çã</li>
                    <li><strong>„Éû„Çπ„Ç≠„É≥„Ç∞:</strong> Âë®Ëæ∫„Çí„Éû„Çπ„Ç≠„É≥„Ç∞„ÉÜ„Éº„Éó„Åß‰øùË≠∑</li>
                    <li><strong>„Ç∑„Éº„É™„É≥„Ç∞ÊñΩÂ∑•:</strong> „Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà„ÇíÂùá‰∏Ä„Å´Â°óÂ∏É</li>
                    <li><strong>‰ªï‰∏ä„Åí:</strong> ‰ΩôÂàÜ„Å™„Ç∑„Éº„É™„É≥„Ç∞Êùê„ÇíÈô§Âéª„Åó„ÄÅ‰ªï‰∏ä„Åí</li>
                    <li><strong>Ê∞¥ÂØÜ„ÉÜ„Çπ„Éà:</strong> Ê∞¥„Çí„Åã„Åë„Å¶Ê∞¥ÂØÜÊÄß„ÇíÁ¢∫Ë™ç</li>
                </ol>`;
            }
            
            return `<ol>
                <li>ÂïèÈ°åÁÆáÊâÄ„ÅÆÁâπÂÆö</li>
                <li>ÂÆâÂÖ®Á¢∫Ë™ç„Å®Ê∫ñÂÇô</li>
                <li>ÈÉ®ÂìÅ„ÅÆ‰∫§Êèõ„Éª‰øÆÁêÜ</li>
                <li>Âãï‰ΩúÁ¢∫Ë™ç</li>
                <li>ÊúÄÁµÇ„ÉÅ„Çß„ÉÉ„ÇØ</li>
            </ol>`;
        }

        // Ê≥®ÊÑè‰∫ãÈ†Ö„ÇíÂèñÂæóÔºàÊîπÂñÑÁâà - „Ç®„Ç¢„Ç≥„É≥ÂØæÂøúÔºâ
        function getWarnings(result) {
            if (result.warnings && result.warnings.length > 0) {
                return '<ul>' + result.warnings.map(warning => `<li>${warning}</li>`).join('') + '</ul>';
            } else if (result.structured_content && result.structured_content.causes) {
                return '<p><strong>ËÄÉ„Åà„Çâ„Çå„ÇãÂéüÂõ†„Å®Ê≥®ÊÑèÁÇπ:</strong></p><ul>' + 
                       result.structured_content.causes.map(cause => `<li>${cause}</li>`).join('') + '</ul>';
            }
            
            // „Ç®„Ç¢„Ç≥„É≥Â∞ÇÁî®„ÅÆÊ≥®ÊÑè‰∫ãÈ†Ö
            if (result.content && result.content.includes('„Ç®„Ç¢„Ç≥„É≥')) {
                return `<ul>
                    <li><strong>Ëªä‰∏°ÈõªÂúß„ÅÆÂÆâÂÖ®Á¢∫Ë™ç:</strong> 12VÈõªÂúß„ÅÆÁ¢∫Ë™ç„ÄÅ„Éê„ÉÉ„ÉÜ„É™„ÉºÁä∂ÊÖã„ÅÆÁÇπÊ§ú</li>
                    <li><strong>ÂÜ∑Â™í„Éï„É≠„É≥È°ûÁÆ°ÁêÜ:</strong> Ê≥ïÂæãÈ†ÜÂÆà„ÄÅÈÅ©Âàá„Å™ÂõûÂèé„ÉªÂªÉÊ£ÑÂá¶ÁêÜ</li>
                    <li><strong>È´òÊâÄ„ÉªËªäÂ§ñ‰ΩúÊ•≠ÊôÇ„ÅÆÂÆâÂÖ®Á¢∫‰øù:</strong> ÂÆ§Â§ñ„É¶„Éã„ÉÉ„Éà‰ΩúÊ•≠ÊôÇ„ÅÆÂÆâÂÖ®ÂØæÁ≠ñ</li>
                    <li><strong>Â∞ÇÈñÄÊ•≠ËÄÖ‰ª•Â§ñ„Åß„ÅÆÂàÜËß£„ÉªÊîπÈÄ†Á¶ÅÊ≠¢:</strong> ÂÜ∑Â™íÁ≥ªÁµ±„ÅÆ‰ΩúÊ•≠„ÅØÂ∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å</li>
                    <li><strong>ÈõªÊ∞óÁ≥ªÁµ±„ÉªÈ´òÊ∏©ÈÉ®„Å∏„ÅÆÊ≥®ÊÑè:</strong> ÊÑüÈõª„ÉªÁÅ´ÂÇ∑„ÅÆÂç±Èô∫ÊÄß</li>
                    <li><strong>ÊèõÊ∞óÁ¢∫‰øù:</strong> ÂØÜÈñâÁ©∫Èñì„Åß„ÅÆ‰ΩúÊ•≠ÊôÇ„ÅØÂçÅÂàÜ„Å™ÊèõÊ∞ó„ÇíÁ¢∫‰øù</li>
                    <li><strong>Â∑•ÂÖ∑„ÅÆÂèñ„ÇäÊâ±„ÅÑ:</strong> ÈõªÊ∞óÂ∑•ÂÖ∑„ÅÆÂÆâÂÖ®„Å™‰ΩøÁî®</li>
                    <li><strong>ÈÉ®ÂìÅÁ¢∫Ë™ç:</strong> Á¥îÊ≠£ÈÉ®ÂìÅ„Åæ„Åü„ÅØÈÅ©ÂêàÈÉ®ÂìÅ„Çí‰ΩøÁî®</li>
                </ul>`;
            }
            // FF„Éí„Éº„Çø„Éº„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ê≥®ÊÑè‰∫ãÈ†Ö
            else if (result.content && (result.content.includes('FF„Éí„Éº„Çø„Éº') || result.content.includes('FF'))) {
                return `<ul>
                    <li><strong>„Ç¨„ÇπÂÆâÂÖ®:</strong> „Ç¨„Çπ‰æõÁµ¶„ÇíÂøÖ„ÅöÂÅúÊ≠¢„Åó„ÄÅ„Ç¨„ÇπÊ§úÁü•Âô®„Çí‰ΩøÁî®</li>
                    <li><strong>ÊèõÊ∞óÁ¢∫‰øù:</strong> ‰ΩúÊ•≠‰∏≠„ÅØÂçÅÂàÜ„Å™ÊèõÊ∞ó„ÇíÁ¢∫‰øù„Åó„ÄÅ‰∏ÄÈÖ∏ÂåñÁÇ≠Á¥†‰∏≠ÊØí„Å´Ê≥®ÊÑè</li>
                    <li><strong>ÈõªÊ∞óÂÆâÂÖ®:</strong> ÈõªÊ∫ê„ÇíÂÆåÂÖ®„Å´Âàá„Çä„ÄÅÊÑüÈõªÈò≤Ê≠¢ÂØæÁ≠ñ„ÇíÂÆüÊñΩ</li>
                    <li><strong>ÁÅ´Ê∞óÂé≥Á¶Å:</strong> „Ç¨„ÇπÁ≥ªÁµ±„ÅÆ‰ΩúÊ•≠‰∏≠„ÅØÁÅ´Ê∞ó„ÇíÂÆåÂÖ®„Å´Èô§Âéª</li>
                    <li><strong>Â∞ÇÈñÄÁü•Ë≠ò:</strong> „Ç¨„ÇπÂô®ÂÖ∑„ÅÆ‰øÆÁêÜ„ÅØÊúâË≥áÊ†ºËÄÖ„Åæ„Åü„ÅØÂ∞ÇÈñÄÂ∫ó„Å´‰æùÈ†º</li>
                    <li><strong>ÈÉ®ÂìÅÁ¢∫Ë™ç:</strong> Á¥îÊ≠£ÈÉ®ÂìÅ„Åæ„Åü„ÅØÈÅ©ÂêàÈÉ®ÂìÅ„Çí‰ΩøÁî®</li>
                </ul>`;
            }
            // Èõ®Êºè„Çä„ÅÆÂ†¥Âêà„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ê≥®ÊÑè‰∫ãÈ†Ö
            else if (result.content && result.content.includes('Èõ®Êºè„Çä')) {
                return `<ul>
                    <li><strong>È´òÊâÄ‰ΩúÊ•≠:</strong> „É´„Éº„Éï‰ΩúÊ•≠„ÅØËª¢ËêΩ„ÅÆÂç±Èô∫„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÂÆâÂÖ®Â∏Ø„ÅÆÁùÄÁî®ÂøÖÈ†à</li>
                    <li><strong>Â§©ÂÄôÊù°‰ª∂:</strong> Èõ®Â§©ÊôÇ„ÇÑÂº∑È¢®ÊôÇ„ÅØ‰ΩúÊ•≠„ÇíÈÅø„Åë„Çã</li>
                    <li><strong>„Ç∑„Éº„É™„É≥„Ç∞Êùê:</strong> „Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà„ÅØÁöÆËÜö„Å´‰ªòÁùÄ„Åô„Çã„Å®Âç±Èô∫</li>
                    <li><strong>ÊèõÊ∞ó:</strong> ÂØÜÈñâÁ©∫Èñì„Åß„ÅÆ‰ΩúÊ•≠ÊôÇ„ÅØÂçÅÂàÜ„Å™ÊèõÊ∞ó„ÇíÁ¢∫‰øù</li>
                    <li><strong>ÈõªÊ∞óÁ≥ªÁµ±:</strong> ÈõªÊ∞óÈÖçÁ∑öËøë„Åè„Åß„ÅÆ‰ΩúÊ•≠ÊôÇ„ÅØÊÑüÈõª„Å´Ê≥®ÊÑè</li>
                    <li><strong>Â∞ÇÈñÄÁü•Ë≠ò:</strong> Ë§áÈõë„Å™ÊßãÈÄ†„ÅÆÂ†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á</li>
                </ul>`;
            }
            
            return `<ul>
                <li>ÂÆâÂÖ®Á¨¨‰∏Ä„Åß‰ΩúÊ•≠„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ</li>
                <li>Â∞ÇÈñÄÁü•Ë≠ò„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØÂ∞ÇÈñÄÂ∫ó„Å´Áõ∏Ë´á</li>
                <li>Â∑•ÂÖ∑„ÅÆÂèñ„ÇäÊâ±„ÅÑ„Å´„ÅØÂçÅÂàÜÊ≥®ÊÑè</li>
            </ul>`;
        }

        // Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„Å´Âü∫„Å•„ÅÑ„Å¶ÂãïÁöÑ„Å´ÂïÜÂìÅ„ÇíÁîüÊàê
        function generateDynamicProducts(query) {
            const queryLower = query.toLowerCase();
            let products = [];
            
            // Èõ®Êºè„ÇäÈñ¢ÈÄ£
            if (queryLower.includes('Èõ®Êºè„Çä') || queryLower.includes('Ê∞¥Êºè„Çå') || queryLower.includes('„Ç∑„Éº„É™„É≥„Ç∞')) {
                products = [
                    { name: '„Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà Èò≤Ê∞¥Áî®', price: '¬•1,200', description: 'Èõ®Êºè„ÇäÈò≤Ê≠¢Áî®„Ç¶„É¨„Çø„É≥„Ç∑„Éº„É©„É≥„Éà', keywords: '„Ç¶„É¨„Çø„É≥,„Ç∑„Éº„É©„É≥„Éà,Èò≤Ê∞¥,Èõ®Êºè„Çä' },
                    { name: '„Éñ„ÉÅ„É´„ÉÜ„Éº„Éó Èò≤Ê∞¥Áî®', price: '¬•800', description: 'ÂøúÊÄ•Èò≤Ê∞¥Áî®„Éñ„ÉÅ„É´„ÉÜ„Éº„Éó', keywords: '„Éñ„ÉÅ„É´,„ÉÜ„Éº„Éó,Èò≤Ê∞¥,ÂøúÊÄ•' },
                    { name: '„Ç∑„Éº„É™„É≥„Ç∞„Ç¨„É≥ „Éó„É≠Áî®', price: '¬•2,500', description: '„Ç∑„Éº„É™„É≥„Ç∞ÊùêÊñΩÂ∑•Áî®Â∑•ÂÖ∑', keywords: '„Ç∑„Éº„É™„É≥„Ç∞,„Ç¨„É≥,Â∑•ÂÖ∑' },
                    { name: 'Á™ìÊû†„É¢„Éº„É´ Èò≤Ê∞¥Áî®', price: '¬•3,200', description: 'Á™ìÊû†Èò≤Ê∞¥Áî®„É¢„Éº„É´', keywords: '„É¢„Éº„É´,Á™ìÊû†,Èò≤Ê∞¥' },
                    { name: '„Éê„ÉÉ„ÇØ„Éâ„Ç¢Áî®„Ç¨„Çπ„Ç±„ÉÉ„Éà', price: '¬•2,800', description: '„Éê„ÉÉ„ÇØ„Éâ„Ç¢Ê∞¥Êºè„ÇåÈò≤Ê≠¢Áî®„Ç¨„Çπ„Ç±„ÉÉ„Éà', keywords: '„Ç¨„Çπ„Ç±„ÉÉ„Éà,„Éê„ÉÉ„ÇØ„Éâ„Ç¢,Ê∞¥Êºè„Çå' }
                ];
            }
            // „Éê„ÉÉ„ÉÜ„É™„ÉºÈñ¢ÈÄ£
            else if (queryLower.includes('„Éê„ÉÉ„ÉÜ„É™„Éº') || queryLower.includes('ÂÖÖÈõª') || queryLower.includes('ÈõªÂúß')) {
                products = [
                    { name: '„Éá„Ç£„Éº„Éó„Çµ„Ç§„ÇØ„É´„Éê„ÉÉ„ÉÜ„É™„Éº 12V', price: '¬•15,000', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÁî®„Éá„Ç£„Éº„Éó„Çµ„Ç§„ÇØ„É´„Éê„ÉÉ„ÉÜ„É™„Éº', keywords: '„Éê„ÉÉ„ÉÜ„É™„Éº,12V,„Éá„Ç£„Éº„Éó„Çµ„Ç§„ÇØ„É´' },
                    { name: '„Éê„ÉÉ„ÉÜ„É™„Éº„ÉÅ„É£„Éº„Ç∏„É£„Éº', price: '¬•8,500', description: 'Â§öÊ©üËÉΩ„Éê„ÉÉ„ÉÜ„É™„Éº„ÉÅ„É£„Éº„Ç∏„É£„Éº', keywords: '„ÉÅ„É£„Éº„Ç∏„É£„Éº,ÂÖÖÈõª,„Éê„ÉÉ„ÉÜ„É™„Éº' },
                    { name: '„Éê„ÉÉ„ÉÜ„É™„ÉºÁ´ØÂ≠ê„ÇØ„É™„Éº„Éä„Éº', price: '¬•1,200', description: '„Éê„ÉÉ„ÉÜ„É™„ÉºÁ´ØÂ≠êÊ∏ÖÊéÉÁî®Â∑•ÂÖ∑', keywords: 'Á´ØÂ≠ê,„ÇØ„É™„Éº„Éä„Éº,Ê∏ÖÊéÉ' },
                    { name: '„Éê„ÉÉ„ÉÜ„É™„Éº„ÉÜ„Çπ„Çø„Éº', price: '¬•3,500', description: '„Éê„ÉÉ„ÉÜ„É™„ÉºÁä∂ÊÖãÊ∏¨ÂÆöÂô®', keywords: '„ÉÜ„Çπ„Çø„Éº,Ê∏¨ÂÆö,„Éê„ÉÉ„ÉÜ„É™„Éº' }
                ];
            }
            // „Éà„Ç§„É¨Èñ¢ÈÄ£
            else if (queryLower.includes('„Éà„Ç§„É¨') || queryLower.includes('Ê∞¥Ê¥ó') || queryLower.includes('„Ç´„Çª„ÉÉ„Éà')) {
                products = [
                    { name: '„Ç´„Çª„ÉÉ„Éà„Éà„Ç§„É¨Áî®„Éë„ÉÉ„Ç≠„É≥', price: '¬•2,500', description: '„Ç´„Çª„ÉÉ„Éà„Éà„Ç§„É¨„ÅÆÊ∞¥Êºè„ÇåÈò≤Ê≠¢Áî®', keywords: '„Éë„ÉÉ„Ç≠„É≥,„Ç´„Çª„ÉÉ„Éà,„Éà„Ç§„É¨' },
                    { name: '„Éà„Ç§„É¨Áî®„Éù„É≥„Éó', price: '¬•12,500', description: 'Ê∞¥Ê¥ó„Éà„Ç§„É¨Áî®Â∞èÂûã„Éù„É≥„Éó', keywords: '„Éù„É≥„Éó,„Éà„Ç§„É¨,Ê∞¥Ê¥ó' },
                    { name: '„Éà„Ç§„É¨Áî®Èô§Ëèå„Çπ„Éó„É¨„Éº', price: '¬•1,200', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÂ∞ÇÁî®Èô§ËèåÂâ§', keywords: 'Èô§Ëèå,„Çπ„Éó„É¨„Éº,„Éà„Ç§„É¨' },
                    { name: '„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ', price: '¬•8,900', description: '‰∫§ÊèõÁî®„Ç´„Çª„ÉÉ„Éà„Çø„É≥„ÇØ', keywords: '„Ç´„Çª„ÉÉ„Éà,„Çø„É≥„ÇØ,‰∫§Êèõ' }
                ];
            }
            // FF„Éí„Éº„Çø„ÉºÈñ¢ÈÄ£
            else if (queryLower.includes('ff„Éí„Éº„Çø„Éº') || queryLower.includes('ff') || queryLower.includes('„Éí„Éº„Çø„Éº') || queryLower.includes('ÊöñÊàø')) {
                products = [
                    { name: 'FF„Éí„Éº„Çø„ÉºÊú¨‰Ωì', price: '¬•45,000', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÁî®FF„Éí„Éº„Çø„ÉºÊú¨‰Ωì', keywords: 'FF„Éí„Éº„Çø„Éº,Êú¨‰Ωì,ÊöñÊàø' },
                    { name: 'FF„Éí„Éº„Çø„ÉºÁî®„Éï„Ç£„É´„Çø„Éº', price: '¬•2,800', description: 'FF„Éí„Éº„Çø„ÉºÁî®„Ç®„Ç¢„Éï„Ç£„É´„Çø„Éº', keywords: '„Éï„Ç£„É´„Çø„Éº,FF„Éí„Éº„Çø„Éº,Ê∏ÖÊéÉ' },
                    { name: 'FF„Éí„Éº„Çø„ÉºÁî®„Éê„Éº„Éä„Éº', price: '¬•8,500', description: 'FF„Éí„Éº„Çø„ÉºÁî®„Éê„Éº„Éä„ÉºÈÉ®ÂìÅ', keywords: '„Éê„Éº„Éä„Éº,FF„Éí„Éº„Çø„Éº,ÁÇπÁÅ´' },
                    { name: 'FF„Éí„Éº„Çø„ÉºÁî®„Éï„Ç°„É≥', price: '¬•6,200', description: 'FF„Éí„Éº„Çø„ÉºÁî®ÈÄÅÈ¢®„Éï„Ç°„É≥', keywords: '„Éï„Ç°„É≥,ÈÄÅÈ¢®,FF„Éí„Éº„Çø„Éº' },
                    { name: 'FF„Éí„Éº„Çø„ÉºÁî®Âà∂Âæ°Âü∫Êùø', price: '¬•12,000', description: 'FF„Éí„Éº„Çø„ÉºÁî®ÈõªÂ≠êÂà∂Âæ°Âü∫Êùø', keywords: 'Âà∂Âæ°Âü∫Êùø,ÈõªÂ≠ê,FF„Éí„Éº„Çø„Éº' }
                ];
            }
            // „Ç®„Ç¢„Ç≥„É≥Èñ¢ÈÄ£Ôºà„Ç´„ÉÜ„Ç¥„É™„ÉºÂÄôË£ú„Å®‰∏ªË¶Å„Ç≠„Éº„ÉØ„Éº„ÉâÂØæÂøúÔºâ
            else if (queryLower.includes('„Ç®„Ç¢„Ç≥„É≥') || queryLower.includes('ÂÜ∑Êàø') || queryLower.includes('ÂÜ∑ÊöñÊàø') || 
                     queryLower.includes('ËªäËºâ„ÇØ„Éº„É©„Éº') || queryLower.includes('ÂÆ§ÂÜÖÁ©∫Ë™ø') || queryLower.includes('„ÇØ„É©„Ç§„É°„Éº„Éà')) {
                products = [
                    { name: '„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„Éº', price: '¬•3,200', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÁî®„Ç®„Ç¢„Ç≥„É≥„Éï„Ç£„É´„Çø„Éº', keywords: '„Éï„Ç£„É´„Çø„Éº,„Ç®„Ç¢„Ç≥„É≥,Ê∏ÖÊéÉ' },
                    { name: 'ÂÜ∑Â™í„Ç¨„Çπ R134a', price: '¬•4,500', description: '„Ç®„Ç¢„Ç≥„É≥Áî®ÂÜ∑Â™í„Ç¨„Çπ', keywords: 'ÂÜ∑Â™í,„Ç¨„Çπ,R134a' },
                    { name: '„Ç®„Ç¢„Ç≥„É≥„ÇØ„É™„Éº„Éä„Éº', price: '¬•1,800', description: '„Ç®„Ç¢„Ç≥„É≥Ê∏ÖÊéÉÁî®„ÇØ„É™„Éº„Éä„Éº', keywords: '„ÇØ„É™„Éº„Éä„Éº,Ê∏ÖÊéÉ,„Ç®„Ç¢„Ç≥„É≥' },
                    { name: '„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„ÉºÈÉ®ÂìÅ', price: '¬•25,000', description: '„Ç®„Ç¢„Ç≥„É≥Áî®„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„ÉºÈÉ®ÂìÅ', keywords: '„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„Éº,ÈÉ®ÂìÅ,„Ç®„Ç¢„Ç≥„É≥' },
                    { name: '„Éï„Ç°„É≥„É¢„Éº„Çø„Éº', price: '¬•8,500', description: '„Ç®„Ç¢„Ç≥„É≥Áî®„Éï„Ç°„É≥„É¢„Éº„Çø„Éº', keywords: '„Éï„Ç°„É≥,„É¢„Éº„Çø„Éº,ÈÄÅÈ¢®' },
                    { name: 'Ê∏©Â∫¶„Çª„É≥„Çµ„Éº', price: '¬•3,800', description: '„Ç®„Ç¢„Ç≥„É≥Áî®Ê∏©Â∫¶„Çª„É≥„Çµ„Éº', keywords: 'Ê∏©Â∫¶,„Çª„É≥„Çµ„Éº,Âà∂Âæ°' },
                    { name: '„É™„É¢„Ç≥„É≥ÂèóÂÖâÈÉ®', price: '¬•2,200', description: '„Ç®„Ç¢„Ç≥„É≥Áî®„É™„É¢„Ç≥„É≥ÂèóÂÖâÈÉ®', keywords: '„É™„É¢„Ç≥„É≥,ÂèóÂÖâÈÉ®,Êìç‰Ωú' },
                    { name: '„Éâ„É¨„É≥„Éõ„Éº„Çπ', price: '¬•1,500', description: '„Ç®„Ç¢„Ç≥„É≥Áî®„Éâ„É¨„É≥„Éõ„Éº„Çπ', keywords: '„Éâ„É¨„É≥,„Éõ„Éº„Çπ,ÊéíÊ∞¥' },
                    { name: 'Âà∂Âæ°Âü∫Êùø', price: '¬•12,000', description: '„Ç®„Ç¢„Ç≥„É≥Áî®Âà∂Âæ°Âü∫Êùø', keywords: 'Âà∂Âæ°,Âü∫Êùø,ÈõªÂ≠ê' },
                    { name: 'ÈõªÊ∫êÂõûË∑ØÈÉ®ÂìÅ', price: '¬•4,800', description: '„Ç®„Ç¢„Ç≥„É≥Áî®ÈõªÊ∫êÂõûË∑ØÈÉ®ÂìÅ', keywords: 'ÈõªÊ∫ê,ÂõûË∑Ø,ÈõªÊ∞ó' }
                ];
            }
            // „Éà„Ç§„É¨Èñ¢ÈÄ£Ôºà„Ç´„ÉÜ„Ç¥„É™„ÉºÂÄôË£ú„Å®‰∏ªË¶Å„Ç≠„Éº„ÉØ„Éº„ÉâÂØæÂøúÔºâ
            else if (queryLower.includes('„Éà„Ç§„É¨') || queryLower.includes('‰æøÂô®') || queryLower.includes('„Ç´„Çª„ÉÉ„Éà') || 
                     queryLower.includes('toilet') || queryLower.includes('Ê∞¥Êºè„Çå') || queryLower.includes('Ë©∞„Åæ„Çä') ||
                     queryLower.includes('ÊéíÊ∞¥') || queryLower.includes('„Éù„É≥„Éó') || queryLower.includes('„Éï„É©„ÉÉ„Éó')) {
                products = [
                    { name: '„Ç´„Çª„ÉÉ„Éà„Éà„Ç§„É¨Áî®O„É™„É≥„Ç∞', price: '¬•1,200', description: '„Éà„Ç§„É¨„Çø„É≥„ÇØÊé•Á∂öÈÉ®Áî®O„É™„É≥„Ç∞', keywords: 'O„É™„É≥„Ç∞,„Ç∑„Éº„É´,Ê∞¥Êºè„Çå' },
                    { name: '„Éà„Ç§„É¨Áî®Áµ¶Ê∞¥„Éù„É≥„Éó', price: '¬•8,500', description: '„Éà„Ç§„É¨Áµ¶Ê∞¥„Éù„É≥„Éó', keywords: '„Éù„É≥„Éó,Áµ¶Ê∞¥,Ê∞¥„ÅåÂá∫„Å™„ÅÑ' },
                    { name: '„Éï„É©„ÉÉ„Éó„Ç∑„Éº„É´„Ç≠„ÉÉ„Éà', price: '¬•3,800', description: '„Éà„Ç§„É¨„Éï„É©„ÉÉ„ÉóÁî®„Ç∑„Éº„É´„Ç≠„ÉÉ„Éà', keywords: '„Éï„É©„ÉÉ„Éó,„Ç∑„Éº„É´,Èñã„Åã„Å™„ÅÑ' },
                    { name: '„Éà„Ç§„É¨Áî®„ÇØ„É™„Éº„Éä„Éº', price: '¬•2,200', description: '„Éà„Ç§„É¨Â∞ÇÁî®„ÇØ„É™„Éº„Éä„Éº', keywords: '„ÇØ„É™„Éº„Éä„Éº,Ê∏ÖÊéÉ,Ë©∞„Åæ„Çä' },
                    { name: '„Éê„É´„ÉñÈÉ®ÂìÅ', price: '¬•4,500', description: '„Éà„Ç§„É¨Áî®„Éê„É´„ÉñÈÉ®ÂìÅ', keywords: '„Éê„É´„Éñ,Ê∞¥Êºè„Çå,‰∫§Êèõ' },
                    { name: '„Ç∑„É™„Ç≥„É≥„Ç∞„É™„Çπ', price: '¬•1,500', description: '„Éà„Ç§„É¨Áî®„Ç∑„É™„Ç≥„É≥„Ç∞„É™„Çπ', keywords: '„Ç∞„É™„Çπ,ÊΩ§Êªë,„Ç∑„Éº„É´' },
                    { name: 'Ê∂àËá≠Ëñ¨Ââ§', price: '¬•800', description: '„Éà„Ç§„É¨Áî®Ê∂àËá≠Ëñ¨Ââ§', keywords: 'Ê∂àËá≠,Ëñ¨Ââ§,ÊÇ™Ëá≠' },
                    { name: '„Éí„É•„Éº„Ç∫„Çª„ÉÉ„Éà', price: '¬•600', description: '„Éà„Ç§„É¨Áî®„Éí„É•„Éº„Ç∫„Çª„ÉÉ„Éà', keywords: '„Éí„É•„Éº„Ç∫,ÈõªÊ∞ó,ÈõªÊ∫ê' },
                    { name: 'ÈÖçÁ∑ö„Ç±„Éº„Éñ„É´', price: '¬•1,800', description: '„Éà„Ç§„É¨Áî®ÈÖçÁ∑ö„Ç±„Éº„Éñ„É´', keywords: 'ÈÖçÁ∑ö,„Ç±„Éº„Éñ„É´,ÈõªÊ∞ó' },
                    { name: 'Ê∫ÄÊùØ„Çª„É≥„Çµ„Éº', price: '¬•3,200', description: '„Éà„Ç§„É¨Ê∫ÄÊùØ„Çª„É≥„Çµ„Éº', keywords: '„Çª„É≥„Çµ„Éº,Ê∫ÄÊùØ,„É©„É≥„Éó' }
                ];
            }
            // ÈõªË£ÖÁ≥ªÈñ¢ÈÄ£
            else if (queryLower.includes('ÈõªË£Ö') || queryLower.includes('„Éí„É•„Éº„Ç∫') || queryLower.includes('ÈÖçÁ∑ö')) {
                products = [
                    { name: '12V „Éí„É•„Éº„Ç∫„Çª„ÉÉ„Éà', price: '¬•850', description: 'ÂêÑÁ®ÆÂÆπÈáè„ÅÆ„Éí„É•„Éº„Ç∫„Çª„ÉÉ„Éà', keywords: '„Éí„É•„Éº„Ç∫,12V,„Çª„ÉÉ„Éà' },
                    { name: 'ÈÖçÁ∑öÁî®„Ç±„Éº„Éñ„É´', price: '¬•2,200', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÁî®ÈÖçÁ∑ö„Ç±„Éº„Éñ„É´', keywords: '„Ç±„Éº„Éñ„É´,ÈÖçÁ∑ö,ÈõªË£Ö' },
                    { name: '„Éû„É´„ÉÅ„É°„Éº„Çø„Éº', price: '¬•4,500', description: 'ÈõªÂúß„ÉªÈõªÊµÅÊ∏¨ÂÆöÁî®„Éû„É´„ÉÅ„É°„Éº„Çø„Éº', keywords: '„Éû„É´„ÉÅ„É°„Éº„Çø„Éº,Ê∏¨ÂÆö,ÈõªÂúß' }
                ];
            }
            // „Éá„Éï„Ç©„É´„ÉàÔºà‰∏ÄËà¨ÁöÑ„Å™Â∑•ÂÖ∑„ÉªÈÉ®ÂìÅÔºâ
            else {
                products = [
                    { name: 'Âü∫Êú¨Â∑•ÂÖ∑„Çª„ÉÉ„Éà', price: '¬•8,500', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº‰øÆÁêÜÁî®Âü∫Êú¨Â∑•ÂÖ∑„Çª„ÉÉ„Éà', keywords: 'Â∑•ÂÖ∑,„Çª„ÉÉ„Éà,Âü∫Êú¨' },
                    { name: '„Éû„É´„ÉÅ„É°„Éº„Çø„Éº', price: '¬•4,500', description: 'ÈõªÂúß„ÉªÈõªÊµÅÊ∏¨ÂÆöÁî®„Éû„É´„ÉÅ„É°„Éº„Çø„Éº', keywords: '„Éû„É´„ÉÅ„É°„Éº„Çø„Éº,Ê∏¨ÂÆö,ÈõªÂúß' },
                    { name: 'Èò≤Ê∞¥„ÉÜ„Éº„Éó', price: '¬•600', description: 'ÂøúÊÄ•‰øÆÁêÜÁî®Èò≤Ê∞¥„ÉÜ„Éº„Éó', keywords: 'Èò≤Ê∞¥,„ÉÜ„Éº„Éó,ÂøúÊÄ•' },
                    { name: 'Ê∏ÖÊéÉÁî®ÂìÅ„Çª„ÉÉ„Éà', price: '¬•2,800', description: '„Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„ÉºÁî®Ê∏ÖÊéÉÁî®ÂìÅ„Çª„ÉÉ„Éà', keywords: 'Ê∏ÖÊéÉ,Áî®ÂìÅ,„Çª„ÉÉ„Éà' }
                ];
            }
            
            // ÂïÜÂìÅHTML„ÇíÁîüÊàê
            let html = '<div class="product-grid">';
            products.forEach(product => {
                html += `
                    <div class="product-item" data-keywords="${product.keywords}">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${product.price}</div>
                        <div class="product-description">${product.description}</div>
                        <button onclick="searchExternalProduct('${product.name}')" class="product-link">Â§ñÈÉ®„ÅßÊ§úÁ¥¢</button>
                    </div>
                `;
            });
            html += '</div>';
            
            return html;
        }

        // Â∞ÇÈñÄÂÆ∂„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆÁï™Âè∑„ÇíË®àÁÆó
        function getExpertSectionNumber(result) {
            let sectionNumber = 6; // Âü∫Êú¨Áï™Âè∑
            
            if (result.substitute_products?.length > 0) {
                sectionNumber++;
            }
            
            if (result.part_purchase_info?.length > 0) {
                sectionNumber++;
            }
            
            return sectionNumber;
        }

        // ÂÆåÂÖ®„Å™ÂÜÖÂÆπ„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà
        function toggleFullContent(index) {
            const fullContent = document.getElementById(`fullContent${index}`);
            const button = fullContent.previousElementSibling;
            
            if (fullContent.style.display === 'none') {
                fullContent.style.display = 'block';
                button.textContent = 'üìñ ÂÆåÂÖ®„Å™ÂÜÖÂÆπ„ÇíÈùûË°®Á§∫';
                button.classList.add('active');
            } else {
                fullContent.style.display = 'none';
                button.textContent = 'üìñ ÂÆåÂÖ®„Å™ÂÜÖÂÆπ„ÇíË°®Á§∫';
                button.classList.remove('active');
            }
        }

        // Ë©≥Á¥∞Ë°®Á§∫„ÅÆÂàá„ÇäÊõø„Åà
        function showFullContent(index) {
            toggleFullContent(index);
        }

        // „Çª„ÇØ„Ç∑„Éß„É≥„ÅÆÊäò„Çä„Åü„Åü„ÅøÂàá„ÇäÊõø„Åà
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            const header = content.previousElementSibling;
            const icon = header.querySelector('.toggle-icon');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                header.classList.add('active');
                icon.textContent = '‚ñ≤';
            } else {
                content.style.display = 'none';
                header.classList.remove('active');
                icon.textContent = '‚ñº';
            }
        }

        // „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                // ÊàêÂäüÊôÇ„ÅÆ„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = '‚úÖ „Ç≥„Éî„ÉºÂÆå‰∫Ü';
                button.style.background = '#28a745';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            }).catch(function(err) {
                console.error('„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ', err);
                alert('„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÊâãÂãï„Åß„Ç≥„Éî„Éº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
            });
        }

        // ÂïÜÂìÅÊ§úÁ¥¢Ê©üËÉΩ
        function searchProducts() {
            const searchTerm = document.getElementById('productSearchInput').value.toLowerCase();
            const productItems = document.querySelectorAll('.product-item');
            
            if (!searchTerm) {
                // Ê§úÁ¥¢Ë™û„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÅØ„Åô„Åπ„Å¶Ë°®Á§∫
                productItems.forEach(item => {
                    item.classList.remove('hidden', 'highlight');
                });
                return;
            }
            
            productItems.forEach(item => {
                const keywords = item.getAttribute('data-keywords') || '';
                const productName = item.querySelector('.product-name').textContent.toLowerCase();
                const description = item.querySelector('.product-description').textContent.toLowerCase();
                
                if (productName.includes(searchTerm) || 
                    description.includes(searchTerm) || 
                    keywords.includes(searchTerm)) {
                    item.classList.remove('hidden');
                    item.classList.add('highlight');
                } else {
                    item.classList.add('hidden');
                    item.classList.remove('highlight');
                }
            });
        }

        // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
        function filterProducts(category) {
            const categories = document.querySelectorAll('.product-category');
            const buttons = document.querySelectorAll('.category-btn');
            
            // „Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            categories.forEach(cat => {
                const catType = cat.getAttribute('data-category');
                
                if (category === 'all' || catType === category) {
                    cat.classList.remove('hidden');
                } else {
                    cat.classList.add('hidden');
                }
            });
            
            // Ê§úÁ¥¢ÁµêÊûú„ÅÆ„Éè„Ç§„É©„Ç§„Éà„Çí„ÇØ„É™„Ç¢
            const productItems = document.querySelectorAll('.product-item');
            productItems.forEach(item => {
                item.classList.remove('highlight');
            });
        }

        // Â§ñÈÉ®ÂïÜÂìÅÊ§úÁ¥¢
        function searchExternalProduct(productName) {
            // Ë§áÊï∞„ÅÆEC„Çµ„Ç§„Éà„ÅßÊ§úÁ¥¢
            const searchQueries = [
                `https://www.amazon.co.jp/s?k=${encodeURIComponent(productName + ' „Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº')}`,
                `https://search.rakuten.co.jp/search/mall/${encodeURIComponent(productName + ' „Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº')}`,
                `https://shopping.yahoo.co.jp/search?p=${encodeURIComponent(productName + ' „Ç≠„É£„É≥„Éî„É≥„Ç∞„Ç´„Éº')}`
            ];
            
            // „É¶„Éº„Ç∂„Éº„Å´ÈÅ∏ÊäûËÇ¢„ÇíÊèêÁ§∫
            const choice = confirm(`„Äå${productName}„Äç„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ\n\nOK: Amazon„ÅßÊ§úÁ¥¢\n„Ç≠„É£„É≥„Çª„É´: ‰ªñ„ÅÆ„Çµ„Ç§„Éà„ÅßÊ§úÁ¥¢`);
            
            if (choice) {
                window.open(searchQueries[0], '_blank');
            } else {
                // Ë§áÊï∞„Çµ„Ç§„Éà„ÅÆÈÅ∏ÊäûËÇ¢„ÇíË°®Á§∫
                const siteChoice = confirm(`Ê§úÁ¥¢„Çµ„Ç§„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö\n\nOK: Ê•ΩÂ§©Â∏ÇÂ†¥\n„Ç≠„É£„É≥„Çª„É´: Yahoo!„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞`);
                const siteIndex = siteChoice ? 1 : 2;
                window.open(searchQueries[siteIndex], '_blank');
            }
        }

        // „Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©„ÇíÂèñÂæó„Åô„ÇãÈñ¢Êï∞
        async function loadCategoriesFromAPI() {
            try {
                console.log('üìã „Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©„ÇíAPI„Åã„ÇâÂèñÂæó‰∏≠...');
                const response = await fetch('/api/categories', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success && data.categories) {
                    console.log('‚úÖ „Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©ÂèñÂæóÊàêÂäü:', Object.keys(data.categories));
                    
                    // „Ç´„ÉÜ„Ç¥„É™ÊÉÖÂ†±„Çí„Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Å´‰øùÂ≠ò
                    window.categoryDefinitions = data.categories;
                    
                    // „Ç´„ÉÜ„Ç¥„É™„Éú„Çø„É≥„ÇíÂãïÁöÑ„Å´ÁîüÊàê
                    updateCategoryButtons(data.categories);
                    
                    return data.categories;
                } else {
                    console.error('‚ùå „Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©ÂèñÂæóÂ§±Êïó:', data.error);
                    return null;
                }
            } catch (error) {
                console.error('‚ùå „Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©ÂèñÂæó„Ç®„É©„Éº:', error);
                return null;
            }
        }
        
        // „Ç´„ÉÜ„Ç¥„É™„Éú„Çø„É≥„ÇíÂãïÁöÑ„Å´Êõ¥Êñ∞
        function updateCategoryButtons(categories) {
            const categoryContainer = document.querySelector('.search-categories');
            if (!categoryContainer) {
                console.warn('‚ö†Ô∏è „Ç´„ÉÜ„Ç¥„É™„Ç≥„É≥„ÉÜ„Éä„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            // Êó¢Â≠ò„ÅÆ„Éú„Çø„É≥„Çí„ÇØ„É™„Ç¢Ôºà„Äå„Åô„Åπ„Å¶„Äç„Éú„Çø„É≥„ÅØÊÆã„ÅôÔºâ
            const allButton = categoryContainer.querySelector('button[onclick="filterProducts(\'all\')"]');
            categoryContainer.innerHTML = '';
            
            // „Äå„Åô„Åπ„Å¶„Äç„Éú„Çø„É≥„ÇíËøΩÂä†
            if (allButton) {
                categoryContainer.appendChild(allButton);
            }
            
            // „Ç´„ÉÜ„Ç¥„É™„Éú„Çø„É≥„ÇíÂãïÁöÑ„Å´ÁîüÊàê
            Object.entries(categories).forEach(([categoryName, categoryInfo]) => {
                const button = document.createElement('button');
                button.className = 'category-btn';
                button.textContent = `${categoryInfo.icon || 'üîß'} ${categoryName}`;
                button.onclick = () => filterProducts(categoryName.toLowerCase());
                categoryContainer.appendChild(button);
            });
            
            console.log('‚úÖ „Ç´„ÉÜ„Ç¥„É™„Éú„Çø„É≥„ÇíÂãïÁöÑ„Å´Êõ¥Êñ∞ÂÆå‰∫Ü');
        }

        // Enter„Ç≠„Éº„ÅßÊ§úÁ¥¢
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('productSearchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchProducts();
                    }
                });
            }
            
            // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„Ç´„ÉÜ„Ç¥„É™ÂÆöÁæ©„ÇíÂèñÂæó
            loadCategoriesFromAPI();
        });

        // ÁµêÊûúË¶ÅÁ¥†„ÅÆ‰ΩúÊàêÔºàÂæìÊù•ÁâàÔºâ
        function createResultElement(result, index) {
            const div = document.createElement('div');
            div.className = 'result-item fade-in';
            div.style.animationDelay = `${index * 0.1}s`;
            
            let urlsHtml = '';
            if (result.urls && result.urls.length > 0) {
                urlsHtml = `
                    <div class="url-info">
                        <strong>üîó Èñ¢ÈÄ£URL:</strong><br>
                        ${result.urls.map(url => `<a href="${url}" class="url-link" target="_blank">${url}</a>`).join('<br>')}
                    </div>
                `;
            }
            
            div.innerHTML = `
                <h3 class="result-title">${result.title}</h3>
                <span class="result-category">${result.category}</span>
                <div class="result-content">${result.content}</div>
                <div class="result-details">
                    <!-- ‰øÆÁêÜË≤ªÁî®ÔºàÈùûË°®Á§∫Ôºâ
                    ${result.costs && result.costs.length > 0 ? `
                        <div class="cost-info">
                            <strong>üí∞ ‰øÆÁêÜË≤ªÁî®:</strong> ${result.costs.join(', ')}
                        </div>
                    ` : ''}
                    -->
                    ${result.alternatives && result.alternatives.length > 0 ? `
                        <div class="product-info">
                            <strong>üõ†Ô∏è Êé®Â•®Ë£ΩÂìÅ:</strong> ${result.alternatives.join(', ')}
                        </div>
                    ` : ''}
                    ${urlsHtml}
                </div>
            `;
            
            return div;
        }

        // ÁµêÊûú„Å™„ÅóË°®Á§∫ÔºàÈùûË°®Á§∫ÁâàÔºâ
        function displayNoResults(query) {
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsSection = document.getElementById('resultsSection');
            
            // ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åô„Çã
            resultsSection.classList.remove('show');
            console.log('‚ö†Ô∏è Ê§úÁ¥¢ÁµêÊûú„Å™„Åó - ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åó„Åæ„Åó„Åü');
        }

        // „Çø„Ç∞Ê§úÁ¥¢
        function searchTag(tag) {
            document.getElementById('searchInput').value = tag;
            document.getElementById('searchForm').dispatchEvent(new Event('submit'));
        }

        // „Ç®„É©„ÉºË°®Á§∫ÔºàÈùûË°®Á§∫ÁâàÔºâ
        function displayError(message) {
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsSection = document.getElementById('resultsSection');
            
            // ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åô„Çã
            resultsSection.classList.remove('show');
            console.log('‚ö†Ô∏è „Ç®„É©„ÉºÁô∫Áîü - ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈùûË°®Á§∫„Å´„Åó„Åæ„Åó„Åü:', message);
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
        window.addEventListener('load', function() {
            console.log('üöÄ „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach((element, index) => {
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 100);
            });
            
            // „Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†±„ÅÆË°®Á§∫
            console.log('üîß „Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†±:');
            console.log('- Ê§úÁ¥¢„Éï„Ç©„Éº„É†:', document.getElementById('searchForm') ? '‚úÖ Â≠òÂú®' : '‚ùå ‰∏çÂ≠òÂú®');
            console.log('- Ê§úÁ¥¢ÂÖ•Âäõ:', document.getElementById('searchInput') ? '‚úÖ Â≠òÂú®' : '‚ùå ‰∏çÂ≠òÂú®');
            console.log('- „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë¶ÅÁ¥†:', document.getElementById('loading') ? '‚úÖ Â≠òÂú®' : '‚ùå ‰∏çÂ≠òÂú®');
            console.log('- ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥:', document.getElementById('resultsSection') ? '‚úÖ Â≠òÂú®' : '‚ùå ‰∏çÂ≠òÂú®');
            console.log('- ÁµêÊûú„Ç≥„É≥„ÉÜ„Éä:', document.getElementById('resultsContainer') ? '‚úÖ Â≠òÂú®' : '‚ùå ‰∏çÂ≠òÂú®');
        });

        // „Çø„ÉñÊ©üËÉΩ„ÅÆÂÆüË£Ö
        function openAppPy() {
            console.log('üöÄ app.py„ÇíËµ∑Âãï‰∏≠...');
            // app.py„ÅÆ„Éë„Çπ„ÇíË°®Á§∫
            const appPath = 'C:\\Users\\user\\Desktop\\udemy-langchain\\camper-repair-clean\\app.py';
            const instructions = `„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Ëµ∑ÂãïÊâãÈ†Ü:

1. „Çø„Éº„Éü„Éä„É´Ôºà„Ç≥„Éû„É≥„Éâ„Éó„É≠„É≥„Éó„ÉàÔºâ„ÇíÈñã„Åè
2. ‰ª•‰∏ã„ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å:
   cd C:\\Users\\user\\Desktop\\udemy-langchain\\camper-repair-clean
   start_backend_local.bat

„Åæ„Åü„ÅØÁõ¥Êé•:
   python app.py

3. Ëµ∑ÂãïÂæå„ÄÅhttp://localhost:5001 „Å´„Ç¢„ÇØ„Çª„Çπ

Ê≥®ÊÑè: OpenAI API„Ç≠„Éº„ÅåÂøÖË¶Å„Åß„Åô`;
            alert(instructions);
            
            // „Çø„Éñ„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            updateTabActive('app');
        }

        function openFrontend() {
            console.log('üåê „Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„ÇíÈñã„Åè‰∏≠...');
            // „Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„ÅÆURL„ÇíÈñã„ÅèÔºàÂêå„Åò„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅßÈñã„ÅèÔºâ
            const frontendUrl = 'http://localhost:5001';
            
            // Êé•Á∂ö„ÉÜ„Çπ„Éà„ÇíÂÆüË°å
            testConnection(frontendUrl).then(success => {
                if (success) {
                    window.location.href = frontendUrl;
                } else {
                    showConnectionError('„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ', frontendUrl);
                }
            });
            
            // „Çø„Éñ„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            updateTabActive('frontend');
        }

        function openBackend() {
            console.log('‚öôÔ∏è „Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÁÆ°ÁêÜ„ÇíÈñã„Åè‰∏≠...');
            // „Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÁÆ°ÁêÜÁîªÈù¢„ÅÆURL„ÇíÈñã„ÅèÔºàÂêå„Åò„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅßÈñã„ÅèÔºâ
            const backendUrl = 'http://localhost:5001/repair_advice_center.html';
            
            // Êé•Á∂ö„ÉÜ„Çπ„Éà„ÇíÂÆüË°å
            testConnection(backendUrl).then(success => {
                if (success) {
                    window.location.href = backendUrl;
                } else {
                    showConnectionError('„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÁÆ°ÁêÜ', backendUrl);
                }
            });
            
            // „Çø„Éñ„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            updateTabActive('backend');
        }

        function updateTabActive(activeTab) {
            // ÂÖ®„Å¶„ÅÆ„Çø„Éñ„Éú„Çø„É≥„Åã„Çâactive„ÇØ„É©„Çπ„ÇíÂâäÈô§
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // „ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åü„Çø„Éñ„Å´active„ÇØ„É©„Çπ„ÇíËøΩÂä†
            event.target.classList.add('active');
        }

        // Êé•Á∂ö„ÉÜ„Çπ„ÉàÈñ¢Êï∞
        async function testConnection(url) {
            try {
                const response = await fetch(url, { 
                    method: 'HEAD', 
                    mode: 'no-cors',
                    timeout: 3000 
                });
                return true;
            } catch (error) {
                console.log('Êé•Á∂ö„ÉÜ„Çπ„ÉàÂ§±Êïó:', error);
                return false;
            }
        }

        // Êé•Á∂ö„Ç®„É©„ÉºË°®Á§∫Èñ¢Êï∞
        function showConnectionError(serviceName, url) {
            const errorMessage = `
${serviceName}„Å´Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì

URL: ${url}

Ëß£Ê±∫ÊñπÊ≥ï:
1. Flask„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíËµ∑Âãï„Åó„Å¶„Åè„Å†„Åï„ÅÑ:
   python app.py

2. „Åæ„Åü„ÅØ„ÄÅ„Éê„ÉÉ„ÉÅ„Éï„Ç°„Ç§„É´„Çí‰ΩøÁî®:
   start_backend_local.bat

3. Ëµ∑ÂãïÂæå„ÄÅÂÜçÂ∫¶„Çø„Éñ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ

Ê≥®ÊÑè: OpenAI API„Ç≠„Éº„ÅÆË®≠ÂÆö„ÅåÂøÖË¶Å„Åß„Åô
            `;
            alert(errorMessage);
        }
    </script>
</body>
</html>
